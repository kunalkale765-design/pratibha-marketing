{"version":3,"file":"packing-DlIbpdfO.js","sources":["../../src/js/pages/packing.js"],"sourcesContent":["import { showToast } from '/js/ui.js';\n\n// HTML escape function to prevent XSS\nfunction escapeHtml(text) {\n    if (text === null || text === undefined) return '';\n    const div = document.createElement('div');\n    div.textContent = String(text);\n    return div.innerHTML;\n}\n\n// Wait for Auth to be available\nconst waitForAuth = (maxWait = 10000) => new Promise((resolve, reject) => {\n    const startTime = Date.now();\n    const check = () => {\n        if (window.Auth) return resolve(window.Auth);\n        if (Date.now() - startTime > maxWait) return reject(new Error('Auth not available'));\n        setTimeout(check, 50);\n    };\n    check();\n});\nconst Auth = await waitForAuth();\n\n// State\nlet queueOrders = [];\nlet _currentView = 'queue';\nlet currentUser = null;\n\n// Initialize\nasync function init() {\n    currentUser = await Auth.requireAuth(['admin', 'staff']);\n    if (!currentUser) return;\n\n    setupViewToggle();\n    await loadQueue();\n    await loadStats();\n}\n\n// Setup view toggle buttons\nfunction setupViewToggle() {\n    const queueBtn = document.getElementById('queueViewBtn');\n    const batchBtn = document.getElementById('batchViewBtn');\n\n    queueBtn?.addEventListener('click', () => switchView('queue'));\n    batchBtn?.addEventListener('click', () => switchView('batch'));\n}\n\n// Switch between queue and batch views\nasync function switchView(view) {\n    _currentView = view;\n\n    // Update button states\n    document.querySelectorAll('.view-btn').forEach(btn => {\n        btn.classList.toggle('active', btn.dataset.view === view);\n    });\n\n    // Update view containers\n    document.querySelectorAll('.view-container').forEach(container => {\n        container.classList.toggle('active', container.id === `${view}View`);\n    });\n\n    if (view === 'batch') {\n        await loadBatchView();\n    }\n}\n\n// Load packing queue\nasync function loadQueue() {\n    try {\n        const response = await fetch('/api/packing/queue', {\n            credentials: 'include'\n        });\n\n        if (!response.ok) throw new Error('Failed to load queue');\n\n        const data = await response.json();\n        queueOrders = data.data || [];\n        renderQueue();\n    } catch (error) {\n        console.error('Error loading queue:', error);\n        queueOrders = [];\n        const queueList = document.getElementById('queueList');\n        if (queueList) {\n            queueList.innerHTML = `\n                <div class=\"error-state\" style=\"text-align:center;padding:2rem;color:var(--error);\">\n                    <p>Failed to load packing queue</p>\n                    <button onclick=\"window.location.reload()\" style=\"margin-top:1rem;padding:0.5rem 1rem;background:var(--dusty-olive);color:white;border:none;border-radius:8px;cursor:pointer;\">Retry</button>\n                </div>\n            `;\n        }\n    }\n}\n\n// Load stats\nasync function loadStats() {\n    try {\n        const response = await fetch('/api/packing/stats', {\n            credentials: 'include'\n        });\n\n        if (!response.ok) return;\n\n        const data = await response.json();\n        const stats = data.data;\n\n        document.getElementById('statTotal').textContent = stats.total || 0;\n        document.getElementById('statPending').textContent = stats.notStarted || 0;\n        document.getElementById('statInProgress').textContent = stats.inProgress || 0;\n        document.getElementById('statCompleted').textContent = stats.completed || 0;\n    } catch (error) {\n        console.error('Error loading stats:', error);\n    }\n}\n\n// Render queue\nfunction renderQueue() {\n    const container = document.getElementById('queueList');\n    if (!container) return;\n\n    if (queueOrders.length === 0) {\n        container.innerHTML = `\n            <div class=\"empty-state\">\n                <div class=\"empty-icon\">&#10003;</div>\n                <h3>All caught up!</h3>\n                <p>No orders waiting to be packed</p>\n            </div>\n        `;\n        return;\n    }\n\n    // Group by batch\n    const grouped = {};\n    queueOrders.forEach(order => {\n        const batchKey = order.batch?.batchNumber || 'No Batch';\n        if (!grouped[batchKey]) {\n            grouped[batchKey] = {\n                batch: order.batch,\n                orders: []\n            };\n        }\n        grouped[batchKey].orders.push(order);\n    });\n\n    container.innerHTML = Object.entries(grouped).map(([batchKey, group]) => `\n        <div class=\"batch-group\">\n            <div class=\"batch-header\">\n                <span class=\"batch-name\">${escapeHtml(batchKey)}</span>\n                <span class=\"batch-count\">${group.orders.length} orders</span>\n            </div>\n            <div class=\"batch-orders\">\n                ${group.orders.map(order => renderOrderCard(order)).join('')}\n            </div>\n        </div>\n    `).join('');\n\n    // Add click handlers - navigate to Orders page with deep link\n    container.querySelectorAll('.order-card').forEach(card => {\n        card.addEventListener('click', () => {\n            const orderId = card.dataset.orderId;\n            // Navigate to Orders page with packing action\n            window.location.href = `/pages/orders/?order=${orderId}&action=pack`;\n        });\n    });\n}\n\n// Render single order card\nfunction renderOrderCard(order) {\n    const statusClass = getPackingStatusClass(order.packingStatus);\n    const statusText = getPackingStatusText(order.packingStatus);\n    const progress = order.packingStatus === 'in_progress'\n        ? `${order.packedItems}/${order.itemCount}`\n        : '';\n\n    return `\n        <div class=\"order-card card-animated ${statusClass}\" data-order-id=\"${escapeHtml(order._id)}\">\n            <div class=\"order-main\">\n                <div class=\"order-info\">\n                    <span class=\"order-number\">${escapeHtml(order.orderNumber)}</span>\n                    <span class=\"customer-name\">${escapeHtml(order.customer?.name || 'Unknown')}</span>\n                </div>\n                <div class=\"order-meta\">\n                    <span class=\"item-count\">${order.itemCount} items</span>\n                    <span class=\"order-amount\">&#8377;${order.totalAmount?.toLocaleString() || 0}</span>\n                </div>\n            </div>\n            <div class=\"order-status\">\n                <span class=\"status-badge ${statusClass}\">${statusText}</span>\n                ${progress ? `<span class=\"progress-mini\">${progress}</span>` : ''}\n            </div>\n            <div class=\"order-action\">\n                <span class=\"action-arrow\">&rarr;</span>\n            </div>\n        </div>\n    `;\n}\n\n// Get packing status class\nfunction getPackingStatusClass(status) {\n    switch (status) {\n        case 'in_progress': return 'status-progress';\n        case 'completed': return 'status-done';\n        case 'on_hold': return 'status-hold';\n        default: return 'status-pending';\n    }\n}\n\n// Get packing status text\nfunction getPackingStatusText(status) {\n    switch (status) {\n        case 'in_progress': return 'In Progress';\n        case 'completed': return 'Packed';\n        case 'on_hold': return 'On Hold';\n        default: return 'Ready';\n    }\n}\n\n// Load batch view\nasync function loadBatchView() {\n    const container = document.getElementById('batchList');\n    if (!container) return;\n\n    container.innerHTML = '<div class=\"loading\">Loading batches...</div>';\n\n    try {\n        // Get today's batches\n        const response = await fetch('/api/batches/today', {\n            credentials: 'include'\n        });\n\n        // Guard: user switched views while fetching\n        if (_currentView !== 'batch') return;\n\n        if (!response.ok) throw new Error('Failed to load batches');\n\n        const data = await response.json();\n        const batches = data.data || [];\n\n        if (batches.length === 0) {\n            container.innerHTML = `\n                <div class=\"empty-state\">\n                    <h3>No batches today</h3>\n                    <p>Batches will appear here when orders come in</p>\n                </div>\n            `;\n            return;\n        }\n\n        // Load summary for each batch\n        const batchSummaries = await Promise.all(\n            batches.map(async (batch) => {\n                try {\n                    const summaryRes = await fetch(`/api/batches/${batch._id}/quantity-summary`, {\n                        credentials: 'include'\n                    });\n                    if (summaryRes.ok) {\n                        const summaryData = await summaryRes.json();\n                        return summaryData.data || summaryData;\n                    }\n                } catch (e) {\n                    console.error('Error loading batch summary:', e);\n                }\n                return { batch, orderStats: {}, products: [] };\n            })\n        );\n\n        // Guard: user switched views during batch summary fetches\n        if (_currentView !== 'batch') return;\n\n        container.innerHTML = batchSummaries.map(summary => renderBatchSummary(summary)).join('');\n    } catch (error) {\n        console.error('Error loading batch view:', error);\n        if (_currentView === 'batch') {\n            container.innerHTML = '<div class=\"error-state\">Failed to load batches</div>';\n        }\n    }\n}\n\n// Render batch summary card\nfunction renderBatchSummary(summary) {\n    const { batch, orderStats, products } = summary;\n    const progress = orderStats.total > 0\n        ? Math.round((orderStats.completed / orderStats.total) * 100)\n        : 0;\n\n    return `\n        <div class=\"batch-summary-card\">\n            <div class=\"batch-summary-header\">\n                <div>\n                    <h3>${escapeHtml(batch.batchNumber)}</h3>\n                    <span class=\"batch-type\">${escapeHtml(batch.batchType)} Batch</span>\n                </div>\n                <div class=\"batch-progress-ring\" style=\"--progress: ${progress}\">\n                    <span>${progress}%</span>\n                </div>\n            </div>\n\n            <div class=\"batch-order-stats\">\n                <div class=\"stat-mini\">\n                    <span class=\"stat-value\">${orderStats.total || 0}</span>\n                    <span class=\"stat-label\">Total</span>\n                </div>\n                <div class=\"stat-mini pending\">\n                    <span class=\"stat-value\">${orderStats.notStarted || 0}</span>\n                    <span class=\"stat-label\">Pending</span>\n                </div>\n                <div class=\"stat-mini progress\">\n                    <span class=\"stat-value\">${orderStats.inProgress || 0}</span>\n                    <span class=\"stat-label\">Packing</span>\n                </div>\n                <div class=\"stat-mini done\">\n                    <span class=\"stat-value\">${orderStats.completed || 0}</span>\n                    <span class=\"stat-label\">Done</span>\n                </div>\n            </div>\n\n            ${products.length > 0 ? `\n                <div class=\"batch-products\">\n                    <h4>Products to Pack</h4>\n                    <div class=\"product-list\">\n                        ${products.slice(0, 5).map(p => `\n                            <div class=\"product-row ${p.remaining <= 0 ? 'done' : ''}\">\n                                <span class=\"product-name\">${escapeHtml(p.productName)}</span>\n                                <span class=\"product-qty\">\n                                    ${p.totalPacked}/${p.totalOrdered} ${escapeHtml(p.unit)}\n                                </span>\n                                <div class=\"product-progress-bar\">\n                                    <div class=\"product-progress-fill\" style=\"width: ${p.percentPacked}%\"></div>\n                                </div>\n                            </div>\n                        `).join('')}\n                        ${products.length > 5 ? `\n                            <div class=\"more-products\">+${products.length - 5} more products</div>\n                        ` : ''}\n                    </div>\n                </div>\n            ` : ''}\n        </div>\n    `;\n}\n\n// Safe localStorage wrapper (private browsing may throw)\nfunction safeStorage(key, value) {\n    try {\n        if (value === undefined) return localStorage.getItem(key);\n        localStorage.setItem(key, value);\n    } catch { return null; }\n}\n\n// Dismiss help banner\nfunction dismissPackingHelp() {\n    const banner = document.getElementById('packingHelpBanner');\n    if (banner) {\n        banner.style.display = 'none';\n        safeStorage('packingHelpDismissed', 'true');\n    }\n}\n\n// Check if help banner should be shown\nfunction checkPackingHelpBanner() {\n    const dismissed = safeStorage('packingHelpDismissed');\n    const banner = document.getElementById('packingHelpBanner');\n    if (banner && dismissed === 'true') {\n        banner.style.display = 'none';\n    }\n}\n\n// Initialize help banner visibility on load\ncheckPackingHelpBanner();\n\n// Polling for queue refresh\nlet _packingPollInterval = null;\n\nfunction startPolling() {\n    stopPolling();\n    _packingPollInterval = setInterval(() => {\n        loadQueue();\n    }, 30000);\n}\n\nfunction stopPolling() {\n    if (_packingPollInterval) {\n        clearInterval(_packingPollInterval);\n        _packingPollInterval = null;\n    }\n}\n\n// Refresh stats and restart polling when page becomes visible\ndocument.addEventListener('visibilitychange', () => {\n    if (document.visibilityState === 'visible') {\n        loadStats();\n        loadQueue();\n        startPolling();\n    } else {\n        stopPolling();\n    }\n});\n\n// Make functions globally available\nwindow.dismissPackingHelp = dismissPackingHelp;\n\n// Clean up polling on page unload\nwindow.addEventListener('beforeunload', stopPolling);\n\n// Initialize\ninit().then(() => {\n    startPolling();\n});\n"],"names":["escapeHtml","text","div","waitForAuth","maxWait","resolve","reject","startTime","check","Auth","queueOrders","_currentView","currentUser","init","setupViewToggle","loadQueue","loadStats","queueBtn","batchBtn","switchView","view","btn","container","loadBatchView","response","renderQueue","error","queueList","stats","grouped","order","batchKey","group","renderOrderCard","card","orderId","statusClass","getPackingStatusClass","statusText","getPackingStatusText","progress","status","batches","batchSummaries","batch","summaryRes","summaryData","e","summary","renderBatchSummary","orderStats","products","p","safeStorage","key","value","dismissPackingHelp","banner","checkPackingHelpBanner","dismissed","_packingPollInterval","startPolling","stopPolling"],"mappings":"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"}