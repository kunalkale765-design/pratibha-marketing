const In=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Xe=globalThis,qr="10.36.0";function Xc(){return Qc(Xe),Xe}function Qc(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||qr,t[qr]=t[qr]||{}}function Eo(e,t,n=Xe){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[qr]=r[qr]||{};return s[e]||(s[e]=t())}const Iy="Sentry Logger ",Gl={};function vy(e){if(!("console"in Xe))return e();const t=Xe.console,n={},r=Object.keys(Gl);r.forEach(s=>{const i=Gl[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function wy(){eu().enabled=!0}function ky(){eu().enabled=!1}function oh(){return eu().enabled}function Ry(...e){Zc("log",...e)}function Cy(...e){Zc("warn",...e)}function Ay(...e){Zc("error",...e)}function Zc(e,...t){In&&oh()&&vy(()=>{Xe.console[e](`${Iy}[${e}]:`,...t)})}function eu(){return In?Eo("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Rt={enable:wy,disable:ky,isEnabled:oh,log:Ry,warn:Cy,error:Ay},xy=Object.prototype.toString;function Ny(e,t){return xy.call(e)===`[object ${t}]`}function My(e){return Ny(e,"Object")}function Oy(e){return!!(e?.then&&typeof e.then=="function")}const $y=Xe;function Py(){try{return $y.document.location.href}catch{return""}}function Ly(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{In&&Rt.log(`Failed to add non-enumerable property "${t}" to object`,e)}}let Gn;function To(e){if(Gn!==void 0)return Gn?Gn(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=Xe;return t in n&&typeof n[t]=="function"?(Gn=n[t],Gn(e)):(Gn=null,e())}function Ka(){return To(()=>Math.random())}function Dy(){return To(()=>Date.now())}function Fy(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Uy(){const e=Xe;return e.crypto||e.msCrypto}let da;function By(){return Ka()*16}function Vr(e=Uy()){try{if(e?.randomUUID)return To(()=>e.randomUUID()).replace(/-/g,"")}catch{}return da||(da="10000000100040008000"+1e11),da.replace(/[018]/g,t=>(t^(By()&15)>>t/4).toString(16))}const ah=1e3;function ch(){return Dy()/ah}function Hy(){const{performance:e}=Xe;if(!e?.now||!e.timeOrigin)return ch;const t=e.timeOrigin;return()=>(t+To(()=>e.now()))/ah}let ql;function Wy(){return(ql??(ql=Hy()))()}function jy(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Wy(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Vr()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function uh(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=uh(r[s],t[s],n-1));return r}function Vl(){return Vr()}const Xa="_sentrySpan";function Yl(e,t){t?Ly(e,Xa,t):delete e[Xa]}function Jl(e){return e[Xa]}const zy=100;let ns=class Qa{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Vl(),sampleRand:Ka()}}clone(){const t=new Qa;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Yl(t,Jl(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&jy(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Qa?n.getScopeData():My(n)?t:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Yl(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Vl(),sampleRand:Ka()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:zy;if(r<=0)return this;const s={timestamp:ch(),...t,message:t.message?Fy(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Jl(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=uh(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||Vr();if(!this._client)return In&&Rt.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||Vr();if(!this._client)return In&&Rt.warn("No client configured on scope - will not capture message!"),s;const i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||Vr();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(In&&Rt.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Gy(){return Eo("defaultCurrentScope",()=>new ns)}function qy(){return Eo("defaultIsolationScope",()=>new ns)}let Vy=class{constructor(t,n){let r;t?r=t:r=new ns;let s;n?s=n:s=new ns,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Oy(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function lr(){const e=Xc(),t=Qc(e);return t.stack=t.stack||new Vy(Gy(),qy())}function Yy(e){return lr().withScope(e)}function Jy(e,t){const n=lr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Kl(e){return lr().withScope(()=>e(lr().getIsolationScope()))}function Ky(){return{withIsolationScope:Kl,withScope:Yy,withSetScope:Jy,withSetIsolationScope:(e,t)=>Kl(t),getCurrentScope:()=>lr().getScope(),getIsolationScope:()=>lr().getIsolationScope()}}function lh(e){const t=Qc(e);return t.acs?t.acs:Ky()}function Io(){const e=Xc();return lh(e).getCurrentScope()}function Xy(){const e=Xc();return lh(e).getIsolationScope()}function Qy(){return Eo("globalScope",()=>new ns)}function _s(){return Io().getClient()}function Xl(e){const t=_s();if(!t){In&&Rt.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function Zy(e,t={},n=Io()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||_s();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function eS(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function tS(){return!eS()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function nS(){return typeof window<"u"&&(!tS()||rS())}function rS(){return Xe.process?.type==="renderer"}const rt=Xe,oe=rt.document,jr=rt.navigator,dh="Report a Bug",sS="Cancel",iS="Send Bug Report",oS="Confirm",aS="Report a Bug",cS="your.email@example.org",uS="Email",lS="What's the bug? What did you expect?",dS="Description",fS="Your Name",pS="Name",hS="Thank you for your report!",mS="(required)",_S="Add a screenshot",gS="Remove screenshot",yS="Highlight",SS="Hide",bS="Remove",ES="widget",TS="api",IS=5e3,vS=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=_s();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&Io().setTags(e.tags);const r=Zy({source:TS,url:Py(),...e},t);return new Promise((s,i)=>{const o=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(o),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},fi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function wS(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(jr.userAgent)||/Macintosh/i.test(jr.userAgent)&&jr.maxTouchPoints&&jr.maxTouchPoints>1||!isSecureContext)}function Vs(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function kS(e){const t=oe.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function ze(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const qn=20,RS="http://www.w3.org/2000/svg";function CS(){const e=a=>rt.document.createElementNS(RS,a),t=ze(e("svg"),{width:`${qn}`,height:`${qn}`,viewBox:`0 0 ${qn} ${qn}`,fill:"var(--actor-color, var(--foreground))"}),n=ze(e("g"),{clipPath:"url(#clip0_57_80)"}),r=ze(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),i=ze(e("clipPath"),{id:"clip0_57_80"}),o=ze(e("rect"),{width:`${qn}`,height:`${qn}`,fill:"white"});return i.appendChild(o),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(o),t}function AS({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=oe.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||dh,s.appendChild(CS()),e){const o=oe.createElement("span");o.appendChild(oe.createTextNode(e)),s.appendChild(o)}const i=kS(r);return{el:s,appendToDom(){n.appendChild(i),n.appendChild(s)},removeFromDom(){s.remove(),i.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const fh="rgba(88, 74, 192, 1)",xS={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:fh,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Ql={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:fh,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Zl(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function NS({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=oe.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${Zl(e==="dark"?{...Ql,...t}:{...xS,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${Zl({...Ql,...t})}
  }
}`:""}
`,r&&s.setAttribute("nonce",r),s}const ph=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:s="sentry-feedback",autoInject:i=!0,showBranding:o=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:b={},addScreenshotButtonLabel:$=_S,cancelButtonLabel:C=sS,confirmButtonLabel:B=oS,emailLabel:N=uS,emailPlaceholder:S=cS,formTitle:R=aS,isRequiredLabel:L=mS,messageLabel:E=dS,messagePlaceholder:A=lS,nameLabel:k=pS,namePlaceholder:x=fS,removeScreenshotButtonLabel:M=gS,submitButtonLabel:X=iS,successMessageText:V=hS,triggerLabel:ee=dh,triggerAriaLabel:T="",highlightToolText:W=yS,hideToolText:v=SS,removeHighlightText:z=bS,onFormOpen:se,onFormClose:te,onSubmitSuccess:ge,onSubmitError:xe,onFormSubmitted:jt}={})=>{const Ne={id:s,autoInject:i,showBranding:o,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:b,themeLight:y,triggerLabel:ee,triggerAriaLabel:T,cancelButtonLabel:C,submitButtonLabel:X,confirmButtonLabel:B,formTitle:R,emailLabel:N,emailPlaceholder:S,messageLabel:E,messagePlaceholder:A,nameLabel:k,namePlaceholder:x,successMessageText:V,isRequiredLabel:L,addScreenshotButtonLabel:$,removeScreenshotButtonLabel:M,highlightToolText:W,hideToolText:v,removeHighlightText:z,onFormClose:te,onFormOpen:se,onSubmitError:xe,onSubmitSuccess:ge,onFormSubmitted:jt};let Le=null,ut=[];const zt=ie=>{if(!Le){const fe=oe.createElement("div");fe.id=String(ie.id),oe.body.appendChild(fe),Le=fe.attachShadow({mode:"open"}),Le.appendChild(NS(ie))}return Le},Lr=async ie=>{const fe=ie.enableScreenshot&&wS();let qe,Te;try{qe=(t?t():await e("feedbackModalIntegration",m))(),Xl(qe)}catch{throw fi&&Rt.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const lt=fe?n?n():await e("feedbackScreenshotIntegration",m):void 0;lt&&(Te=lt(),Xl(Te))}catch{fi&&Rt.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const Ce=qe.createDialog({options:{...ie,onFormClose:()=>{Ce?.close(),ie.onFormClose?.()},onFormSubmitted:()=>{Ce?.close(),ie.onFormSubmitted?.()}},screenshotIntegration:Te,sendFeedback:vS,shadow:zt(ie)});return Ce},qs=(ie,fe={})=>{const qe=Vs(Ne,fe),Te=typeof ie=="string"?oe.querySelector(ie):typeof ie.addEventListener=="function"?ie:null;if(!Te)throw fi&&Rt.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ce=null;const lt=async()=>{Ce||(Ce=await Lr({...qe,onFormSubmitted:()=>{Ce?.removeFromDom(),qe.onFormSubmitted?.()}})),Ce.appendToDom(),Ce.open()};Te.addEventListener("click",lt);const Y=()=>{ut=ut.filter(He=>He!==Y),Ce?.removeFromDom(),Ce=null,Te.removeEventListener("click",lt)};return ut.push(Y),Y},Dr=(ie={})=>{const fe=Vs(Ne,ie),qe=zt(fe),Te=AS({triggerLabel:fe.triggerLabel,triggerAriaLabel:fe.triggerAriaLabel,shadow:qe,styleNonce:h});return qs(Te.el,{...fe,onFormOpen(){Te.hide()},onFormClose(){Te.show()},onFormSubmitted(){Te.show()}}),Te};return{name:"Feedback",setupOnce(){!nS()||!Ne.autoInject||(oe.readyState==="loading"?oe.addEventListener("DOMContentLoaded",()=>Dr().appendToDom()):Dr().appendToDom())},attachTo:qs,createWidget(ie={}){const fe=Dr(Vs(Ne,ie));return fe.appendToDom(),fe},async createForm(ie={}){return Lr(Vs(Ne,ie))},remove(){Le&&(Le.parentElement?.remove(),Le=null),ut.forEach(ie=>ie()),ut=[]}}});function YL(){return _s()?.getIntegrationByName("Feedback")}var vo,ce,hh,yn,ed,mh,Za,rs={},tu=[],MS=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,nu=Array.isArray;function Kt(e,t){for(var n in t)e[n]=t[n];return e}function _h(e){var t=e.parentNode;t&&t.removeChild(e)}function q(e,t,n){var r,s,i,o={};for(i in t)i=="key"?r=t[i]:i=="ref"?s=t[i]:o[i]=t[i];if(arguments.length>2&&(o.children=arguments.length>3?vo.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)o[i]===void 0&&(o[i]=e.defaultProps[i]);return pi(e,o,r,s,null)}function pi(e,t,n,r,s){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s??++hh,__i:-1,__u:0};return s==null&&ce.vnode!=null&&ce.vnode(i),i}function gs(e){return e.children}function hi(e,t){this.props=e,this.context=t}function dr(e,t){if(t==null)return e.__?dr(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?dr(e):null}function OS(e,t,n){var r,s=e.__v,i=s.__e,o=e.__P;if(o)return(r=Kt({},s)).__v=s.__v+1,ce.vnode&&ce.vnode(r),ru(o,r,s,e.__n,o.ownerSVGElement!==void 0,32&s.__u?[i]:null,t,i??dr(s),!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&gh(r),r}function gh(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return gh(e)}}function td(e){(!e.__d&&(e.__d=!0)&&yn.push(e)&&!Pi.__r++||ed!==ce.debounceRendering)&&((ed=ce.debounceRendering)||mh)(Pi)}function Pi(){var e,t,n,r=[],s=[];for(yn.sort(Za);e=yn.shift();)e.__d&&(n=yn.length,t=OS(e,r,s)||t,n===0||yn.length>n?(ec(r,t,s),s.length=r.length=0,t=void 0,yn.sort(Za)):t&&ce.__c&&ce.__c(t,tu));t&&ec(r,t,s),Pi.__r=0}function yh(e,t,n,r,s,i,o,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||tu,y=t.length;for(n.__d=c,$S(n,t,g),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?rs:g[p.__i]||rs,p.__i=l,ru(e,p,f,s,i,o,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&su(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=Sh(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function $S(e,t,n){var r,s,i,o,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?pi(null,s,null,null,s):nu(s)?pi(gs,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?pi(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=PS(s,n,o=r+l,d),s.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==o&&(a===o+1?l++:a>o?d>c-o?l+=a-o:l--:l=a<o&&a==o-1?a-o:0,a!==r+l&&(s.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=dr(i)),tc(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=dr(i)),tc(i,i))}function Sh(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=Sh(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function PS(e,t,n,r){var s=e.key,i=e.type,o=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;o>=0||a<t.length;){if(o>=0){if((c=t[o])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return o;o--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&i===c.type)return a;a++}}return-1}function nd(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||MS.test(t)?n:n+"px"}function Ys(e,t,n,r,s){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||nd(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||nd(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?sd:rd,i)):e.removeEventListener(t,i?sd:rd,i);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function rd(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ce.event?ce.event(e):e)}}function sd(e){if(this.l)return this.l[e.type+!0](ce.event?ce.event(e):e)}function ru(e,t,n,r,s,i,o,a,c,u){var d,l,f,p,h,m,g,y,b,$,C,B,N,S,R,L=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=ce.__b)&&d(t);e:if(typeof L=="function")try{if(y=t.props,b=(d=L.contextType)&&r[d.__c],$=d?b?b.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in L&&L.prototype.render?t.__c=l=new L(y,$):(t.__c=l=new hi(y,$),l.constructor=L,l.render=DS),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=$,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),L.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Kt({},l.__s)),Kt(l.__s,L.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)L.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(L.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,$),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,$)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(E){E&&(E.__=t)}),C=0;C<l._sb.length;C++)l.__h.push(l._sb[C]);l._sb=[],l.__h.length&&o.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,$),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=$,l.props=y,l.__P=e,l.__e=!1,B=ce.__r,N=0,"prototype"in L&&L.prototype.render){for(l.state=l.__s,l.__d=!1,B&&B(t),d=l.render(l.props,l.state,l.context),S=0;S<l._sb.length;S++)l.__h.push(l._sb[S]);l._sb=[]}else do l.__d=!1,B&&B(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++N<25);l.state=l.__s,l.getChildContext!=null&&(r=Kt(Kt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),yh(e,nu(R=d!=null&&d.type===gs&&d.key==null?d.props.children:d)?R:[R],t,n,r,s,i,o,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&o.push(l),g&&(l.__E=l.__=null)}catch(E){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ce.__e(E,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=LS(n.__e,t,n,r,s,i,o,c,u);(d=ce.diffed)&&d(t)}function ec(e,t,n){for(var r=0;r<n.length;r++)su(n[r],n[++r],n[++r]);ce.__c&&ce.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){ce.__e(i,s.__v)}})}function LS(e,t,n,r,s,i,o,a,c){var u,d,l,f,p,h,m,g=n.props,y=t.props,b=t.type;if(b==="svg"&&(s=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),i=null,a=!1}if(b===null)g===y||a&&e.data===y||(e.data=y);else{if(i=i&&vo.call(e.childNodes),g=n.props||rs,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||Ys(e,u,null,p,s));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||Ys(e,u,p,g[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),yh(e,nu(f)?f:[f],t,n,r,s&&b!=="foreignObject",i,o,i?i[0]:n.__k&&dr(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&_h(i[u]);a||(u="value",h!==void 0&&(h!==e[u]||b==="progress"&&!h||b==="option"&&h!==g[u])&&Ys(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&Ys(e,u,m,g[u],!1))}return e}function su(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ce.__e(r,n)}}function tc(e,t,n){var r,s;if(ce.unmount&&ce.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||su(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){ce.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&tc(r[s],t,n||typeof e.type!="function");n||e.__e==null||_h(e.__e),e.__=e.__e=e.__d=void 0}function DS(e,t,n){return this.constructor(e,n)}function FS(e,t,n){var r,s,i,o;ce.__&&ce.__(e,t),s=(r=!1)?null:t.__k,i=[],o=[],ru(t,e=t.__k=q(gs,null,[e]),s||rs,rs,t.ownerSVGElement!==void 0,s?null:t.firstChild?vo.call(t.childNodes):null,i,s?s.__e:t.firstChild,r,o),e.__d=void 0,ec(i,e,o)}vo=tu.slice,ce={__e:function(e,t,n,r){for(var s,i,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),o=s.__d),o)return s.__E=s}catch(a){e=a}throw e}},hh=0,hi.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Kt({},this.state),typeof e=="function"&&(e=e(Kt({},n),this.props)),e&&Kt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),td(this))},hi.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),td(this))},hi.prototype.render=gs,yn=[],mh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Za=function(e,t){return e.__v.__b-t.__v.__b},Pi.__r=0;var Pt,ae,fa,id,fr=0,bh=[],mi=[],pe=ce,od=pe.__b,ad=pe.__r,cd=pe.diffed,ud=pe.__c,ld=pe.unmount,dd=pe.__;function Un(e,t){pe.__h&&pe.__h(ae,e,fr||t),fr=0;var n=ae.__H||(ae.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:mi}),n.__[e]}function bn(e){return fr=1,Eh(Ih,e)}function Eh(e,t,n){var r=Un(Pt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Ih(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ae,!ae.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};ae.u=!0;var i=ae.shouldComponentUpdate,o=ae.componentWillUpdate;ae.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,s(a,c,u),i=d}o&&o.call(this,a,c,u)},ae.shouldComponentUpdate=s}return r.__N||r.__}function US(e,t){var n=Un(Pt++,3);!pe.__s&&iu(n.__H,t)&&(n.__=e,n.i=t,ae.__H.__h.push(n))}function Th(e,t){var n=Un(Pt++,4);!pe.__s&&iu(n.__H,t)&&(n.__=e,n.i=t,ae.__h.push(n))}function BS(e){return fr=5,ys(function(){return{current:e}},[])}function HS(e,t,n){fr=6,Th(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function ys(e,t){var n=Un(Pt++,7);return iu(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function or(e,t){return fr=8,ys(function(){return e},t)}function WS(e){var t=ae.context[e.__c],n=Un(Pt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ae)),t.props.value):e.__}function jS(e,t){pe.useDebugValue&&pe.useDebugValue(t?t(e):e)}function zS(e){var t=Un(Pt++,10),n=bn();return t.__=e,ae.componentDidCatch||(ae.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function GS(){var e=Un(Pt++,11);if(!e.__){for(var t=ae.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function qS(){for(var e;e=bh.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(_i),e.__H.__h.forEach(nc),e.__H.__h=[]}catch(t){e.__H.__h=[],pe.__e(t,e.__v)}}pe.__b=function(e){ae=null,od&&od(e)},pe.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),dd&&dd(e,t)},pe.__r=function(e){ad&&ad(e),Pt=0;var t=(ae=e.__c).__H;t&&(fa===ae?(t.__h=[],ae.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=mi,n.__N=n.i=void 0})):(t.__h.forEach(_i),t.__h.forEach(nc),t.__h=[],Pt=0)),fa=ae},pe.diffed=function(e){cd&&cd(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(bh.push(t)!==1&&id===pe.requestAnimationFrame||((id=pe.requestAnimationFrame)||VS)(qS)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==mi&&(n.__=n.__V),n.i=void 0,n.__V=mi})),fa=ae=null},pe.__c=function(e,t){t.some(function(n){try{n.__h.forEach(_i),n.__h=n.__h.filter(function(r){return!r.__||nc(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],pe.__e(r,n.__v)}}),ud&&ud(e,t)},pe.unmount=function(e){ld&&ld(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{_i(r)}catch(s){t=s}}),n.__H=void 0,t&&pe.__e(t,n.__v))};var fd=typeof requestAnimationFrame=="function";function VS(e){var t,n=function(){clearTimeout(r),fd&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);fd&&(t=requestAnimationFrame(n))}function _i(e){var t=ae,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ae=t}function nc(e){var t=ae;e.__c=e.__(),ae=t}function iu(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Ih(e,t){return typeof t=="function"?t(e):t}const YS=Object.defineProperty({__proto__:null,useCallback:or,useContext:WS,useDebugValue:jS,useEffect:US,useErrorBoundary:zS,useId:GS,useImperativeHandle:HS,useLayoutEffect:Th,useMemo:ys,useReducer:Eh,useRef:BS,useState:bn},Symbol.toStringTag,{value:"Module"}),JS="http://www.w3.org/2000/svg";function KS(){const e=r=>oe.createElementNS(JS,r),t=ze(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=ze(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function XS({options:e}){const t=ys(()=>({__html:KS().outerHTML}),[]);return q("h2",{class:"dialog__header"},q("span",{class:"dialog__title"},e.formTitle),e.showBranding?q("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function QS(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function pa(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function ZS({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:i,onSubmitError:o,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:y,messageLabel:b,messagePlaceholder:$,nameLabel:C,namePlaceholder:B,submitButtonLabel:N,isRequiredLabel:S}=e,[R,L]=bn(!1),[E,A]=bn(null),[k,x]=bn(!1),M=u?.input,[X,V]=bn(null),ee=or(v=>{V(v),x(!1)},[]),T=or(v=>{const z=QS(v,{emailLabel:h,isEmailRequired:g,isNameRequired:y,messageLabel:b,nameLabel:C});return z.length>0?A(`Please enter in the following required fields: ${z.join(", ")}`):A(null),z.length===0},[h,g,y,b,C]),W=or(async v=>{L(!0);try{if(v.preventDefault(),!(v.target instanceof HTMLFormElement))return;const z=new FormData(v.target),se=await(u&&k?u.value():void 0),te={name:pa(z,"name"),email:pa(z,"email"),message:pa(z,"message"),attachments:se?[se]:void 0};if(!T(te))return;try{const ge=await s({name:te.name,email:te.email,message:te.message,source:ES,tags:d},{attachments:te.attachments});i(te,ge)}catch(ge){fi&&Rt.error(ge),A(ge),o(ge)}}finally{L(!1)}},[u&&k,i,o]);return q("form",{class:"form",onSubmit:W},M&&k?q(M,{onError:ee}):null,q("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:R},q("div",{class:"form__top"},E?q("div",{class:"form__error-container"},E):null,c?q("label",{for:"name",class:"form__label"},q(ha,{label:C,isRequiredLabel:S,isRequired:y}),q("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:B,required:y,type:"text"})):q("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?q("label",{for:"email",class:"form__label"},q(ha,{label:h,isRequiredLabel:S,isRequired:g}),q("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):q("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),q("label",{for:"message",class:"form__label"},q(ha,{label:b,isRequiredLabel:S,isRequired:!0}),q("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:$,required:!0,rows:5})),M?q("label",{for:"screenshot",class:"form__label"},q("button",{class:"btn btn--default",disabled:R,type:"button",onClick:()=>{V(null),x(v=>!v)}},k?f:l),X?q("div",{class:"form__error-container"},X.message):null):null),q("div",{class:"btn-group"},q("button",{class:"btn btn--primary",disabled:R,type:"submit"},N),q("button",{class:"btn btn--default",disabled:R,type:"button",onClick:r},p))))}function ha({label:e,isRequired:t,isRequiredLabel:n}){return q("span",{class:"form__label__text"},e,t&&q("span",{class:"form__label__text--required"},n))}const Js=16,pd=17,eb="http://www.w3.org/2000/svg";function tb(){const e=c=>rt.document.createElementNS(eb,c),t=ze(e("svg"),{width:`${Js}`,height:`${pd}`,viewBox:`0 0 ${Js} ${pd}`,fill:"inherit"}),n=ze(e("g"),{clipPath:"url(#clip0_57_156)"}),r=ze(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=ze(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const i=e("defs"),o=ze(e("clipPath"),{id:"clip0_57_156"}),a=ze(e("rect"),{width:`${Js}`,height:`${Js}`,fill:"white",transform:"translate(0 0.5)"});return o.appendChild(a),i.appendChild(o),t.appendChild(i).appendChild(o).appendChild(a),t}function nb({open:e,onFormSubmitted:t,...n}){const r=n.options,s=ys(()=>({__html:tb().outerHTML}),[]),[i,o]=bn(null),a=or(()=>{i&&(clearTimeout(i),o(null)),t()},[i]),c=or((u,d)=>{n.onSubmitSuccess(u,d),o(setTimeout(()=>{t(),o(null)},IS))},[t]);return q(gs,null,i?q("div",{class:"success__position",onClick:a},q("div",{class:"success__content"},r.successMessageText,q("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):q("dialog",{class:"dialog",onClick:r.onFormClose,open:e},q("div",{class:"dialog__position"},q("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},q(XS,{options:r}),q(ZS,{...n,onSubmitSuccess:c})))))}const rb=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,sb=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,ib=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,ob=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,ab=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function cb(e){const t=oe.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${rb}
${sb}
${ib}
${ob}
${ab}
`,e&&t.setAttribute("nonce",e),t}function ub(){const e=Io().getUser(),t=Xy().getUser(),n=Qy().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const lb=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,i=e.useSentryUser,o=ub(),a=oe.createElement("div"),c=cb(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),oe.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),_s()?.emit("openFeedbackWidget"),u=oe.body.style.overflow,oe.body.style.overflow="hidden"},close(){f(!1),oe.body.style.overflow=u}},l=t?.createInput({h:q,hooks:YS,dialog:d,options:e}),f=p=>{FS(q(nb,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(i&&o?.[i.name]||""),defaultEmail:String(i&&o?.[i.email]||""),onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(h,m)=>{f(!1),e.onSubmitSuccess?.(h,m)},onSubmitError:h=>{e.onSubmitError?.(h)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function db({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function fb(e){const t=oe.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function pb({h:e}){return function({action:n,setAction:r,options:s}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},s.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},s.hideToolText)))}}function hb({hooks:e}){function t(){const[n,r]=e.useState(rt.devicePixelRatio??1);return e.useEffect(()=>{const s=()=>{r(rt.devicePixelRatio)},i=matchMedia(`(resolution: ${rt.devicePixelRatio}dppx)`);return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:i,onError:o}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await jr.mediaDevices.getDisplayMedia({video:{width:rt.innerWidth*a,height:rt.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=oe.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(o)},[])}}function mb(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Vt(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function ma(e,t){Vt(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function _a(e,t,n){Vt(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(i=>{mb(i,s,t)})})}function _b({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const i=hb({hooks:t}),o=pb({h:e}),a=db({h:e}),c={__html:fb(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),y=t.useRef(null),b=t.useRef(null),$=t.useRef(null),[C,B]=t.useState(1),N=t.useMemo(()=>{const k=oe.getElementById(s.id);if(!k)return"white";const x=getComputedStyle(k);return x.getPropertyValue("--button-primary-background")||x.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const k=()=>{const x=g.current;x&&(Vt(l.canvas,{alpha:!1},M=>{const X=Math.min(x.clientWidth/M.width,x.clientHeight/M.height);B(X)}),(x.clientHeight===0||x.clientWidth===0)&&setTimeout(k,0))};return k(),rt.addEventListener("resize",k),()=>{rt.removeEventListener("resize",k)}},[l]);const S=t.useCallback((k,x)=>{Vt(k,{alpha:!0},(M,X)=>{X.scale(x,x),M.width=l.canvas.width,M.height=l.canvas.height})},[l]);t.useEffect(()=>{S(y.current,l.dpi),ma(y.current,l.canvas)},[l]),t.useEffect(()=>{S(b.current,l.dpi),Vt(b.current,{alpha:!0},(k,x)=>{x.clearRect(0,0,k.width,k.height)}),_a(b.current,N,h)},[h,N]),t.useEffect(()=>{S(n,l.dpi),ma(n,l.canvas),Vt(oe.createElement("canvas"),{alpha:!0},(k,x)=>{x.scale(l.dpi,l.dpi),k.width=l.canvas.width,k.height=l.canvas.height,_a(k,N,h),ma(n,k)})},[h,l,N]);const R=k=>{if(!f||!$.current)return;const x=$.current.getBoundingClientRect(),M={type:f,x:k.offsetX/C,y:k.offsetY/C},X=(T,W)=>{const v=(W.clientX-x.x)/C,z=(W.clientY-x.y)/C;return{type:T.type,x:Math.min(T.x,v),y:Math.min(T.y,z),w:Math.abs(v-T.x),h:Math.abs(z-T.y)}},V=T=>{Vt(b.current,{alpha:!0},(W,v)=>{v.clearRect(0,0,W.width,W.height)}),_a(b.current,N,[...h,X(M,T)])},ee=T=>{const W=X(M,T);W.w*C>=1&&W.h*C>=1&&m(v=>[...v,W]),oe.removeEventListener("mousemove",V),oe.removeEventListener("mouseup",ee)};oe.addEventListener("mousemove",V),oe.addEventListener("mouseup",ee)},L=t.useCallback(k=>x=>{x.preventDefault(),x.stopPropagation(),m(M=>{const X=[...M];return X.splice(k,1),X})},[]),E={width:`${l.canvas.width*C}px`,height:`${l.canvas.height*C}px`},A=k=>{k.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:y,id:"background",style:E}),e("canvas",{ref:b,id:"foreground",style:E}),e("div",{ref:$,onMouseDown:R,style:E},h.map((k,x)=>e("div",{key:x,class:"editor__rect",style:{top:`${k.y*C}px`,left:`${k.x*C}px`,width:`${k.w*C}px`,height:`${k.h*C}px`}},e("button",{"aria-label":s.removeHighlightText,onClick:L(x),onMouseDown:A,onMouseUp:A,type:"button"},e(a,null))))))),e(o,{options:s,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{Vt(oe.createElement("canvas"),{alpha:!1},(y,b)=>{b.scale(g,g),y.width=m.videoWidth,y.height=m.videoHeight,b.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const gb=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=oe.createElement("canvas");return{input:_b({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const i=await new Promise(o=>{s.toBlob(o,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),w=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,U=globalThis,Qt="10.36.0";function Bt(){return Ss(U),U}function Ss(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Qt,t[Qt]=t[Qt]||{}}function wr(e,t,n=U){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Qt]=r[Qt]||{};return s[e]||(s[e]=t())}const ou=["debug","info","warn","error","log","assert","trace"],yb="Sentry Logger ",Li={};function Bn(e){if(!("console"in U))return e();const t=U.console,n={},r=Object.keys(Li);r.forEach(s=>{const i=Li[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Sb(){cu().enabled=!0}function bb(){cu().enabled=!1}function vh(){return cu().enabled}function Eb(...e){au("log",...e)}function Tb(...e){au("warn",...e)}function Ib(...e){au("error",...e)}function au(e,...t){w&&vh()&&Bn(()=>{U.console[e](`${yb}[${e}]:`,...t)})}function cu(){return w?wr("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const _={enable:Sb,disable:bb,isEnabled:vh,log:Eb,warn:Tb,error:Ib},wh=50,ht="?",hd=/\(error: (.*)\)/,md=/captureMessage|captureException/;function kh(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const i=[],o=n.split(`
`);for(let a=r;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const u=hd.test(c)?c.replace(hd,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){i.push(l);break}}if(i.length>=wh+s)break}}return wb(i.slice(s))}}function vb(e){return Array.isArray(e)?kh(...e):e}function wb(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Ks(t).function||"")&&t.pop(),t.reverse(),md.test(Ks(t).function||"")&&(t.pop(),md.test(Ks(t).function||"")&&t.pop()),t.slice(0,wh).map(n=>({...n,filename:n.filename||Ks(t).filename,function:n.function||ht}))}function Ks(e){return e[e.length-1]||{}}const ga="<anonymous>";function an(e){try{return!e||typeof e!="function"?ga:e.name||ga}catch{return ga}}function rc(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function Rh(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}function kb(e){let t=e?.startsWith("file://")?e.slice(7):e;return t?.match(/\/[A-Z]:/)&&(t=t.slice(1)),t}const gi={},_d={};function bs(e,t){gi[e]=gi[e]||[],gi[e].push(t)}function Es(e,t){if(!_d[e]){_d[e]=!0;try{t()}catch(n){w&&_.error(`Error while instrumenting ${e}`,n)}}}function vn(e,t){const n=e&&gi[e];if(n)for(const r of n)try{r(t)}catch(s){w&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${an(r)}
Error:`,s)}}let ya=null;function Ch(e){const t="error";bs(t,e),Es(t,Rb)}function Rb(){ya=U.onerror,U.onerror=function(e,t,n,r,s){return vn("error",{column:r,error:s,line:n,msg:e,url:t}),ya?ya.apply(this,arguments):!1},U.onerror.__SENTRY_INSTRUMENTED__=!0}let Sa=null;function Ah(e){const t="unhandledrejection";bs(t,e),Es(t,Cb)}function Cb(){Sa=U.onunhandledrejection,U.onunhandledrejection=function(e){return vn("unhandledrejection",e),Sa?Sa.apply(this,arguments):!0},U.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const xh=Object.prototype.toString;function Ct(e){switch(xh.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Lt(e,Error)}}function kr(e,t){return xh.call(e)===`[object ${t}]`}function Nh(e){return kr(e,"ErrorEvent")}function gd(e){return kr(e,"DOMError")}function Ab(e){return kr(e,"DOMException")}function Cn(e){return kr(e,"String")}function wo(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Rr(e){return e===null||wo(e)||typeof e!="object"&&typeof e!="function"}function it(e){return kr(e,"Object")}function ko(e){return typeof Event<"u"&&Lt(e,Event)}function xb(e){return typeof Element<"u"&&Lt(e,Element)}function Nb(e){return kr(e,"RegExp")}function Cr(e){return!!(e?.then&&typeof e.then=="function")}function Mb(e){return it(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Lt(e,t){try{return e instanceof t}catch{return!1}}function Mh(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function uu(e){return typeof Request<"u"&&Lt(e,Request)}const lu=U,Ob=80;function Oh(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||Ob;for(;n&&i++<r&&(u=$b(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function $b(e,t){const n=e,r=[];if(!n?.tagName)return"";if(lu.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&Cn(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Ts(){try{return lu.document.location.href}catch{return""}}function Pb(e){if(!lu.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Ye(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&$h(s,r);try{e[t]=s}catch{w&&_.log(`Failed to replace method "${t}" in object`,e)}}function Ge(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{w&&_.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function $h(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ge(e,"__sentry_original__",t)}catch{}}function du(e){return e.__sentry_original__}function Ph(e){if(Ct(e))return{message:e.message,name:e.name,stack:e.stack,...Sd(e)};if(ko(e)){const t={type:e.type,target:yd(e.target),currentTarget:yd(e.currentTarget),...Sd(e)};return typeof CustomEvent<"u"&&Lt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function yd(e){try{return xb(e)?Oh(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Sd(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Lb(e){const t=Object.keys(Ph(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}let Vn;function Is(e){if(Vn!==void 0)return Vn?Vn(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=U;return t in n&&typeof n[t]=="function"?(Vn=n[t],Vn(e)):(Vn=null,e())}function At(){return Is(()=>Math.random())}function vs(){return Is(()=>Date.now())}function ss(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ba(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let i=Math.min(s+140,r);return i>r-5&&(i=r),i===r&&(s=Math.max(i-140,0)),n=n.slice(s,i),s>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function Di(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{Mh(s)?n.push(Rh(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function yi(e,t,n=!1){return Cn(e)?Nb(t)?t.test(e):Cn(t)?n?e===t:e.includes(t):!1:!1}function xt(e,t=[],n=!1){return t.some(r=>yi(e,r,n))}function Db(){const e=U;return e.crypto||e.msCrypto}let Ea;function Fb(){return At()*16}function ve(e=Db()){try{if(e?.randomUUID)return Is(()=>e.randomUUID()).replace(/-/g,"")}catch{}return Ea||(Ea="10000000100040008000"+1e11),Ea.replace(/[018]/g,t=>(t^(Fb()&15)>>t/4).toString(16))}function Lh(e){return e.exception?.values?.[0]}function Sn(e){const{message:t,event_id:n}=e;if(t)return t;const r=Lh(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function sc(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Dt(e,t){const n=Lh(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s?.data,...t.data};n.mechanism.data=i}}function Ub(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(o=>ba(o,0));const i=Math.min(r-1,s);t.context_line=ba(e[i],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(o=>ba(o,0))}function bd(e){if(Bb(e))return!0;try{Ge(e,"__sentry_captured__",!0)}catch{}return!1}function Bb(e){try{return e.__sentry_captured__}catch{}}const Dh=1e3;function Hn(){return vs()/Dh}function Hb(){const{performance:e}=U;if(!e?.now||!e.timeOrigin)return Hn;const t=e.timeOrigin;return()=>(t+Is(()=>e.now()))/Dh}let Ed;function be(){return(Ed??(Ed=Hb()))()}let Ta=null;function Wb(){const{performance:e}=U;if(!e?.now)return;const t=3e5,n=Is(()=>e.now()),r=vs(),s=e.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<t)return s;const i=e.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<t?i:r-n}function fu(){return Ta===null&&(Ta=Wb()),Ta}function jb(e){const t=be(),n={sid:ve(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Gb(n)};return e&&pr(n,e),n}function pr(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||be(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ve()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function zb(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),pr(e,n)}function Gb(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function ws(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=ws(r[s],t[s],n-1));return r}function mt(){return ve()}function Nt(){return ve().substring(16)}const ic="_sentrySpan";function _t(e,t){t?Ge(e,ic,t):delete e[ic]}function hr(e){return e[ic]}const qb=100;let An=class oc{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:mt(),sampleRand:At()}}clone(){const t=new oc;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,_t(t,hr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&pr(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof oc?n.getScopeData():it(n)?t:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,_t(this,void 0),this._attachments=[],this.setPropagationContext({traceId:mt(),sampleRand:At()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:qb;if(r<=0)return this;const s={timestamp:Hn(),...t,message:t.message?ss(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:hr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=ws(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||ve();if(!this._client)return w&&_.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||ve();if(!this._client)return w&&_.warn("No client configured on scope - will not capture message!"),s;const i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||ve();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(w&&_.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Vb(){return wr("defaultCurrentScope",()=>new An)}function Yb(){return wr("defaultIsolationScope",()=>new An)}let Jb=class{constructor(t,n){let r;t?r=t:r=new An;let s;n?s=n:s=new An,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Cr(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function mr(){const e=Bt(),t=Ss(e);return t.stack=t.stack||new Jb(Vb(),Yb())}function Kb(e){return mr().withScope(e)}function Xb(e,t){const n=mr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Td(e){return mr().withScope(()=>e(mr().getIsolationScope()))}function Qb(){return{withIsolationScope:Td,withScope:Kb,withSetScope:Xb,withSetIsolationScope:(e,t)=>Td(t),getCurrentScope:()=>mr().getScope(),getIsolationScope:()=>mr().getIsolationScope()}}function dn(e){const t=Ss(e);return t.acs?t.acs:Qb()}function ne(){const e=Bt();return dn(e).getCurrentScope()}function Re(){const e=Bt();return dn(e).getIsolationScope()}function Si(){return wr("globalScope",()=>new An)}function at(...e){const t=Bt(),n=dn(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function KL(...e){const t=Bt(),n=dn(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function O(){return ne().getClient()}function Fh(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,i={trace_id:n,span_id:s||Nt()};return r&&(i.parent_span_id=r),i}const ft="sentry.source",pu="sentry.sample_rate",Uh="sentry.previous_trace_sample_rate",Ue="sentry.op",Ee="sentry.origin",is="sentry.idle_span_finish_reason",Bh="sentry.measurement_unit",Hh="sentry.measurement_value",ac="sentry.custom_span_name",hu="sentry.profile_id",mu="sentry.exclusive_time",Zb="http.request.method",eE="url.full",tE="sentry.link.type",nE=0,Ro=1,K=2;function rE(e){if(e<400&&e>=100)return{code:Ro};if(e>=400&&e<500)switch(e){case 401:return{code:K,message:"unauthenticated"};case 403:return{code:K,message:"permission_denied"};case 404:return{code:K,message:"not_found"};case 409:return{code:K,message:"already_exists"};case 413:return{code:K,message:"failed_precondition"};case 429:return{code:K,message:"resource_exhausted"};case 499:return{code:K,message:"cancelled"};default:return{code:K,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:K,message:"unimplemented"};case 503:return{code:K,message:"unavailable"};case 504:return{code:K,message:"deadline_exceeded"};default:return{code:K,message:"internal_error"}}return{code:K,message:"internal_error"}}function Fi(e,t){e.setAttribute("http.response.status_code",t);const n=rE(t);n.message!=="unknown_error"&&e.setStatus(n)}const Wh="_sentryScope",jh="_sentryIsolationScope";function sE(e){try{const t=U.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function iE(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function oE(e,t,n){e&&(Ge(e,jh,sE(n)),Ge(e,Wh,t))}function Ui(e){const t=e;return{scope:t[Wh],isolationScope:iE(t[jh])}}const _u="sentry-",aE=/^sentry-/,cE=8192;function gu(e){const t=uE(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(aE)){const o=s.slice(_u.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function zh(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${_u}${r}`]=s),n),{});return lE(t)}function uE(e){if(!(!e||!Cn(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Id(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):Id(e)}function Id(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),s=t.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function lE(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=s===0?i:`${t},${i}`;return o.length>cE?(w&&_.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const dE=/^o(\d+)\./,fE=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function pE(e){return e==="http"||e==="https"}function Ht(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Gh(e){const t=fE.exec(e);if(!t){Bn(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",i="",o="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return qh({host:i,pass:s,path:c,projectId:u,port:o,protocol:n,publicKey:r})}function qh(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function hE(e){if(!w)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(_.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?pE(r)?t&&isNaN(parseInt(t,10))?(_.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(_.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(_.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function mE(e){return e.match(dE)?.[1]}function Vh(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=mE(n)),r}function Yh(e){const t=typeof e=="string"?Gh(e):qh(e);if(!(!t||!hE(t)))return t}function os(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Jh=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function _E(e){if(!e)return;const t=e.match(Jh);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Kh(e,t){const n=_E(e),r=gu(t);if(!n?.traceId)return{traceId:mt(),sampleRand:At()};const s=gE(n,r);r&&(r.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=n;return{traceId:i,parentSpanId:o,sampled:a,dsc:r||{},sampleRand:s}}function Xh(e=mt(),t=Nt(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Qh(e=mt(),t=Nt(),n){return`00-${e}-${t}-${n?"01":"00"}`}function gE(e,t){const n=os(t?.sample_rand);if(n!==void 0)return n;const r=os(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?At()*r:r+At()*(1-r):At()}function yE(e,t){const n=Vh(e);return t&&n&&t!==n?(_.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(_.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const Zh=0,yu=1;let vd=!1;function SE(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=Z(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function em(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:Z(e).parent_span_id,i=Ui(e).scope,o=r?i?.getPropagationContext().propagationSpanId||Nt():t;return{parent_span_id:s,span_id:o,trace_id:n}}function bE(e){const{traceId:t,spanId:n}=e.spanContext(),r=fn(e);return Xh(t,n,r)}function EE(e){const{traceId:t,spanId:n}=e.spanContext(),r=fn(e);return Qh(t,n,r)}function tm(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===yu,attributes:i,...s}))}function wn(e){return typeof e=="number"?wd(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?wd(e.getTime()):be()}function wd(e){return e>9999999999?e/1e3:e}function Z(e){if(IE(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(TE(e)){const{attributes:r,startTime:s,name:i,endTime:o,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:wn(s),timestamp:wn(o)||void 0,status:nm(a),op:r[Ue],origin:r[Ee],links:tm(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function TE(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function IE(e){return typeof e.getSpanJSON=="function"}function fn(e){const{traceFlags:t}=e.spanContext();return t===yu}function nm(e){if(!(!e||e.code===nE))return e.code===Ro?"ok":e.message||"internal_error"}const kn="_sentryChildSpans",cc="_sentryRootSpan";function rm(e,t){const n=e[cc]||e;Ge(t,cc,n),e[kn]?e[kn].add(t):Ge(e,kn,new Set([t]))}function vE(e,t){e[kn]&&e[kn].delete(t)}function bi(e){const t=new Set;function n(r){if(!t.has(r)&&fn(r)){t.add(r);const s=r[kn]?Array.from(r[kn]):[];for(const i of s)n(i)}}return n(e),Array.from(t)}function Ae(e){return e[cc]||e}function Qe(){const e=Bt(),t=dn(e);return t.getActiveSpan?t.getActiveSpan():hr(ne())}function uc(){vd||(Bn(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),vd=!0)}function XL(e,t){e.updateName(t),e.setAttributes({[ft]:"custom",[ac]:t})}let kd=!1;function wE(){if(kd)return;function e(){const t=Qe(),n=t&&Ae(t);if(n){const r="internal_error";w&&_.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:K,message:r})}}e.tag="sentry_tracingErrorCallback",kd=!0,Ch(e),Ah(e)}function Je(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||O()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Rd(e){_.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Bi(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(RE(n)){if(yi(e.description,n))return w&&Rd(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?yi(e.description,n.name):!0,s=n.op?e.op&&yi(e.op,n.op):!0;if(r&&s)return w&&Rd(e),!0}return!1}function kE(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function RE(e){return typeof e=="string"||e instanceof RegExp}const Co="production",sm="_frozenDsc";function Ei(e,t){Ge(e,sm,t)}function im(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||Co,release:n.release,public_key:r,trace_id:e,org_id:Vh(t)};return t.emit("createDsc",s),s}function Su(e,t){const n=t.getPropagationContext();return n.dsc||im(n.traceId,e)}function gt(e){const t=O();if(!t)return{};const n=Ae(e),r=Z(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[pu]??s[Uh];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[sm];if(c)return a(c);const u=i?.get("sentry.dsc"),d=u&&gu(u);if(d)return a(d);const l=im(e.spanContext().traceId,t),f=s[ft],p=r.description;return f!=="url"&&p&&(l.transaction=p),Je()&&(l.sampled=String(fn(n)),l.sample_rand=i?.get("sentry.sample_rand")??Ui(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function QL(e){const t=gt(e);return zh(t)}let Ft=class{constructor(t={}){this._traceId=t.traceId||mt(),this._spanId=t.spanId||Nt()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Zh}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function tt(e,t=100,n=1/0){try{return lc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function om(e,t=3,n=100*1024){const r=tt(e,t);return NE(r)>n?om(e,t-1,n):r}function lc(e,t,n=1/0,r=1/0,s=ME()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=CE(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return lc("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=Ph(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=lc(p,h,c-1,r,s),l++}return o(t),d}function CE(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Mh(t))return Rh(t);if(Mb(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${an(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=AE(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function AE(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function xE(e){return~-encodeURI(e).split(/%..|./).length}function NE(e){return xE(JSON.stringify(e))}function ME(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function bt(e,t=[]){return[e,t]}function OE(e,t){const[n,r]=e;return[n,[...r,t]]}function xn(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function dc(e,t){return xn(e,(n,r)=>t.includes(r))}function Hi(e){const t=Ss(U);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function $E(e){const t=Ss(U);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Wi(e){const[t,n]=e;let r=JSON.stringify(t);function s(i){typeof r=="string"?r=typeof i=="string"?r+i:[Hi(r),i]:r.push(typeof i=="string"?Hi(i):i)}for(const i of n){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(tt(a))}s(c)}}return typeof r=="string"?r:PE(r)}function PE(e){const t=e.reduce((s,i)=>s+i.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function LE(e){let t=typeof e=="string"?Hi(e):e;function n(o){const a=t.subarray(0,o);return t=t.subarray(o+1),a}function r(){let o=t.indexOf(10);return o<0&&(o=t.length),JSON.parse($E(n(o)))}const s=r(),i=[];for(;t.length;){const o=r(),a=typeof o.length=="number"?o.length:void 0;i.push([o,a?n(a):r()])}return[s,i]}function DE(e){return[{type:"span"},e]}function FE(e){const t=typeof e.data=="string"?Hi(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const UE={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Cd(e){return UE[e]}function bu(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function BE(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ht(r)},...s&&{trace:s}}}function HE(e,t){if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function WE(e,t,n,r){const s=bu(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Ht(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return bt(i,[o])}function jE(e,t,n,r){const s=bu(n),i=e.type&&e.type!=="replay_event"?e.type:"event";HE(e,n?.sdk);const o=BE(e,s,r,t);return delete e.sdkProcessingMetadata,bt(o,[[{type:i},e]])}function zE(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=gt(e[0]),s=t?.getDsn(),i=t?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:Ht(s)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!Bi(Z(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);const l=a?p=>{const h=Z(p),m=a(h);return m||(uc(),h)}:Z,f=[];for(const p of u){const h=l(p);h&&f.push(DE(h))}return bt(o,f)}function GE(e){if(!w)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Z(e),{spanId:s}=e.spanContext(),i=fn(e),o=Ae(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=Z(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}_.log(`${c}
  ${u.join(`
  `)}`)}function qE(e){if(!w)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Z(e),{spanId:r}=e.spanContext(),i=Ae(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;_.log(o)}function eD(e,t,n,r=Qe()){const s=r&&Ae(r);s&&(w&&_.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Hh]:t,[Bh]:n}))}function Ad(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Bh],i=r[Hh];typeof s=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:s})}),t}const xd=1e3;let Ao=class{constructor(t={}){this._traceId=t.traceId||mt(),this._spanId=t.spanId||Nt(),this._startTime=t.startTimestamp||be(),this._links=t.links,this._attributes={},this.setAttributes({[Ee]:"manual",[Ue]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?yu:Zh}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=wn(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ft,"custom"),this}end(t){this._endTime||(this._endTime=wn(t),qE(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ue],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:nm(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ee],profile_id:this._attributes[hu],exclusive_time:this._attributes[mu],measurements:Ad(this._events),is_segment:this._isStandaloneSpan&&Ae(this)===this||void 0,segment_id:this._isStandaloneSpan?Ae(this).spanContext().spanId:void 0,links:tm(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){w&&_.log("[Tracing] Adding an event to span:",t);const s=Nd(n)?n:r||be(),i=Nd(n)?{}:n||{},o={name:t,time:wn(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=O();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ae(this)))return;if(this._isStandaloneSpan){this._sampled?YE(zE([this],t)):(w&&_.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Ui(this).scope||ne()).captureEvent(r)}_convertSpanToTransaction(){if(!Md(Z(this)))return;this._name||(w&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Ui(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const i=bi(this).filter(d=>d!==this&&!VE(d)).map(d=>Z(d)).filter(Md),o=this._attributes[ft];delete this._attributes[ac],i.forEach(d=>{delete d.data[ac]});const a={contexts:{trace:SE(this)},spans:i.length>xd?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,xd):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:gt(this)},request:r,...o&&{transaction_info:{source:o}}},c=Ad(this._events);return c&&Object.keys(c).length&&(w&&_.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Nd(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Md(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function VE(e){return e instanceof Ao&&e.isStandaloneSpan()}function YE(e){const t=O();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function xo(e,t,n=()=>{},r=()=>{}){let s;try{s=e()}catch(i){throw t(i),n(),i}return JE(s,t,n,r)}function JE(e,t,n,r){return Cr(e)?e.then(s=>(n(),r(s),s),s=>{throw t(s),n(),s}):(n(),r(e),e)}function KE(e,t,n){if(!Je(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const i=os(s);if(i===void 0)return w&&_.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return w&&_.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||w&&_.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const ji="__SENTRY_SUPPRESS_TRACING__";function Wn(e,t){const n=ks();if(n.startSpan)return n.startSpan(e,t);const r=Iu(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o?.clone();return at(a,()=>am(i)(()=>{const u=ne(),d=vu(u,i),f=e.onlyIfParent&&!d?new Ft:Tu({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return _t(u,f),xo(()=>t(f),()=>{const{status:p}=Z(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:K,message:"internal_error"})},()=>{f.end()})}))}function Xt(e,t){const n=ks();if(n.startSpanManual)return n.startSpanManual(e,t);const r=Iu(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o?.clone();return at(a,()=>am(i)(()=>{const u=ne(),d=vu(u,i),f=e.onlyIfParent&&!d?new Ft:Tu({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return _t(u,f),xo(()=>t(f,()=>f.end()),()=>{const{status:p}=Z(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:K,message:"internal_error"})})}))}function No(e){const t=ks();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Iu(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?o=>at(e.scope,o):s!==void 0?o=>Eu(s,o):o=>o())(()=>{const o=ne(),a=vu(o,s);return e.onlyIfParent&&!a?new Ft:Tu({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}const nD=(e,t)=>{const n=Bt(),r=dn(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:i}=e,o=O(),a=gu(i);return o&&!yE(o,a?.org_id)?QE(t):at(c=>{const u=Kh(s,i);return c.setPropagationContext(u),_t(c,void 0),t()})};function Eu(e,t){const n=ks();return n.withActiveSpan?n.withActiveSpan(e,t):at(r=>(_t(r,e||void 0),t(r)))}function XE(e){const t=ks();return t.suppressTracing?t.suppressTracing(e):at(n=>{n.setSDKProcessingMetadata({[ji]:!0});const r=e();return n.setSDKProcessingMetadata({[ji]:void 0}),r})}function QE(e){return at(t=>(t.setPropagationContext({traceId:mt(),sampleRand:At()}),w&&_.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Eu(null,e)))}function Tu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Je()){const o=new Ft;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...gt(o)};Ei(o,a)}return o}const s=Re();let i;if(e&&!n)i=ZE(e,r,t),rm(e,i);else if(e){const o=gt(e),{traceId:a,spanId:c}=e.spanContext(),u=fn(e);i=Od({traceId:a,parentSpanId:c,...t},r,u),Ei(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=Od({traceId:o,parentSpanId:c,...t},r,u),a&&Ei(i,a)}return GE(i),oE(i,r,s),i}function Iu(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=wn(e.startTime),delete r.startTime,r}return n}function ks(){const e=Bt();return dn(e)}function Od(e,t,n){const r=O(),s=r?.getOptions()||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[ji]?[!1]:KE(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:os(u.dsc?.sample_rate)},u.sampleRand),p=new Ao({...e,attributes:{[ft]:"custom",[pu]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(w&&_.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function ZE(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[ji]?!1:fn(e),o=i?new Ao({...n,parentSpanId:r,traceId:s,sampled:i}):new Ft({traceId:s});rm(e,o);const a=O();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function vu(e,t){if(t)return t;if(t===null)return;const n=hr(e);if(!n)return;const r=O();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ae(n):n}function am(e){return e!==void 0?t=>Eu(e,t):t=>t()}const Ti={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},eT="heartbeatFailed",tT="idleTimeout",nT="finalTimeout",rT="externalFinish";function cm(e,t={}){const n=new Map;let r=!1,s,i=rT,o=!t.disableAutoFinish;const a=[],{idleTimeout:c=Ti.idleTimeout,finalTimeout:u=Ti.finalTimeout,childSpanTimeout:d=Ti.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=O();if(!p||!Je()){const S=new Ft,R={sample_rate:"0",sampled:"false",...gt(S)};return Ei(S,R),S}const h=ne(),m=Qe(),g=sT(e);g.end=new Proxy(g.end,{apply(S,R,L){if(l&&l(g),R instanceof Ft)return;const[E,...A]=L,k=E||be(),x=wn(k),M=bi(g).filter(v=>v!==g),X=Z(g);if(!M.length||!f)return N(x),Reflect.apply(S,R,[x,...A]);const V=p.getOptions().ignoreSpans,ee=M?.reduce((v,z)=>{const se=Z(z);return!se.timestamp||V&&Bi(se,V)?v:v?Math.max(v,se.timestamp):se.timestamp},void 0),T=X.start_timestamp,W=Math.min(T?T+u/1e3:1/0,Math.max(T||-1/0,Math.min(x,ee||1/0)));return N(W),Reflect.apply(S,R,[W,...A])}});function y(){s&&(clearTimeout(s),s=void 0)}function b(S){y(),s=setTimeout(()=>{!r&&n.size===0&&o&&(i=tT,g.end(S))},c)}function $(S){s=setTimeout(()=>{!r&&o&&(i=eT,g.end(S))},d)}function C(S){y(),n.set(S,!0);const R=be();$(R+d/1e3)}function B(S){if(n.has(S)&&n.delete(S),n.size===0){const R=be();b(R+c/1e3)}}function N(S){r=!0,n.clear(),a.forEach(M=>M()),_t(h,m);const R=Z(g),{start_timestamp:L}=R;if(!L)return;R.data[is]||g.setAttribute(is,i);const A=R.status;(!A||A==="unknown")&&g.setStatus({code:Ro}),_.log(`[Tracing] Idle span "${R.op}" finished`);const k=bi(g).filter(M=>M!==g);let x=0;k.forEach(M=>{M.isRecording()&&(M.setStatus({code:K,message:"cancelled"}),M.end(S),w&&_.log("[Tracing] Cancelling span since span ended early",JSON.stringify(M,void 0,2)));const X=Z(M),{timestamp:V=0,start_timestamp:ee=0}=X,T=ee<=S,W=(u+c)/1e3,v=V-ee<=W;if(w){const z=JSON.stringify(M,void 0,2);T?v||_.log("[Tracing] Discarding span since it finished after idle span final timeout",z):_.log("[Tracing] Discarding span since it happened after idle span was finished",z)}(!v||!T)&&(vE(g,M),x++)}),x>0&&g.setAttribute("sentry.idle_span_discarded_spans",x)}return a.push(p.on("spanStart",S=>{if(r||S===g||Z(S).timestamp||S instanceof Ao&&S.isStandaloneSpan())return;bi(g).includes(S)&&C(S.spanContext().spanId)})),a.push(p.on("spanEnd",S=>{r||B(S.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",S=>{S===g&&(o=!0,b(),n.size&&$())})),t.disableAutoFinish||b(),setTimeout(()=>{r||(g.setStatus({code:K,message:"deadline_exceeded"}),i=nT,g.end())},u),g}function sT(e){const t=No(e);return _t(ne(),t),w&&_.log("[Tracing] Started span is an idle span"),t}const Ia=0,$d=1,Pd=2;function Mo(e){return new um(t=>{t(e)})}function wu(e){return new um((t,n)=>{n(e)})}let um=class fc{constructor(t){this._state=Ia,this._handlers=[],this._runExecutor(t)}then(t,n){return new fc((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new fc((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===Ia)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===$d&&n[1](this._value),this._state===Pd&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===Ia){if(Cr(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n($d,i)},s=i=>{n(Pd,i)};try{t(r,s)}catch(i){s(i)}}};function iT(e,t,n,r=0){try{const s=pc(t,n,e,r);return Cr(s)?s:Mo(s)}catch(s){return wu(s)}}function pc(e,t,n,r){const s=n[r];if(!e||!s)return e;const i=s({...e},t);return w&&i===null&&_.log(`Event processor "${s.id||"?"}" dropped event`),Cr(i)?i.then(o=>pc(o,t,n,r+1)):pc(i,t,n,r+1)}let mn,Ld,Dd,Gt;function lm(e){const t=U._sentryDebugIds,n=U._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],s=n?Object.keys(n):[];if(Gt&&r.length===Ld&&s.length===Dd)return Gt;Ld=r.length,Dd=s.length,Gt={},mn||(mn={});const i=(o,a)=>{for(const c of o){const u=a[c],d=mn?.[c];if(d&&Gt&&u)Gt[d[0]]=u,mn&&(mn[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const h=l[f]?.filename;if(h&&Gt&&mn){Gt[h]=u,mn[c]=[h,u];break}}}}};return t&&i(r,t),n&&i(s,n),Gt}function oT(e,t){const n=lm(e);if(!n)return[];const r=[];for(const s of t){const i=kb(s);i&&n[i]&&r.push({type:"sourcemap",code_file:s,debug_id:n[i]})}return r}function aT(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;cT(e,t),r&&dT(e,r),fT(e,n),uT(e,s),lT(e,i)}function Fd(e,t){const{extra:n,tags:r,attributes:s,user:i,contexts:o,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:h,span:m}=t;Ur(e,"extra",n),Ur(e,"tags",r),Ur(e,"attributes",s),Ur(e,"user",i),Ur(e,"contexts",o),e.sdkProcessingMetadata=ws(e.sdkProcessingMetadata,c,2),a&&(e.level=a),h&&(e.transactionName=h),m&&(e.span=m),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function Ur(e,t,n){e[t]=ws(e[t],n,1)}function ku(e,t){const n=Si().getScopeData();return e&&Fd(n,e.getScopeData()),t&&Fd(n,t.getScopeData()),n}function cT(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function uT(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function lT(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function dT(e,t){e.contexts={trace:em(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:gt(t),...e.sdkProcessingMetadata};const n=Ae(t),r=Z(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function fT(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function pT(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ve(),timestamp:t.timestamp||Hn()},u=n.integrations||e.integrations.map(g=>g.name);hT(c,e),gT(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&mT(c,e.stackParser);const d=ST(r,n.captureContext);n.mechanism&&Dt(c,n.mechanism);const l=s?s.getEventProcessors():[],f=ku(i,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),aT(c,f);const h=[...l,...f.eventProcessors];return iT(h,c,n).then(g=>(g&&_T(g),typeof o=="number"&&o>0?yT(g,o,a):g))}function hT(e,t){const{environment:n,release:r,dist:s,maxValueLength:i}=t;e.environment=e.environment||n||Co,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&i&&(o.url=ss(o.url,i)),i&&e.exception?.values?.forEach(a=>{a.value&&(a.value=ss(a.value,i))})}function mT(e,t){const n=lm(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function _T(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function gT(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function yT(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:tt(s.data,t,n)}}))},...e.user&&{user:tt(e.user,t,n)},...e.contexts&&{contexts:tt(e.contexts,t,n)},...e.extra&&{extra:tt(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=tt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:tt(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=tt(e.contexts.flags,3,n)),r}function ST(e,t){if(!t)return e;const n=e?e.clone():new An;return n.update(t),n}function bT(e){if(e)return ET(e)?{captureContext:e}:IT(e)?{captureContext:e}:e}function ET(e){return e instanceof An||typeof e=="function"}const TT=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function IT(e){return Object.keys(e).some(t=>TT.includes(t))}function ye(e,t){return ne().captureException(e,bT(t))}function vT(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return ne().captureMessage(e,n,r)}function Rs(e,t){return ne().captureEvent(e,t)}function rD(e,t){Re().setContext(e,t)}function sD(e){Re().setExtras(e)}function iD(e,t){Re().setExtra(e,t)}function oD(e){Re().setTags(e)}function aD(e,t){Re().setTag(e,t)}function cD(e){Re().setUser(e)}function wT(){return Re().lastEventId()}async function uD(e){const t=O();return t?t.flush(e):(w&&_.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function lD(e){const t=O();return t?t.close(e):(w&&_.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function dD(){return!!O()}function kT(){const e=O();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function fD(e){Re().addEventProcessor(e)}function Ud(e){const t=Re(),n=ne(),{userAgent:r}=U.navigator||{},s=jb({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&pr(i,{status:"exited"}),dm(),t.setSession(s),s}function dm(){const e=Re(),n=ne().getSession()||e.getSession();n&&zb(n),fm(),e.setSession()}function fm(){const e=Re(),t=O(),n=e.getSession();n&&t&&t.captureSession(n)}function Bd(e=!1){if(e){dm();return}fm()}const RT="7";function pm(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function CT(e){return`${pm(e)}${e.projectId}/envelope/`}function AT(e,t){const n={sentry_version:RT};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function hm(e,t,n){return t||`${CT(e)}?${AT(e,n)}`}function xT(e,t){const n=Yh(e);if(!n)return"";const r=`${pm(n)}embed/error-page/`;let s=`dsn=${Ht(n)}`;for(const i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){const o=t.user;if(!o)continue;o.name&&(s+=`&name=${encodeURIComponent(o.name)}`),o.email&&(s+=`&email=${encodeURIComponent(o.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${s}`}const Hd=[];function NT(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function MT(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return NT(r)}function OT(e,t){const n={};return t.forEach(r=>{r&&mm(e,r,n)}),n}function Wd(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function mm(e,t,n){if(n[t.name]){w&&_.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!Hd.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),Hd.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,i)=>r(s,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(s)}w&&_.log(`Integration installed: ${t.name}`)}function pD(e){const t=O();if(!t){w&&_.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function $T(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function PT(e,t){const{value:n,unit:r}=$T(e)?e:{value:e,unit:void 0},s=LT(n),i=r&&typeof r=="string"?{unit:r}:{};if(s)return{...s,...i};if(!t||t==="skip-undefined"&&n===void 0)return;let o="";try{o=JSON.stringify(n)??""}catch{}return{value:o,type:"string",...i}}function zi(e,t=!1){const n={};for(const[r,s]of Object.entries(e??{})){const i=PT(s,t);i&&(n[r]=i)}return n}function LT(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function _m(e,t){return t?at(t,()=>{const n=Qe(),r=n?em(n):Fh(t);return[n?gt(n):Su(e,t),r]}):[void 0,void 0]}const DT={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function FT(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function UT(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Ht(r)),bt(s,[FT(e)])}const BT=100;function dt(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function HT(e,t){const n=Cu(),r=gm(e);r===void 0?n.set(e,[t]):r.length>=BT?(Ru(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Gi(e,t=ne(),n=HT){const r=t?.getClient()??O();if(!r){w&&_.warn("No client available to capture log.");return}const{release:s,environment:i,enableLogs:o=!1,beforeSendLog:a}=r.getOptions();if(!o){w&&_.warn("logging option not enabled, log will not be captured.");return}const[,c]=_m(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=ku(Re(),t);dt(u,"user.id",d,!1),dt(u,"user.email",l,!1),dt(u,"user.name",f,!1),dt(u,"sentry.release",s),dt(u,"sentry.environment",i);const{name:h,version:m}=r.getSdkMetadata()?.sdk??{};dt(u,"sentry.sdk.name",h),dt(u,"sentry.sdk.version",m);const g=r.getIntegrationByName("Replay"),y=g?.getReplayId(!0);dt(u,"sentry.replay_id",y),y&&g?.getRecordingMode()==="buffer"&&dt(u,"sentry._internal.replay_is_buffering",!0);const b=e.message;if(wo(b)){const{__sentry_template_string__:A,__sentry_template_values__:k=[]}=b;k?.length&&(u["sentry.message.template"]=A),k.forEach((x,M)=>{u[`sentry.message.parameter.${M}`]=x})}const $=hr(t);dt(u,"sentry.trace.parent_span_id",$?.spanContext().spanId);const C={...e,attributes:u};r.emit("beforeCaptureLog",C);const B=a?Bn(()=>a(C)):C;if(!B){r.recordDroppedEvent("before_send","log_item",1),w&&_.warn("beforeSendLog returned null, log will not be captured.");return}const{level:N,message:S,attributes:R={},severityNumber:L}=B,E={timestamp:be(),level:N,body:S,trace_id:c?.trace_id,severity_number:L??DT[N],attributes:{...zi(p),...zi(R,!0)}};n(r,E),r.emit("afterCaptureLog",B)}function Ru(e,t){const n=t??gm(e)??[];if(n.length===0)return;const r=e.getOptions(),s=UT(n,r._metadata,r.tunnel,e.getDsn());Cu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function gm(e){return Cu().get(e)}function Cu(){return wr("clientToLogBufferMap",()=>new WeakMap)}function WT(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function jT(e,t,n,r){const s={};return t?.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Ht(r)),bt(s,[WT(e)])}const zT=1e3;function It(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function GT(e,t){const n=xu(),r=ym(e);r===void 0?n.set(e,[t]):r.length>=zT?(Au(e,r),n.set(e,[t])):n.set(e,[...r,t])}function qT(e,t,n){const{release:r,environment:s}=t.getOptions(),i={...e.attributes};It(i,"user.id",n.id,!1),It(i,"user.email",n.email,!1),It(i,"user.name",n.username,!1),It(i,"sentry.release",r),It(i,"sentry.environment",s);const{name:o,version:a}=t.getSdkMetadata()?.sdk??{};It(i,"sentry.sdk.name",o),It(i,"sentry.sdk.version",a);const c=t.getIntegrationByName("Replay"),u=c?.getReplayId(!0);return It(i,"sentry.replay_id",u),u&&c?.getRecordingMode()==="buffer"&&It(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function VT(e,t,n,r){const[,s]=_m(t,n),i=hr(n),o=i?i.spanContext().traceId:s?.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:be(),trace_id:o??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...zi(r),...zi(e.attributes,"skip-undefined")}}}function YT(e,t){const n=t?.scope??ne(),r=t?.captureSerializedMetric??GT,s=n?.getClient()??O();if(!s){w&&_.warn("No client available to capture metric.");return}const{_experiments:i,enableMetrics:o,beforeSendMetric:a}=s.getOptions();if(!(o??i?.enableMetrics??!0)){w&&_.warn("metrics option not enabled, metric will not be captured.");return}const{user:u,attributes:d}=ku(Re(),n),l=qT(e,s,u);s.emit("processMetric",l);const f=a||i?.beforeSendMetric,p=f?f(l):l;if(!p){w&&_.log("`beforeSendMetric` returned `null`, will not send metric.");return}const h=VT(p,s,n,d);w&&_.log("[Metric]",h),r(s,h),s.emit("afterCaptureMetric",p)}function Au(e,t){const n=t??ym(e)??[];if(n.length===0)return;const r=e.getOptions(),s=jT(n,r._metadata,r.tunnel,e.getDsn());xu().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(s)}function ym(e){return xu().get(e)}function xu(){return wr("clientToMetricBufferMap",()=>new WeakMap)}const Nu=Symbol.for("SentryBufferFullError");function Mu(e=100){const t=new Set;function n(){return t.size<e}function r(o){t.delete(o)}function s(o){if(!n())return wu(Nu);const a=o();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(o){if(!t.size)return Mo(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),o))];return Promise.race(c)}return{get $(){return Array.from(t)},add:s,drain:i}}const JT=60*1e3;function Sm(e,t=vs()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?JT:r-t}function KT(e,t){return e[t]||e.all||0}function XT(e,t,n=vs()){return KT(e,t)>n}function QT(e,{statusCode:t,headers:n},r=vs()){const s={...e},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+Sm(o,r):t===429&&(s.all=r+60*1e3);return s}const bm=64;function ZT(e,t,n=Mu(e.bufferSize||bm)){let r={};const s=o=>n.drain(o);function i(o){const a=[];if(xn(o,(l,f)=>{const p=Cd(f);XT(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=bt(o[0],a),u=l=>{if(dc(c,["client_report"])){w&&_.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}xn(c,(f,p)=>{e.recordDroppedEvent(l,Cd(p))})},d=()=>t({body:Wi(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&w&&_.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=QT(r,l),l),l=>{throw u("network_error"),w&&_.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===Nu)return w&&_.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:s}}function eI(e,t,n){const r=[{type:"client_report"},{timestamp:Hn(),discarded_events:e}];return bt(t?{dsn:t}:{},[r])}function Em(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function tI(e){const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:i,data:o,op:a}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:s,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[hu],exclusive_time:o?.[mu],measurements:e.measurements,is_segment:!0}}function nI(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[hu]:e.profile_id},...e.exclusive_time&&{[mu]:e.exclusive_time}}}},measurements:e.measurements}}const jd="Not capturing exception because it's already been captured.",zd="Discarded session because of missing or non-string release",Tm=Symbol.for("SentryInternalError"),Im=Symbol.for("SentryDoNotSendEventError"),rI=5e3;function Ii(e){return{message:e,[Tm]:!0}}function va(e){return{message:e,[Im]:!0}}function Gd(e){return!!e&&typeof e=="object"&&Tm in e}function qd(e){return!!e&&typeof e=="object"&&Im in e}function Vd(e,t,n,r,s){let i=0,o,a=!1;e.on(n,()=>{i=0,clearTimeout(o),a=!1}),e.on(t,c=>{i+=r(c),i>=8e5?s(e):a||(a=!0,o=setTimeout(()=>{s(e)},rI))}),e.on("flush",()=>{s(e)})}class sI{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Mu(t.transportOptions?.bufferSize??bm),t.dsn?this._dsn=Yh(t.dsn):w&&_.warn("No DSN provided, client will not send events."),this._dsn){const r=hm(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Vd(this,"afterCaptureLog","flushLogs",cI,Ru),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Vd(this,"afterCaptureMetric","flushMetrics",aI,Au)}captureException(t,n,r){const s=ve();if(bd(t))return w&&_.log(jd),s;const i={event_id:s,...n};return this._process(()=>this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r)).then(o=>o),"error"),i.event_id}captureMessage(t,n,r,s){const i={event_id:ve(),...r},o=wo(t)?t:String(t),a=Rr(t),c=a?this.eventFromMessage(o,n,i):this.eventFromException(t,i);return this._process(()=>c.then(u=>this._captureEvent(u,i,s)),a?"unknown":"error"),i.event_id}captureEvent(t,n,r){const s=ve();if(n?.originalException&&bd(n.originalException))return w&&_.log(jd),s;const i={event_id:s,...n},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope,u=Yd(t.type);return this._process(()=>this._captureEvent(t,i,a||r,c),u),i.event_id}captureSession(t){this.sendSession(t),pr(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),s=await n.flush(t);return r&&s}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];mm(this,t,this._integrations),n||Wd(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=jE(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=OE(r,FE(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",t,s))}sendSession(t){const{release:n,environment:r=Co}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!n){w&&_.warn(zd);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){w&&_.warn(zd);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=WE(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;w&&_.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,s=(...i)=>n(...i);return r.add(s),()=>{r.delete(s)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return w&&_.error("Error while sending envelope:",n),{}}return w&&_.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=OT(this,t),Wd(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",s=!1;const i=n.exception?.values;if(i){s=!0,r=!1;for(const c of i)if(c.mechanism?.handled===!1){r=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(pr(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),pT(i,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Fh(r),...a.contexts};const c=Su(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=ne(),s=Re()){return w&&hc(t)&&_.log(`Captured error event \`${Em(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(i=>i.event_id,i=>{w&&(qd(i)?_.log(i.message):Gd(i)?_.warn(i.message):_.warn(i))})}_processEvent(t,n,r,s){const i=this.getOptions(),{sampleRate:o}=i,a=vm(t),c=hc(t),d=`before send for type \`${t.type||"error"}\``,l=typeof o>"u"?void 0:os(o);if(c&&typeof l=="number"&&At()>l)return this.recordDroppedEvent("sample_rate","error"),wu(va(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=Yd(t.type);return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),va("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=oI(this,i,p,n);return iI(m,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){const y=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw va(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const g=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,y=p.spans?p.spans.length:0,b=g-y;b>0&&this.recordDroppedEvent("before_send","span",b)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const g="custom";p.transaction_info={...m,source:g}}return this.sendEvent(p,n),p}).then(null,p=>{throw qd(p)||Gd(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Ii(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===Nu&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,i]=n.split(":");return{reason:s,category:i,quantity:r}})}_flushOutcomes(){w&&_.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){w&&_.log("No outcomes to send");return}if(!this._dsn){w&&_.log("No dsn provided, will not send outcomes");return}w&&_.log("Sending outcomes:",t);const n=eI(t,this._options.tunnel&&Ht(this._dsn));this.sendEnvelope(n)}}function Yd(e){return e==="replay_event"?"replay":e||"error"}function iI(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Cr(e))return e.then(r=>{if(!it(r)&&r!==null)throw Ii(n);return r},r=>{throw Ii(`${t} rejected with ${r}`)});if(!it(e)&&e!==null)throw Ii(n);return e}function oI(e,t,n,r){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=t;let c=n;if(hc(c)&&s)return s(c,r);if(vm(c)){if(o||a){const u=tI(c);if(a?.length&&Bi(u,a))return null;if(o){const d=o(u);d?c=ws(n,nI(d)):uc()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a?.length&&Bi(p,a)){kE(l,p);continue}if(o){const h=o(p);h?d.push(h):(uc(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(i){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function hc(e){return e.type===void 0}function vm(e){return e.type==="transaction"}function aI(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+wm(e.attributes)}function cI(e){let t=0;return e.message&&(t+=e.message.length*2),t+wm(e.attributes)}function wm(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Jd(n[0]):Rr(n)?t+=Jd(n):t+=100}),t}function Jd(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function uI(e){return Ct(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function Kd(e){return uI(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function lI(e,t){t.debug===!0&&(w?_.enable():Bn(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ne().update(t.initialScope);const r=new e(t);return dI(r),r.init(),r}function dI(e){ne().setClient(e)}const wa=100,ka=5e3,fI=36e5;function pI(e){function t(...n){w&&_.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let i=ka,o;function a(l,f,p){return dc(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){o&&clearTimeout(o),o=setTimeout(async()=>{o=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof o!="number"&&o.unref&&o.unref()}function u(){o||(c(i),i=Math.min(i*2,fI))}async function d(l,f=!1){if(!f&&dc(l,["replay_event","replay_recording"]))return await s.push(l),c(wa),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const p=await r.send(l);let h=wa;if(p){if(p.headers?.["retry-after"])h=Sm(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])h=6e4;else if((p.statusCode||0)>=400)return p}return c(h),i=ka,p}catch(p){if(await a(l,p,i))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=ka,c(wa)),r.flush(l))}}}const Ra="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function km(e,t){let n;return xn(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function hI(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const i=km(s,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(s)}}}}function mI(e,t){return bt(t?{...e[0],dsn:t}:e[0],e[1])}function hD(e,t){return n=>{const r=e(n),s=new Map,i=t||(u=>{const d=u.getEvent();return d?.extra?.[Ra]&&Array.isArray(d.extra[Ra])?d.extra[Ra]:[]});function o(u,d){const l=d?`${u}:${d}`:u;let f=s.get(l);if(!f){const p=Gh(u);if(!p)return;const h=hm(p,n.tunnel);f=d?hI(e,d)({...n,url:h}):e({...n,url:h}),s.set(l,f)}return[u,f]}async function a(u){function d(h){const m=h?.length?h:["event"];return km(u,m)}const l=i({envelope:u,getEvent:d}).map(h=>typeof h=="string"?o(h,void 0):o(h.dsn,h.release)).filter(h=>!!h),f=l.length?l:[["",r]];return(await Promise.all(f.map(([h,m])=>m.send(mI(u,h)))))[0]}async function c(u){const d=[...s.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const _I="thismessage:/";function Ou(e){return"isRelative"in e}function $u(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?_I:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function gI(e){if(Ou(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function ar(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Rm(e){return e.split(/[?#]/,1)[0]}function Zt(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=e.includes(";base64,"),i=e.indexOf(",");let o="";if(t&&i!==-1){const a=e.slice(i+1);o=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${s?",base64":""}${o?`,${o}`:""}`}return e}function yI(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return bI(e,n)||SI(e,r)}function SI(e,t){return t?Xd(e)===Xd(t):!1}function bI(e,t){const n=$u(e);return!n||Ou(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Xd(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function EI(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const TI=EI;function II(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function vI(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:Qt})),version:Qt}),e._metadata=s}function Cm(e={}){const t=e.client||O();if(!kT()||!t)return{};const n=Bt(),r=dn(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||ne(),i=e.span||Qe(),o=i?bE(i):wI(s),a=i?gt(i):Su(t,s),c=zh(a);if(!Jh.test(o))return _.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":o,baggage:c};return e.propagateTraceparent&&(d.traceparent=i?EE(i):kI(s)),d}function wI(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Xh(t,r,n)}function kI(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Qh(t,r,n)}const RI=100;function cn(e,t){const n=O(),r=Re();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=RI}=n.getOptions();if(i<=0)return;const a={timestamp:Hn(),...e},c=s?Bn(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}let Qd;const CI="FunctionToString",Zd=new WeakMap,AI=(()=>({name:CI,setupOnce(){Qd=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=du(this),n=Zd.has(O())&&t!==void 0?t:this;return Qd.apply(n,e)}}catch{}},setup(e){Zd.set(e,!0)}})),xI=AI,NI=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],MI="EventFilters",OI=(e={})=>{let t;return{name:MI,setup(n){const r=n.getOptions();t=ef(e,r)},processEvent(n,r,s){if(!t){const i=s.getOptions();t=ef(e,i)}return PI(n,t)?null:n}}},$I=((e={})=>({...OI(e),name:"InboundFilters"}));function ef(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:NI],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function PI(e,t){if(e.type){if(e.type==="transaction"&&DI(e,t.ignoreTransactions))return w&&_.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Sn(e)}`),!0}else{if(LI(e,t.ignoreErrors))return w&&_.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Sn(e)}`),!0;if(HI(e))return w&&_.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Sn(e)}`),!0;if(FI(e,t.denyUrls))return w&&_.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Sn(e)}.
Url: ${qi(e)}`),!0;if(!UI(e,t.allowUrls))return w&&_.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Sn(e)}.
Url: ${qi(e)}`),!0}return!1}function LI(e,t){return t?.length?Em(e).some(n=>xt(n,t)):!1}function DI(e,t){if(!t?.length)return!1;const n=e.transaction;return n?xt(n,t):!1}function FI(e,t){if(!t?.length)return!1;const n=qi(e);return n?xt(n,t):!1}function UI(e,t){if(!t?.length)return!0;const n=qi(e);return n?xt(n,t):!0}function BI(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function qi(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?BI(n):null}catch{return w&&_.error(`Cannot extract url for event ${Sn(e)}`),null}}function HI(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function WI(e,t,n,r,s,i){if(!s.exception?.values||!i||!Lt(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=mc(e,t,r,i.originalException,n,s.exception.values,o,0))}function mc(e,t,n,r,s,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Lt(r[s],Error)){tf(o,a);const u=e(t,r[s]),d=c.length;nf(u,s,d,a),c=mc(e,t,n,r[s],s,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Lt(u,Error)){tf(o,a);const l=e(t,u),f=c.length;nf(l,`errors[${d}]`,f,a),c=mc(e,t,n,u,s,[l,...c],l,f)}}),c}function tf(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function nf(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Am=new Map,rf=new Set;function jI(e){if(U._sentryModuleMetadata)for(const t of Object.keys(U._sentryModuleMetadata)){const n=U._sentryModuleMetadata[t];if(rf.has(t))continue;rf.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){Am.set(s.filename,n);break}}}function zI(e,t){return jI(e),Am.get(t)}function xm(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;const s=zI(e,r.filename);s&&(r.module_metadata=s)})})}function Nm(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}const mD=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{xn(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(Nm(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;xm(n,t)})}});function Pu(e){const t="console";bs(t,e),Es(t,GI)}function GI(){"console"in U&&ou.forEach(function(e){e in U.console&&Ye(U.console,e,function(t){return Li[e]=t,function(...n){vn("console",{args:n,level:e}),Li[e]?.apply(U.console,n)}})})}function _c(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const qI="CaptureConsole",VI=((e={})=>{const t=e.levels||ou,n=e.handled??!0;return{name:qI,setup(r){"console"in U&&Pu(({args:s,level:i})=>{O()!==r||!t.includes(i)||YI(s,i,n)})}}}),_D=VI;function YI(e,t,n){const r=_c(t),s=new Error,i={level:_c(t),extra:{arguments:e}};at(o=>{if(o.addEventProcessor(u=>(u.logger="console",Dt(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){const u=`Assertion failed: ${Di(e.slice(1)," ")||"console.assert"}`;o.setExtra("arguments",e.slice(1)),o.captureMessage(u,r,{captureContext:i,syntheticException:s})}return}const a=e.find(u=>u instanceof Error);if(a){ye(a,i);return}const c=Di(e," ");o.captureMessage(c,r,{captureContext:i,syntheticException:s})})}const JI="Dedupe",KI=(()=>{let e;return{name:JI,processEvent(t){if(t.type)return t;try{if(QI(t,e))return w&&_.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),XI=KI;function QI(e,t){return t?!!(ZI(e,t)||ev(e,t)):!1}function ZI(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Om(e,t)||!Mm(e,t))}function ev(e,t){const n=sf(t),r=sf(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Om(e,t)||!Mm(e,t))}function Mm(e,t){let n=rc(e),r=rc(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],o=n[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Om(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function sf(e){return e.exception?.values?.[0]}const tv="ExtraErrorData",nv=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:tv,processEvent(r,s,i){const{maxValueLength:o}=i.getOptions();return rv(r,s,t,n,o)}}}),gD=nv;function rv(e,t={},n,r,s){if(!t.originalException||!Ct(t.originalException))return e;const i=t.originalException.name||t.originalException.constructor.name,o=$m(t.originalException,r,s);if(o){const a={...e.contexts},c=tt(o,n);return it(c)&&(Ge(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function $m(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;const o=e[i];s[i]=Ct(o)||typeof o=="string"?n?ss(`${o}`,n):`${o}`:o}if(t&&e.cause!==void 0)if(Ct(e.cause)){const i=e.cause.name||e.cause.constructor.name;s.cause={[i]:$m(e.cause,!1,n)}}else s.cause=e.cause;if(typeof e.toJSON=="function"){const i=e.toJSON();for(const o of Object.keys(i)){const a=i[o];s[o]=Ct(a)?a.toString():a}}return s}catch(r){w&&_.error("Unable to extract extra data from the Error object:",r)}return null}function sv(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const iv=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function ov(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=iv.exec(t);return n?n.slice(1):[]}function of(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=sv(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function af(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function av(e,t){e=of(e).slice(1),t=of(t).slice(1);const n=af(e.split("/")),r=af(t.split("/")),s=Math.min(n.length,r.length);let i=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){i=a;break}let o=[];for(let a=i;a<n.length;a++)o.push("..");return o=o.concat(r.slice(i)),o.join("/")}function cv(e,t){return ov(e)[2]||""}const uv="RewriteFrames",yD=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in U&&!!U.window,s=e.iteratee||lv({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:o(c.stacktrace)}}))}}}catch{return a}}function o(a){return{...a,frames:a?.frames?.map(c=>s(c))}}return{name:uv,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function lv({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){const o=r.filename;o.indexOf(t)===0&&(r.filename=o.replace(t,n))}}else if(s||i){const o=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?av(t,o):cv(o);r.filename=`${n}${a}`}return r}}const dv=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],fv=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],pv={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Pm=["select","insert","upsert","update","delete"];function Oo(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function $o(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function hv(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function mv(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n?.startsWith("fts")?s="textSearch":n?.startsWith("plfts")?s="textSearch[plain]":n?.startsWith("phfts")?s="textSearch[phrase]":n?.startsWith("wfts")?s="textSearch[websearch]":s=n&&pv[n]||"filter",`${s}(${e}, ${r.join(".")})`}function cf(e,t=!1){return new Proxy(e,{apply(n,r,s){return Wn({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[Ee]:"auto.db.supabase",[Ue]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,s).then(o=>(o&&typeof o=="object"&&"error"in o&&o.error?(i.setStatus({code:K}),ye(o.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:Ro}),i.end(),o)).catch(o=>{throw i.setStatus({code:K}),i.end(),ye(o,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),o}).then(...s))}})}function _v(e){const t=e.auth;if(!(!t||$o(e.auth))){for(const n of dv){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=cf(r))}for(const n of fv){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=cf(r,!0))}Oo(e.auth)}}function gv(e){$o(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),i=s.constructor;return Sv(i),s}}),Oo(e.prototype.from))}function yv(e){$o(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){const s=Pm,i=n,o=hv(i.method,i.headers);if(!s.includes(o)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);const a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[p,h]of i.url.searchParams.entries())u.push(mv(p,h));const d=Object.create(null);if(it(i.body))for(const[p,h]of Object.entries(i.body))d[p]=h;const l=`${o==="select"?"":`${o}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":o,[Ee]:"auto.db.supabase",[Ue]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),Wn({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(h=>{if(p&&(h&&typeof h=="object"&&"status"in h&&Fi(p,h.status||500),p.end()),h.error){const y=new Error(h.error.message);h.error.code&&(y.code=h.error.code),h.error.details&&(y.details=h.error.details);const b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),ye(y,$=>($.addEventProcessor(C=>(Dt(C,{handled:!1,type:"auto.db.supabase.postgres"}),C)),$.setContext("supabase",b),$))}const m={type:"supabase",category:`db.${o}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(m.data=g),cn(m),h},h=>{throw p&&(Fi(p,500),p.end()),h}).then(...r))}}),Oo(e.prototype.then))}function Sv(e){for(const t of Pm)$o(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const i=Reflect.apply(n,r,s),o=i.constructor;return w&&_.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),yv(o),i}}),Oo(e.prototype[t]))}const bv=e=>{if(!e){w&&_.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;gv(t),_v(e)},Ev="Supabase",Tv=(e=>({setupOnce(){bv(e)},name:Ev})),SD=e=>Tv(e.supabaseClient),Iv=10,vv="ZodErrors";function wv(e){return Ct(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function kv(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Rv(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function Cv(e){const t=new Set;for(const r of e.issues){const s=Rv(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${ss(n.join(", "),100)}`}function Av(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!wv(r.originalException)||r.originalException.issues.length===0)return n;try{const i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(kv);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:Cv(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?`${s.name}: ${s.message}
${s.stack}`:"unknown"}}}}}const xv=((e={})=>{const t=e.limit??Iv;return{name:vv,processEvent(n,r){return Av(t,e.saveZodIssuesAsAttachment,n,r)}}}),bD=xv,ED=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{xn(n,(r,s)=>{if(s==="event"){const i=Array.isArray(r)?r[1]:void 0;i&&(Nm(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;xm(r,n)})},processEvent(t){const n=Mv(t,e.ignoreSentryInternalFrames);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(o=>e.filterKeys.includes(o)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function Nv(e,t){if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes($v))return!1;if(e.pre_context){const n=e.pre_context.length;for(let r=0;r<n;r++)if(e.pre_context[r]?.includes(Ov))return!0}return!1}function Mv(e,t){const n=rc(e);if(n)return n.filter((r,s)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!Nv(r,s)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(uf)).map(s=>s.slice(uf.length)):[])}const uf="_sentryBundlerPluginAppKey:",Ov="Attempt to invoke user-land function",$v="fn.apply(this, wrappedArguments)",Pv=100,Lv=10,Xs="flag.evaluation.";function Ar(e){const n=ne().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function Nn(e,t,n=Pv){const r=ne().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;Dv(s,e,t,n)}function Dv(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){w&&_.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(i=>i.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function Mn(e,t,n=Lv){if(typeof t!="boolean")return;const r=Qe();if(!r)return;const s=Z(r).data;if(`${Xs}${e}`in s){r.setAttribute(`${Xs}${e}`,t);return}Object.keys(s).filter(o=>o.startsWith(Xs)).length<n&&r.setAttribute(`${Xs}${e}`,t)}const TD=()=>({name:"FeatureFlags",processEvent(e,t,n){return Ar(e)},addFeatureFlag(e,t){Nn(e,t),Mn(e,t)}}),Fv=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Ye(t,"isOn",lf),typeof t.getFeatureValue=="function"&&Ye(t,"getFeatureValue",lf)},processEvent(t,n,r){return Ar(t)}});function lf(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(Nn(n,r),Mn(n,r)),r}}function Uv(e,t,n,r,s){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,a=Je()&&t(o);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(Wv(h,e),Bv(h,e,s),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},d=!!Qe(),l=a&&d?No(zv(o,i,c)):new Ft;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h={...e.args[1]||{}},m=Hv(p,h,Je()&&d?l:void 0,u);m&&(e.args[1]=h,h.headers=m)}const f=O();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function Bv(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function Hv(e,t,n,r){const s=Cm({span:n,propagateTraceparent:r}),i=s["sentry-trace"],o=s.baggage,a=s.traceparent;if(!i)return;const c=t.headers||(uu(e)?e.headers:void 0);if(c)if(jv(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),o){const d=u.get("baggage");d?Qs(d)||u.set("baggage",`${d},${o}`):u.set("baggage",o)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&Qs(l[1]));return o&&!d&&u.push(["baggage",o]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(m=>Qs(m)):Qs(l));o&&!p&&f.push(o);const h={...c,"sentry-trace":u??i,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...s}}function Wv(e,t){if(t.response){Fi(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:K,message:"internal_error"});e.end()}function Qs(e){return e.split(",").some(t=>t.trim().startsWith(_u))}function jv(e){return typeof Headers<"u"&&Lt(e,Headers)}function zv(e,t,n){if(e.startsWith("data:")){const i=Zt(e);return{name:`${t} ${i}`,attributes:df(e,void 0,t,n)}}const r=$u(e),s=r?gI(r):e;return{name:`${t} ${s}`,attributes:df(e,r,t,n)}}function df(e,t,n,r){const s={url:Zt(e),type:"fetch","http.method":n,[Ee]:r,[Ue]:"http.client"};return t&&(Ou(t)||(s["http.url"]=Zt(t.href),s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function ID(e,t={},n=ne()){const{message:r,name:s,email:i,url:o,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:s,message:r,url:o,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||O();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function xr(e,t,n,r,s){Gi({level:e,message:t,attributes:n,severityNumber:s},r)}function Gv(e,t,{scope:n}={}){xr("trace",e,t,n)}function qv(e,t,{scope:n}={}){xr("debug",e,t,n)}function Vv(e,t,{scope:n}={}){xr("info",e,t,n)}function Yv(e,t,{scope:n}={}){xr("warn",e,t,n)}function Jv(e,t,{scope:n}={}){xr("error",e,t,n)}function Kv(e,t,{scope:n}={}){xr("fatal",e,t,n)}const vD=Object.freeze(Object.defineProperty({__proto__:null,debug:qv,error:Jv,fatal:Kv,fmt:TI,info:Vv,trace:Gv,warn:Yv},Symbol.toStringTag,{value:"Module"}));function gc(e,t,n){return"util"in U&&typeof U.util.format=="function"?U.util.format(...e):Xv(e,t,n)}function Xv(e,t,n){return e.map(r=>Rr(r)?String(r):JSON.stringify(tt(r,t,n))).join(" ")}function Qv(e){return/%[sdifocO]/.test(e)}function Zv(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((s,i)=>{n[`sentry.message.parameter.${i}`]=s}),n}const e0="ConsoleLogs",ff={[Ee]:"auto.log.console"},t0=((e={})=>{const t=e.levels||ou;return{name:e0,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){w&&_.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Pu(({args:o,level:a})=>{if(O()!==n||!t.includes(a))return;const c=o[0],u=o.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${gc(u,s,i)}`:"Assertion failed";Gi({level:"error",message:p,attributes:ff})}return}const d=a==="log",l=o.length>1&&typeof o[0]=="string"&&!Qv(o[0]),f={...ff,...l?Zv(c,u):{}};Gi({level:d?"info":a,message:gc(o,s,i),severityNumber:d?10:void 0,attributes:f})})}}}),wD=t0;function Lu(e,t,n,r){YT({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function n0(e,t=1,n){Lu("counter",e,t,n)}function r0(e,t,n){Lu("gauge",e,t,n)}function s0(e,t,n){Lu("distribution",e,t,n)}const kD=Object.freeze(Object.defineProperty({__proto__:null,count:n0,distribution:s0,gauge:r0},Symbol.toStringTag,{value:"Module"})),i0=["trace","debug","info","warn","error","fatal"];function RD(e={}){const t=new Set(e.levels??i0),n=e.client;return{log(r){const{type:s,level:i,message:o,args:a,tag:c,date:u,...d}=r,l=n||O();if(!l)return;const f=c0(s,i);if(!t.has(f))return;const{normalizeDepth:p=3,normalizeMaxBreadth:h=1e3}=l.getOptions(),m=[];o&&m.push(o),a&&a.length>0&&m.push(gc(a,p,h));const g=m.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),s&&(d["consola.type"]=s),i!=null&&typeof i=="number"&&(d["consola.level"]=i),Gi({level:f,message:g,attributes:d})}}}const o0={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},a0={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function c0(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=o0[e];if(n)return n}if(typeof t=="number"){const n=a0[t];if(n)return n}return"info"}const u0="gen_ai.prompt",Po="gen_ai.system",Be="gen_ai.request.model",Du="gen_ai.request.stream",Lo="gen_ai.request.temperature",Fu="gen_ai.request.max_tokens",Do="gen_ai.request.frequency_penalty",Uu="gen_ai.request.presence_penalty",Fo="gen_ai.request.top_p",Lm="gen_ai.request.top_k",l0="gen_ai.request.encoding_format",d0="gen_ai.request.dimensions",pn="gen_ai.response.finish_reasons",Wt="gen_ai.response.model",jn="gen_ai.response.id",f0="gen_ai.response.stop_reason",On="gen_ai.usage.input_tokens",$n="gen_ai.usage.output_tokens",Pn="gen_ai.usage.total_tokens",un="gen_ai.operation.name",Nr="gen_ai.request.messages.original_length",Mr="gen_ai.request.messages",Ke="gen_ai.response.text",Uo="gen_ai.request.available_tools",Bo="gen_ai.response.streaming",Et="gen_ai.response.tool_calls",Dm="gen_ai.agent.name",p0="gen_ai.pipeline.name",Bu="gen_ai.conversation.id",h0="gen_ai.usage.cache_creation_input_tokens",m0="gen_ai.usage.cache_read_input_tokens",_0="gen_ai.invoke_agent",Fm="openai.response.id",Um="openai.response.model",Bm="openai.response.timestamp",g0="openai.usage.completion_tokens",y0="openai.usage.prompt_tokens",Zs={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings",CONVERSATIONS:"conversations"},pf="anthropic.response.timestamp",Hm=2e4,Vi=e=>new TextEncoder().encode(e).length,Yi=e=>Vi(JSON.stringify(e));function Hu(e,t){if(Vi(e)<=t)return e;let n=0,r=e.length,s="";for(;n<=r;){const i=Math.floor((n+r)/2),o=e.slice(0,i);Vi(o)<=t?(s=o,n=i+1):r=i-1}return s}function S0(e){return typeof e=="string"?e:"text"in e?e.text:""}function hf(e,t){return typeof e=="string"?t:{...e,text:t}}function b0(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function E0(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function Yr(e){return!e||typeof e!="object"?!1:T0(e)||Wm(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function T0(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&Yr(e.source)}function Wm(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function jm(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function I0(e,t){const n={...e,content:""},r=Yi(n),s=t-r;if(s<=0)return[];const i=Hu(e.content,s);return[{...e,content:i}]}function v0(e,t){const{parts:n}=e,r=n.map(a=>hf(a,"")),s=Yi({...e,parts:r});let i=t-s;if(i<=0)return[];const o=[];for(const a of n){const c=S0(a),u=Vi(c);if(u<=i)o.push(a),i-=u;else if(o.length===0){const d=Hu(c,i);d&&o.push(hf(a,d));break}else break}return o.length<=0?[]:[{...e,parts:o}]}function w0(e,t){return!e||typeof e!="object"?[]:b0(e)?I0(e,t):jm(e)?v0(e,t):[]}const mf="[Filtered]",k0=["image_url","data","content","b64_json","result","uri"];function vi(e){const t={...e};Yr(t.source)&&(t.source=vi(t.source)),Wm(e)&&(t.inlineData={...e.inlineData,data:mf});for(const n of k0)typeof t[n]=="string"&&(t[n]=mf);return t}function yc(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(E0(n)?r={...n,content:yc(n.content)}:"content"in n&&Yr(n.content)&&(r={...n,content:vi(n.content)}),jm(n)&&(r={...r??n,parts:yc(n.parts)}),Yr(r)?r=vi(r):Yr(n)&&(r=vi(n))),r??n})}function R0(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=yc(e);if(Yi(n)<=t)return n;const s=n.map(Yi);let i=0,o=n.length;for(let a=n.length-1;a>=0;a--){const c=s[a];if(c&&i+c>t)break;c&&(i+=c),o=a}if(o===n.length){const a=n[n.length-1];return w0(a,t)}return n.slice(o)}function Ho(e){return R0(e,Hm)}function C0(e){return Hu(e,Hm)}function Cs(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Ji(e){return`gen_ai.${Cs(e)}`}function zm(e,t){return e?`${e}.${t}`:t}function Wu(e,t,n,r,s){if(t!==void 0&&e.setAttributes({[On]:t}),n!==void 0&&e.setAttributes({[$n]:n}),t!==void 0||n!==void 0||r!==void 0||s!==void 0){const i=(t??0)+(n??0)+(r??0)+(s??0);e.setAttributes({[Pn]:i})}}function Gm(e){if(typeof e=="string")return C0(e);if(Array.isArray(e)){const t=Ho(e);return JSON.stringify(t)}return JSON.stringify(e)}const A0=["responses.create","chat.completions.create","embeddings.create","conversations.create"],x0=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],N0=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...x0];function ju(e){return e.includes("chat.completions")?Zs.CHAT:e.includes("responses")?Zs.RESPONSES:e.includes("embeddings")?Zs.EMBEDDINGS:e.includes("conversations")?Zs.CONVERSATIONS:e.split(".").pop()||"unknown"}function _f(e){return`gen_ai.${ju(e)}`}function M0(e){return A0.includes(e)}function O0(e,t){return e?`${e}.${t}`:t}function $0(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function P0(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function L0(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function D0(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function F0(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function U0(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function B0(e,t,n){if(zu(e,t.id,t.model,t.created),t.usage&&Wo(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(s=>s.finish_reason).filter(s=>s!==null);if(r.length>0&&e.setAttributes({[pn]:JSON.stringify(r)}),n){const s=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();s.length>0&&e.setAttributes({[Et]:JSON.stringify(s)})}}}function H0(e,t,n){if(zu(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[pn]:JSON.stringify([t.status])}),t.usage&&Wo(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const s=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");s.length>0&&e.setAttributes({[Et]:JSON.stringify(s)})}}}function W0(e,t){e.setAttributes({[Um]:t.model,[Wt]:t.model}),t.usage&&Wo(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function j0(e,t){const{id:n,created_at:r}=t;e.setAttributes({[Fm]:n,[jn]:n,[Bu]:n}),r&&e.setAttributes({[Bm]:new Date(r*1e3).toISOString()})}function Wo(e,t,n,r){t!==void 0&&e.setAttributes({[y0]:t,[On]:t}),n!==void 0&&e.setAttributes({[g0]:n,[$n]:n}),r!==void 0&&e.setAttributes({[Pn]:r})}function zu(e,t,n,r){e.setAttributes({[Fm]:t,[jn]:t}),e.setAttributes({[Um]:n,[Wt]:n}),e.setAttributes({[Bm]:new Date(r*1e3).toISOString()})}function z0(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function G0(e){const t={[Be]:e.model??"unknown"};"temperature"in e&&(t[Lo]=e.temperature),"top_p"in e&&(t[Fo]=e.top_p),"frequency_penalty"in e&&(t[Do]=e.frequency_penalty),"presence_penalty"in e&&(t[Uu]=e.presence_penalty),"stream"in e&&(t[Du]=e.stream),"encoding_format"in e&&(t[l0]=e.encoding_format),"dimensions"in e&&(t[d0]=e.dimensions);const n=z0(e);return n&&(t[Bu]=n),t}function q0(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const s=t.chatCompletionToolCalls[r];n.function.arguments&&s?.function&&(s.function.arguments+=n.function.arguments)}}}function V0(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&q0(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function Y0(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:K,message:"internal_error"}),ye(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const s=e;if(!N0.includes(s.type)){t.eventTypes.push(s.type);return}if(n&&(s.type==="response.output_item.done"&&"item"in s&&t.responsesApiToolCalls.push(s.item),s.type==="response.output_text.delta"&&"delta"in s&&s.delta)){t.responseTexts.push(s.delta);return}if("response"in s){const{response:i}=s;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*J0(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const s of e)U0(s)?V0(s,r,n):F0(s)&&Y0(s,r,n,t),yield s}finally{zu(t,r.responseId,r.responseModel,r.responseTimestamp),Wo(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Bo]:!0}),r.finishReasons.length&&t.setAttributes({[pn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Ke]:r.responseTexts.join("")});const i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[Et]:JSON.stringify(i)}),t.end()}}function K0(e){const t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],s=[...t,...r];return s.length>0?JSON.stringify(s):void 0}function X0(e,t){const n={[Po]:"openai",[un]:ju(t),[Ee]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0],s=K0(r);s&&(n[Uo]=s),Object.assign(n,G0(r))}else n[Be]="unknown";return n}function Q0(e,t,n){if(!t||typeof t!="object")return;const r=t;if($0(r)){if(B0(e,r,n),n&&r.choices?.length){const s=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Ke]:JSON.stringify(s)})}}else P0(r)?(H0(e,r,n),n&&r.output_text&&e.setAttributes({[Ke]:r.output_text})):L0(r)?W0(e,r):D0(r)&&j0(e,r)}function gf(e,t){const n="input"in t?t.input:"messages"in t?t.messages:void 0,r=Array.isArray(n)?n.length:void 0;if(n&&r!==0){const s=Gm(n);e.setAttribute(Mr,s),r&&e.setAttribute(Nr,r)}}function Z0(e,t,n,r){return async function(...i){const o=X0(i,t),a=o[Be]||"unknown",c=ju(t),u=i[0];return u&&typeof u=="object"&&u.stream===!0?Xt({name:`${c} ${a} stream-response`,op:_f(t),attributes:o},async l=>{try{r.recordInputs&&u&&gf(l,u);const f=await e.apply(n,i);return J0(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:K,message:"internal_error"}),ye(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):Wn({name:`${c} ${a}`,op:_f(t),attributes:o},async l=>{try{r.recordInputs&&u&&gf(l,u);const f=await e.apply(n,i);return Q0(l,f,r.recordOutputs),f}catch(f){throw ye(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function qm(e,t="",n){return new Proxy(e,{get(r,s){const i=r[s],o=O0(t,String(s));return typeof i=="function"&&M0(o)?Z0(i,o,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?qm(i,o,n):i}})}function CD(e,t){const n=!!O()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return qm(e,"",r)}function ew(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:K,message:e.error?.type??"internal_error"}),ye(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function tw(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function nw(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function rw(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function sw(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let s;try{s=r?JSON.parse(r):{}}catch{s={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:s}),delete t.activeToolBlocks[e.index]}function Vm(e,t,n,r){!(e&&typeof e=="object")||ew(e,r)||(tw(e,t),nw(e,t),rw(e,t,n),sw(e,t))}function iw(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[jn]:e.responseId}),e.responseModel&&t.setAttributes({[Wt]:e.responseModel}),Wu(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Bo]:!0}),e.finishReasons.length>0&&t.setAttributes({[pn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Ke]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[Et]:JSON.stringify(e.toolCalls)}),t.end())}async function*ow(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const s of e)Vm(s,r,n,t),yield s}finally{r.responseId&&t.setAttributes({[jn]:r.responseId}),r.responseModel&&t.setAttributes({[Wt]:r.responseModel}),Wu(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Bo]:!0}),r.finishReasons.length>0&&t.setAttributes({[pn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Ke]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[Et]:JSON.stringify(r.toolCalls)}),t.end()}}function aw(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",s=>{Vm(s,r,n,t)}),e.on("message",()=>{iw(r,t,n)}),e.on("error",s=>{ye(s,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:K,message:"stream_error"}),t.end())}),e}const cw=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function uw(e){return cw.includes(e)}function lw(e,t){const n=Array.isArray(t)?t.length:void 0;n!==0&&e.setAttributes({[Mr]:Gm(t),[Nr]:n})}function dw(e,t){t.error&&(e.setStatus({code:K,message:t.error.type||"internal_error"}),ye(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function fw(e){const{system:t,messages:n,input:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],i=Array.isArray(r)?r:r!=null?[r]:void 0,o=Array.isArray(n)?n:n!=null?[n]:[],a=i??o;return[...s,...a]}function pw(e,t){const n={[Po]:"anthropic",[un]:Cs(t),[Ee]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Uo]=JSON.stringify(r.tools)),n[Be]=r.model??"unknown","temperature"in r&&(n[Lo]=r.temperature),"top_p"in r&&(n[Fo]=r.top_p),"stream"in r&&(n[Du]=r.stream),"top_k"in r&&(n[Lm]=r.top_k),"frequency_penalty"in r&&(n[Do]=r.frequency_penalty),"max_tokens"in r&&(n[Fu]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[Be]=e[0]:n[Be]="unknown";return n}function Sc(e,t){const n=fw(t);lw(e,n),"prompt"in t&&e.setAttributes({[u0]:JSON.stringify(t.prompt)})}function hw(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Ke]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[Et]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Ke]:t.completion}),"input_tokens"in t&&e.setAttributes({[Ke]:JSON.stringify(t.input_tokens)})}function mw(e,t){"id"in t&&"model"in t&&(e.setAttributes({[jn]:t.id,[Wt]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[pf]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[pf]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Wu(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function _w(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){dw(e,t);return}n&&hw(e,t),mw(e,t)}}function yf(e,t,n){throw ye(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:K,message:"internal_error"}),t.end()),e}function gw(e,t,n,r,s,i,o,a,c,u,d){const l=s[Be]??"unknown",f={name:`${i} ${l} stream-response`,op:Ji(o),attributes:s};return u&&!d?Xt(f,async p=>{try{c.recordInputs&&a&&Sc(p,a);const h=await e.apply(n,r);return ow(h,p,c.recordOutputs??!1)}catch(h){return yf(h,p,o)}}):Xt(f,p=>{try{c.recordInputs&&a&&Sc(p,a);const h=t.apply(n,r);return aw(h,p,c.recordOutputs??!1)}catch(h){return yf(h,p,o)}})}function yw(e,t,n,r){return new Proxy(e,{apply(s,i,o){const a=pw(o,t),c=a[Be]??"unknown",u=Cs(t),d=typeof o[0]=="object"?o[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?gw(e,s,n,o,a,u,t,d,r,l,f):Wn({name:`${u} ${c}`,op:Ji(t),attributes:a},p=>(r.recordInputs&&d&&Sc(p,d),xo(()=>s.apply(n,o),h=>{ye(h,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},h=>_w(p,h,r.recordOutputs))))}})}function Ym(e,t="",n){return new Proxy(e,{get(r,s){const i=r[s],o=zm(t,String(s));return typeof i=="function"&&uw(o)?yw(i,o,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?Ym(i,o,n):i}})}function AD(e,t){const n=!!O()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return Ym(e,"",r)}const Sf=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Sw="google_genai",Jm="chats.create",bw="chat";function Ew(e,t){const n=e?.promptFeedback;if(n?.blockReason){const r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:K,message:`Content blocked: ${r}`}),ye(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function Tw(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function Iw(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(const s of r?.content?.parts??[])n&&s.text&&t.responseTexts.push(s.text),s.functionCall&&t.toolCalls.push({type:"function",id:s.functionCall.id,name:s.functionCall.name,arguments:s.functionCall.args})}}function vw(e,t,n,r){!e||Ew(e,r)||(Tw(e,t),Iw(e,t,n))}async function*ww(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const s of e)vw(s,r,n,t),yield s}finally{const s={[Bo]:!0};r.responseId&&(s[jn]=r.responseId),r.responseModel&&(s[Wt]=r.responseModel),r.promptTokens!==void 0&&(s[On]=r.promptTokens),r.completionTokens!==void 0&&(s[$n]=r.completionTokens),r.totalTokens!==void 0&&(s[Pn]=r.totalTokens),r.finishReasons.length&&(s[pn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(s[Ke]=r.responseTexts.join("")),n&&r.toolCalls.length&&(s[Et]=JSON.stringify(r.toolCalls)),t.setAttributes(s),t.end()}}function kw(e){if(Sf.includes(e))return!0;const t=e.split(".").pop();return Sf.includes(t)}function Rw(e){return e.includes("Stream")}function zr(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>zr(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function bf(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Cw(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Lo]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Fo]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Lm]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Fu]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Do]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Uu]=e.presencePenalty),t}function Aw(e,t,n){const r={[Po]:Sw,[un]:Cs(e),[Ee]:"auto.ai.google_genai"};if(t){if(r[Be]=bf(t,n),"config"in t&&typeof t.config=="object"&&t.config){const s=t.config;if(Object.assign(r,Cw(s)),"tools"in s&&Array.isArray(s.tools)){const i=s.tools.flatMap(o=>o.functionDeclarations);r[Uo]=JSON.stringify(i)}}}else r[Be]=bf({},n);return r}function Ef(e,t){const n=[];"config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...zr(t.config.systemInstruction,"system")),"history"in t&&n.push(...zr(t.history,"user")),"contents"in t&&n.push(...zr(t.contents,"user")),"message"in t&&n.push(...zr(t.message,"user")),Array.isArray(n)&&n.length&&e.setAttributes({[Nr]:n.length,[Mr]:JSON.stringify(Ho(n))})}function xw(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Wt,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[On]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[$n]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Pn]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(s=>s.content?.parts&&Array.isArray(s.content.parts)?s.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(s=>s.length>0);r.length>0&&e.setAttributes({[Ke]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[Et]:JSON.stringify(r)})}}}function Tf(e,t,n,r){const s=t===Jm;return new Proxy(e,{apply(i,o,a){const c=a[0],u=Aw(t,c,n),d=u[Be]??"unknown",l=Cs(t);return Rw(t)?Xt({name:`${l} ${d} stream-response`,op:Ji(t),attributes:u},async f=>{try{r.recordInputs&&c&&Ef(f,c);const p=await i.apply(n,a);return ww(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:K,message:"internal_error"}),ye(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):Wn({name:s?`${l} ${d} create`:`${l} ${d}`,op:Ji(t),attributes:u},f=>(r.recordInputs&&c&&Ef(f,c),xo(()=>i.apply(n,a),p=>{ye(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{s||xw(f,p,r.recordOutputs)})))}})}function bc(e,t="",n){return new Proxy(e,{get:(r,s,i)=>{const o=Reflect.get(r,s,i),a=zm(t,String(s));if(typeof o=="function"&&kw(a)){if(a===Jm){const c=Tf(o,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?bc(l,bw,n):l}}return Tf(o,a,r,n)}return typeof o=="function"?o.bind(r):o&&typeof o=="object"?bc(o,a,n):o}})}function xD(e,t){const n=!!O()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return bc(e,"",r)}const Gr="auto.ai.langchain",Nw={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},st=(e,t,n)=>{n!=null&&(e[t]=n)},We=(e,t,n)=>{const r=Number(n);Number.isNaN(r)||(e[t]=r)};function Fe(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function Br(e){const t=e.toLowerCase();return Nw[t]??t}function If(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function vf(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Gu(e){return e.map(t=>{const n=t._getType;if(typeof n=="function"){const s=n.call(t);return{role:Br(s),content:Fe(t.content)}}const r=t.constructor?.name;if(r)return{role:Br(If(r)),content:Fe(t.content)};if(t.type){const s=String(t.type).toLowerCase();return{role:Br(s),content:Fe(t.content)}}if(t.role)return{role:Br(String(t.role)),content:Fe(t.content)};if(t.lc===1&&t.kwargs){const s=t.id,i=Array.isArray(s)&&s.length>0?s[s.length-1]:"",o=typeof i=="string"?If(i):"user";return{role:Br(o),content:Fe(t.kwargs?.content)}}return{role:"user",content:Fe(t.content)}})}function Mw(e,t,n){const r={},s="kwargs"in e?e.kwargs:void 0,i=t?.temperature??n?.ls_temperature??s?.temperature;We(r,Lo,i);const o=t?.max_tokens??n?.ls_max_tokens??s?.max_tokens;We(r,Fu,o);const a=t?.top_p??s?.top_p;We(r,Fo,a);const c=t?.frequency_penalty;We(r,Do,c);const u=t?.presence_penalty;return We(r,Uu,u),t&&"stream"in t&&st(r,Du,!!t.stream),r}function Km(e,t,n,r,s,i){return{[Po]:Fe(e??"langchain"),[un]:n,[Be]:Fe(t),[Ee]:Gr,...Mw(r,s,i)}}function Ow(e,t,n,r,s){const i=s?.ls_provider,o=r?.model??s?.ls_model_name??"unknown",a=Km(i,o,"pipeline",e,r,s);if(n&&Array.isArray(t)&&t.length>0){st(a,Nr,t.length);const c=t.map(u=>({role:"user",content:u}));st(a,Mr,Fe(c))}return a}function $w(e,t,n,r,s){const i=s?.ls_provider??e.id?.[2],o=r?.model??s?.ls_model_name??"unknown",a=Km(i,o,"chat",e,r,s);if(n&&Array.isArray(t)&&t.length>0){const c=Gu(t.flat());st(a,Nr,c.length);const u=Ho(c);st(a,Mr,Fe(u))}return a}function Pw(e,t){const n=[],r=e.flat();for(const s of r){const i=s.message?.content;if(Array.isArray(i))for(const o of i){const a=o;a.type==="tool_use"&&n.push(a)}}n.length>0&&st(t,Et,Fe(n))}function Lw(e,t){if(!e)return;const n=e.tokenUsage,r=e.usage;if(n)We(t,On,n.promptTokens),We(t,$n,n.completionTokens),We(t,Pn,n.totalTokens);else if(r){We(t,On,r.input_tokens),We(t,$n,r.output_tokens);const s=Number(r.input_tokens),i=Number(r.output_tokens),o=(Number.isNaN(s)?0:s)+(Number.isNaN(i)?0:i);o>0&&We(t,Pn,o),r.cache_creation_input_tokens!==void 0&&We(t,h0,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&We(t,m0,r.cache_read_input_tokens)}}function Dw(e,t){if(!e)return;const n={};if(Array.isArray(e.generations)){const u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&st(n,pn,Fe(u)),Pw(e.generations,n),t){const d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&st(n,Ke,Fe(d))}}Lw(e.llmOutput,n);const r=e.llmOutput,i=e.generations?.[0]?.[0]?.message,o=r?.model_name??r?.model??i?.response_metadata?.model_name;o&&st(n,Wt,o);const a=r?.id??i?.id;a&&st(n,jn,a);const c=r?.stop_reason??i?.response_metadata?.finish_reason;return c&&st(n,f0,Fe(c)),n}function ND(e={}){const t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,s=o=>{const a=r.get(o);a?.isRecording()&&(a.end(),r.delete(o))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(o,a,c,u,d,l,f,p){const h=vf(l),m=Ow(o,a,t,h,f),g=m[Be],y=m[un];Xt({name:`${y} ${g}`,op:"gen_ai.pipeline",attributes:{...m,[Ue]:"gen_ai.pipeline"}},b=>(r.set(c,b),b))},handleChatModelStart(o,a,c,u,d,l,f,p){const h=vf(l),m=$w(o,a,t,h,f),g=m[Be],y=m[un];Xt({name:`${y} ${g}`,op:"gen_ai.chat",attributes:{...m,[Ue]:"gen_ai.chat"}},b=>(r.set(c,b),b))},handleLLMEnd(o,a,c,u,d){const l=r.get(a);if(l?.isRecording()){const f=Dw(o,n);f&&l.setAttributes(f),s(a)}},handleLLMError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:K,message:"llm_error"}),s(a)),ye(o,{mechanism:{handled:!1,type:`${Gr}.llm_error_handler`}})},handleChainStart(o,a,c,u){const d=o.name||"unknown_chain",l={[Ee]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),Xt({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[Ue]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(o,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(o)}),s(a))},handleChainError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:K,message:"chain_error"}),s(a)),ye(o,{mechanism:{handled:!1,type:`${Gr}.chain_error_handler`}})},handleToolStart(o,a,c,u){const d=o.name||"unknown_tool",l={[Ee]:Gr,"gen_ai.tool.name":d};t&&(l["gen_ai.tool.input"]=a),Xt({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[Ue]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(o,a){const c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(o)}),s(a))},handleToolError(o,a){const c=r.get(a);c?.isRecording()&&(c.setStatus({code:K,message:"tool_error"}),s(a)),ye(o,{mechanism:{handled:!1,type:`${Gr}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}const Xm="auto.ai.langgraph";function Fw(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function Uw(e){const t=e;let n=0,r=0,s=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const i=t.usage_metadata;return typeof i.input_tokens=="number"&&(n=i.input_tokens),typeof i.output_tokens=="number"&&(r=i.output_tokens),typeof i.total_tokens=="number"&&(s=i.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:s}}if(t.response_metadata&&typeof t.response_metadata=="object"){const i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){const o=i.tokenUsage;typeof o.promptTokens=="number"&&(n=o.promptTokens),typeof o.completionTokens=="number"&&(r=o.completionTokens),typeof o.totalTokens=="number"&&(s=o.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:s}}function Bw(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(Wt,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(pn,[r.finish_reason])}}function Hw(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;const t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function Ww(e,t,n){const s=n?.messages;if(!s||!Array.isArray(s))return;const i=t?.length??0,o=s.length>i?s.slice(i):[];if(o.length===0)return;const a=Fw(o);a&&e.setAttribute(Et,JSON.stringify(a));const c=Gu(o);e.setAttribute(Ke,JSON.stringify(c));let u=0,d=0,l=0;for(const f of o){const p=Uw(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,Bw(e,f)}u>0&&e.setAttribute(On,u),d>0&&e.setAttribute($n,d),l>0&&e.setAttribute(Pn,l)}function jw(e,t){return new Proxy(e,{apply(n,r,s){return Wn({op:"gen_ai.create_agent",name:"create_agent",attributes:{[Ee]:Xm,[Ue]:"gen_ai.create_agent",[un]:"create_agent"}},i=>{try{const o=Reflect.apply(n,r,s),a=s.length>0?s[0]:{};a?.name&&typeof a.name=="string"&&(i.setAttribute(Dm,a.name),i.updateName(`create_agent ${a.name}`));const c=o.invoke;return c&&typeof c=="function"&&(o.invoke=zw(c.bind(o),o,a,t)),o}catch(o){throw i.setStatus({code:K,message:"internal_error"}),ye(o,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),o}})}})}function zw(e,t,n,r){return new Proxy(e,{apply(s,i,o){return Wn({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[Ee]:Xm,[Ue]:_0,[un]:"invoke_agent"}},async a=>{try{const c=n?.name;c&&typeof c=="string"&&(a.setAttribute(p0,c),a.setAttribute(Dm,c),a.updateName(`invoke_agent ${c}`));const l=(o.length>1?o[1]:void 0)?.configurable?.thread_id;l&&typeof l=="string"&&a.setAttribute(Bu,l);const f=Hw(t);f&&a.setAttribute(Uo,JSON.stringify(f));const p=r.recordInputs,h=r.recordOutputs,m=o.length>0?o[0].messages??[]:[];if(m&&p){const y=Gu(m),b=Ho(y);a.setAttributes({[Mr]:JSON.stringify(b),[Nr]:y.length})}const g=await Reflect.apply(s,i,o);return h&&Ww(a,m??null,g),g}catch(c){throw a.setStatus({code:K,message:"internal_error"}),ye(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function MD(e,t){const n=t||{};return e.compile=jw(e.compile.bind(e),n),e}function Qm(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Ki=U;function Gw(){if(!("fetch"in Ki))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function wf(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Zm(){if(typeof EdgeRuntime=="string")return!0;if(!Gw())return!1;if(wf(Ki.fetch))return!0;let e=!1;const t=Ki.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=wf(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){w&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function qw(){return"ReportingObserver"in Ki}function qu(e,t){const n="fetch";bs(n,e),Es(n,()=>e_(void 0,t))}function Vw(e){const t="fetch-body-resolved";bs(t,e),Es(t,()=>e_(Jw))}function e_(e,t=!1){t&&!Zm()||Ye(U,"fetch",function(n){return function(...r){const s=new Error,{method:i,url:o}=Kw(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:be()*1e3,virtualError:s,headers:Xw(r)};return e||vn("fetch",{...a}),n.apply(U,r).then(async c=>(e?e(c):vn("fetch",{...a,endTimestamp:be()*1e3,response:c}),c),c=>{vn("fetch",{...a,endTimestamp:be()*1e3,error:c}),Ct(c)&&c.stack===void 0&&(c.stack=s.stack,Ge(c,"framesToPop",1));const d=O()?.getOptions().enhanceFetchErrorMessages??"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const p=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${p})`:Ge(c,"__sentry_fetch_url_host__",p)}catch{}throw c})}})}async function Yw(e,t){if(e?.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(o),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function Jw(e){let t;try{t=e.clone()}catch{return}Yw(t,()=>{vn("fetch-body-resolved",{endTimestamp:be()*1e3,response:e})})}function wi(e,t){return!!e&&typeof e=="object"&&!!e[t]}function kf(e){return typeof e=="string"?e:e?wi(e,"url")?e.url:e.toString?e.toString():"":""}function Kw(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:kf(n),method:wi(r,"method")?String(r.method).toUpperCase():uu(n)&&wi(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:kf(t),method:wi(t,"method")?String(t.method).toUpperCase():"GET"}}function Xw(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(uu(t))return new Headers(t.headers)}catch{}}function Qw(){return"npm"}const P=U;let Ec=0;function t_(){return Ec>0}function Zw(){Ec++,setTimeout(()=>{Ec--})}function _r(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(du(e))return e}catch{return e}const r=function(...s){try{const i=s.map(o=>_r(o,t));return e.apply(this,i)}catch(i){throw Zw(),at(o=>{o.addEventProcessor(a=>(t.mechanism&&(sc(a,void 0),Dt(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),ye(i)}),i}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}$h(r,e),Ge(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Vu(){const e=Ts(),{referrer:t}=P.document||{},{userAgent:n}=P.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const ek={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},Rf=P;async function tk(e,t){const n=ek[e],r=Rf.Sentry=Rf.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const i=nk(n),o=P.document.createElement("script");o.src=i,o.crossOrigin="anonymous",o.referrerPolicy="strict-origin",t&&o.setAttribute("nonce",t);const a=new Promise((l,f)=>{o.addEventListener("load",()=>l()),o.addEventListener("error",f)}),c=P.document.currentScript,u=P.document.body||P.document.head||c?.parentElement;if(u)u.appendChild(o);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function nk(e){const n=O()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${Qt}/${e}.min.js`,n).toString()}const OD=ph({lazyLoadIntegration:tk}),$D=ph({getModalIntegration:()=>lb,getScreenshotIntegration:()=>gb});function Yu(e,t){const n=Ju(e,t),r={type:ak(t),value:ck(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function rk(e,t,n,r){const i=O()?.getOptions().normalizeDepth,o=pk(t),a={__serialized__:om(t,i)};if(o)return{exception:{values:[Yu(e,o)]},extra:a};const c={exception:{values:[{type:ko(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:dk(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=Ju(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Ca(e,t){return{exception:{values:[Yu(e,t)]}}}function Ju(e,t){const n=t.stacktrace||t.stack||"",r=ik(t),s=ok(t);try{return e(n,r,s)}catch{}return[]}const sk=/Minified React error #\d+;/i;function ik(e){return e&&sk.test(e.message)?1:0}function ok(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function n_(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function ak(e){const t=e?.name;return!t&&n_(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function ck(e){const t=e?.message;return n_(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?Kd(t.error):Kd(e):"No error message"}function uk(e,t,n,r){const s=n?.syntheticException||void 0,i=jo(e,t,s,r);return Dt(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),Mo(i)}function lk(e,t,n="info",r,s){const i=r?.syntheticException||void 0,o=Tc(e,t,i,s);return o.level=n,r?.event_id&&(o.event_id=r.event_id),Mo(o)}function jo(e,t,n,r,s){let i;if(Nh(t)&&t.error)return Ca(e,t.error);if(gd(t)||Ab(t)){const o=t;if("stack"in t)i=Ca(e,t);else{const a=o.name||(gd(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=Tc(e,c,n,r),sc(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Ct(t)?Ca(e,t):it(t)||ko(t)?(i=rk(e,t,n,s),Dt(i,{synthetic:!0}),i):(i=Tc(e,t,n,r),sc(i,`${t}`),Dt(i,{synthetic:!0}),i)}function Tc(e,t,n,r){const s={};if(r&&n){const i=Ju(e,n);i.length&&(s.exception={values:[{value:t,stacktrace:{frames:i}}]}),Dt(s,{synthetic:!0})}if(wo(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return s.logentry={message:i,params:o},s}return s.message=t,s}function dk(e,{isUnhandledRejection:t}){const n=Lb(e),r=t?"promise rejection":"exception";return Nh(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:ko(e)?`Event \`${fk(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function fk(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function pk(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class hk extends sI{constructor(t){const n=mk(t),r=P.SENTRY_SDK_SOURCE||Qw();vI(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:i,enableLogs:o,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;P.document&&(i||o||u)&&P.document.addEventListener("visibilitychange",()=>{P.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&Ru(this),u&&Au(this))}),s&&this.on("beforeSendSession",II)}eventFromException(t,n){return uk(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return lk(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function mk(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:P.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const me=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,$e=globalThis,Jr="10.36.0";function Or(){return Ku($e),$e}function Ku(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Jr,t[Jr]=t[Jr]||{}}function Xu(e,t,n=$e){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Jr]=r[Jr]||{};return s[e]||(s[e]=t())}const _k="Sentry Logger ",Cf={};function r_(e){if(!("console"in $e))return e();const t=$e.console,n={},r=Object.keys(Cf);r.forEach(s=>{const i=Cf[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function gk(){Zu().enabled=!0}function yk(){Zu().enabled=!1}function s_(){return Zu().enabled}function Sk(...e){Qu("log",...e)}function bk(...e){Qu("warn",...e)}function Ek(...e){Qu("error",...e)}function Qu(e,...t){me&&s_()&&r_(()=>{$e.console[e](`${_k}[${e}]:`,...t)})}function Zu(){return me?Xu("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const de={enable:gk,disable:yk,isEnabled:s_,log:Sk,warn:bk,error:Ek},Aa="<anonymous>";function i_(e){try{return!e||typeof e!="function"?Aa:e.name||Aa}catch{return Aa}}const ki={},Af={};function el(e,t){ki[e]=ki[e]||[],ki[e].push(t)}function tl(e,t){if(!Af[e]){Af[e]=!0;try{t()}catch(n){me&&de.error(`Error while instrumenting ${e}`,n)}}}function as(e,t){const n=e&&ki[e];if(n)for(const r of n)try{r(t)}catch(s){me&&de.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${i_(r)}
Error:`,s)}}const Tk=Object.prototype.toString;function nl(e,t){return Tk.call(e)===`[object ${t}]`}function en(e){return nl(e,"String")}function Ik(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function xf(e){return e===null||Ik(e)||typeof e!="object"&&typeof e!="function"}function vk(e){return nl(e,"Object")}function wk(e){return nl(e,"RegExp")}function o_(e){return!!(e?.then&&typeof e.then=="function")}const a_=$e,kk=80;function yt(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||kk;for(;n&&i++<r&&(u=Rk(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function Rk(e,t){const n=e,r=[];if(!n?.tagName)return"";if(a_.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&en(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function Ck(e){if(!a_.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Xi(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Ak(s,r);try{e[t]=s}catch{me&&de.log(`Failed to replace method "${t}" in object`,e)}}function Ut(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{me&&de.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Ak(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ut(e,"__sentry_original__",t)}catch{}}let Yn;function As(e){if(Yn!==void 0)return Yn?Yn(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=$e;return t in n&&typeof n[t]=="function"?(Yn=n[t],Yn(e)):(Yn=null,e())}function Ic(){return As(()=>Math.random())}function c_(){return As(()=>Date.now())}function xk(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Ri(e,t,n=!1){return en(e)?wk(t)?t.test(e):en(t)?n?e===t:e.includes(t):!1:!1}function Nk(e,t=[],n=!1){return t.some(r=>Ri(e,r,n))}function Mk(){const e=$e;return e.crypto||e.msCrypto}let xa;function Ok(){return Ic()*16}function Rn(e=Mk()){try{if(e?.randomUUID)return As(()=>e.randomUUID()).replace(/-/g,"")}catch{}return xa||(xa="10000000100040008000"+1e11),xa.replace(/[018]/g,t=>(t^(Ok()&15)>>t/4).toString(16))}const u_=1e3;function l_(){return c_()/u_}function $k(){const{performance:e}=$e;if(!e?.now||!e.timeOrigin)return l_;const t=e.timeOrigin;return()=>(t+As(()=>e.now()))/u_}let Nf;function Mt(){return(Nf??(Nf=$k()))()}let Na=null;function Pk(){const{performance:e}=$e;if(!e?.now)return;const t=3e5,n=As(()=>e.now()),r=c_(),s=e.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<t)return s;const i=e.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<t?i:r-n}function Ze(){return Na===null&&(Na=Pk()),Na}function Lk(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Mt(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Rn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function d_(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=d_(r[s],t[s],n-1));return r}function Qi(){return Rn()}function f_(){return Rn().substring(16)}const vc="_sentrySpan";function Zi(e,t){t?Ut(e,vc,t):delete e[vc]}function eo(e){return e[vc]}const Dk=100;let to=class wc{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Qi(),sampleRand:Ic()}}clone(){const t=new wc;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Zi(t,eo(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Lk(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof wc?n.getScopeData():vk(n)?t:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Zi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Qi(),sampleRand:Ic()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:Dk;if(r<=0)return this;const s={timestamp:l_(),...t,message:t.message?xk(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:eo(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=d_(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||Rn();if(!this._client)return me&&de.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||Rn();if(!this._client)return me&&de.warn("No client configured on scope - will not capture message!"),s;const i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||Rn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(me&&de.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Fk(){return Xu("defaultCurrentScope",()=>new to)}function Uk(){return Xu("defaultIsolationScope",()=>new to)}let Bk=class{constructor(t,n){let r;t?r=t:r=new to;let s;n?s=n:s=new to,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return o_(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function gr(){const e=Or(),t=Ku(e);return t.stack=t.stack||new Bk(Fk(),Uk())}function Hk(e){return gr().withScope(e)}function Wk(e,t){const n=gr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Mf(e){return gr().withScope(()=>e(gr().getIsolationScope()))}function jk(){return{withIsolationScope:Mf,withScope:Hk,withSetScope:Wk,withSetIsolationScope:(e,t)=>Mf(t),getCurrentScope:()=>gr().getScope(),getIsolationScope:()=>gr().getIsolationScope()}}function xs(e){const t=Ku(e);return t.acs?t.acs:jk()}function Tt(){const e=Or();return xs(e).getCurrentScope()}function zk(){const e=Or();return xs(e).getIsolationScope()}function rl(...e){const t=Or(),n=xs(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function hn(){return Tt().getClient()}const cs="sentry.source",p_="sentry.sample_rate",Gk="sentry.previous_trace_sample_rate",Ln="sentry.op",Pe="sentry.origin",Ns="sentry.measurement_unit",Ms="sentry.measurement_value",Of="sentry.custom_span_name",qk="sentry.profile_id",zo="sentry.exclusive_time",Vk=0,Yk=1,Jk=2,h_="_sentryScope",m_="_sentryIsolationScope";function Kk(e){try{const t=$e.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function Xk(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Qk(e,t,n){e&&(Ut(e,m_,Kk(n)),Ut(e,h_,t))}function kc(e){const t=e;return{scope:t[h_],isolationScope:Xk(t[m_])}}const Zk="sentry-",e1=/^sentry-/;function t1(e){const t=n1(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match(e1)){const o=s.slice(Zk.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function n1(e){if(!(!e||!en(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=$f(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):$f(e)}function $f(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),s=t.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const r1=/^o(\d+)\./;function s1(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function i1(e){return e.match(r1)?.[1]}function o1(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=i1(n)),r}function __(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const g_=0,sl=1;let Pf=!1;function a1(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:i,status:o,origin:a,links:c}=we(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:s,status:o,origin:a,links:c}}function y_(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===sl,attributes:i,...s}))}function cr(e){return typeof e=="number"?Lf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Lf(e.getTime()):Mt()}function Lf(e){return e>9999999999?e/1e3:e}function we(e){if(u1(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(c1(e)){const{attributes:r,startTime:s,name:i,endTime:o,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:cr(s),timestamp:cr(o)||void 0,status:S_(a),op:r[Ln],origin:r[Pe],links:y_(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function c1(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function u1(e){return typeof e.getSpanJSON=="function"}function Os(e){const{traceFlags:t}=e.spanContext();return t===sl}function S_(e){if(!(!e||e.code===Vk))return e.code===Yk?"ok":e.message||"internal_error"}const Kr="_sentryChildSpans",Rc="_sentryRootSpan";function b_(e,t){const n=e[Rc]||e;Ut(t,Rc,n),e[Kr]?e[Kr].add(t):Ut(e,Kr,new Set([t]))}function l1(e){const t=new Set;function n(r){if(!t.has(r)&&Os(r)){t.add(r);const s=r[Kr]?Array.from(r[Kr]):[];for(const i of s)n(i)}}return n(e),Array.from(t)}function ot(e){return e[Rc]||e}function zn(){const e=Or(),t=xs(e);return t.getActiveSpan?t.getActiveSpan():eo(Tt())}function d1(){Pf||(r_(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Pf=!0)}function il(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||hn()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Df(e){de.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function f1(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(p1(n)){if(Ri(e.description,n))return me&&Df(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Ri(e.description,n.name):!0,s=n.op?e.op&&Ri(e.op,n.op):!0;if(r&&s)return me&&Df(e),!0}return!1}function p1(e){return typeof e=="string"||e instanceof RegExp}const h1="production",E_="_frozenDsc";function Ma(e,t){Ut(e,E_,t)}function m1(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||h1,release:n.release,public_key:r,trace_id:e,org_id:o1(t)};return t.emit("createDsc",s),s}function no(e){const t=hn();if(!t)return{};const n=ot(e),r=we(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[p_]??s[Gk];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[E_];if(c)return a(c);const u=i?.get("sentry.dsc"),d=u&&t1(u);if(d)return a(d);const l=m1(e.spanContext().traceId,t),f=s[cs],p=r.description;return f!=="url"&&p&&(l.transaction=p),il()&&(l.sampled=String(Os(n)),l.sample_rand=i?.get("sentry.sample_rand")??kc(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}class Go{constructor(t={}){this._traceId=t.traceId||Qi(),this._spanId=t.spanId||f_()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:g_}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function _1(e,t=[]){return[e,t]}function g1(e){return[{type:"span"},e]}function y1(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=no(e[0]),s=t?.getDsn(),i=t?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&s&&{dsn:s1(s)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!f1(we(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);const l=a?p=>{const h=we(p),m=a(h);return m||(d1(),h)}:we,f=[];for(const p of u){const h=l(p);h&&f.push(g1(h))}return _1(o,f)}function S1(e){if(!me)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=we(e),{spanId:s}=e.spanContext(),i=Os(e),o=ot(e),a=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=we(o);u.push(`root ID: ${o.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}de.log(`${c}
  ${u.join(`
  `)}`)}function b1(e){if(!me)return;const{description:t="< unknown name >",op:n="< unknown op >"}=we(e),{spanId:r}=e.spanContext(),i=ot(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;de.log(o)}function E1(e,t,n,r=zn()){const s=r&&ot(r);s&&(me&&de.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Ms]:t,[Ns]:n}))}function Ff(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Ns],i=r[Ms];typeof s=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:s})}),t}const Uf=1e3;class ol{constructor(t={}){this._traceId=t.traceId||Qi(),this._spanId=t.spanId||f_(),this._startTime=t.startTimestamp||Mt(),this._links=t.links,this._attributes={},this.setAttributes({[Pe]:"manual",[Ln]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?sl:g_}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=cr(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(cs,"custom"),this}end(t){this._endTime||(this._endTime=cr(t),b1(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ln],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:S_(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Pe],profile_id:this._attributes[qk],exclusive_time:this._attributes[zo],measurements:Ff(this._events),is_segment:this._isStandaloneSpan&&ot(this)===this||void 0,segment_id:this._isStandaloneSpan?ot(this).spanContext().spanId:void 0,links:y_(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){me&&de.log("[Tracing] Adding an event to span:",t);const s=Bf(n)?n:r||Mt(),i=Bf(n)?{}:n||{},o={name:t,time:cr(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=hn();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===ot(this)))return;if(this._isStandaloneSpan){this._sampled?I1(y1([this],t)):(me&&de.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(kc(this).scope||Tt()).captureEvent(r)}_convertSpanToTransaction(){if(!Hf(we(this)))return;this._name||(me&&de.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=kc(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const i=l1(this).filter(d=>d!==this&&!T1(d)).map(d=>we(d)).filter(Hf),o=this._attributes[cs];delete this._attributes[Of],i.forEach(d=>{delete d.data[Of]});const a={contexts:{trace:a1(this)},spans:i.length>Uf?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,Uf):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:no(this)},request:r,...o&&{transaction_info:{source:o}}},c=Ff(this._events);return c&&Object.keys(c).length&&(me&&de.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Bf(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Hf(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function T1(e){return e instanceof ol&&e.isStandaloneSpan()}function I1(e){const t=hn();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function v1(e,t,n=()=>{},r=()=>{}){let s;try{s=e()}catch(i){throw t(i),n(),i}return w1(s,t,n,r)}function w1(e,t,n,r){return o_(e)?e.then(s=>(n(),r(s),s),s=>{throw t(s),n(),s}):(n(),r(e),e)}function k1(e,t,n){if(!il(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const i=__(s);if(i===void 0)return me&&de.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return me&&de.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||me&&de.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,r]}const T_="__SENTRY_SUPPRESS_TRACING__";function R1(e,t){const n=cl();if(n.startSpan)return n.startSpan(e,t);const r=w_(e),{forceTransaction:s,parentSpan:i,scope:o}=e,a=o?.clone();return rl(a,()=>A1(i)(()=>{const u=Tt(),d=k_(u,i),f=e.onlyIfParent&&!d?new Go:v_({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return Zi(u,f),v1(()=>t(f),()=>{const{status:p}=we(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Jk,message:"internal_error"})},()=>{f.end()})}))}function I_(e){const t=cl();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=w_(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?o=>rl(e.scope,o):s!==void 0?o=>al(s,o):o=>o())(()=>{const o=Tt(),a=k_(o,s);return e.onlyIfParent&&!a?new Go:v_({parentSpan:a,spanArguments:n,forceTransaction:r,scope:o})})}function al(e,t){const n=cl();return n.withActiveSpan?n.withActiveSpan(e,t):rl(r=>(Zi(r,e||void 0),t(r)))}function v_({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!il()){const o=new Go;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...no(o)};Ma(o,a)}return o}const s=zk();let i;if(e&&!n)i=C1(e,r,t),b_(e,i);else if(e){const o=no(e),{traceId:a,spanId:c}=e.spanContext(),u=Os(e);i=Wf({traceId:a,parentSpanId:c,...t},r,u),Ma(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};i=Wf({traceId:o,parentSpanId:c,...t},r,u),a&&Ma(i,a)}return S1(i),Qk(i,r,s),i}function w_(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=cr(e.startTime),delete r.startTime,r}return n}function cl(){const e=Or();return xs(e)}function Wf(e,t,n){const r=hn(),s=r?.getOptions()||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??n,c=o.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[T_]?[!1]:k1(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:__(u.dsc?.sample_rate)},u.sampleRand),p=new ol({...e,attributes:{[cs]:"custom",[p_]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(me&&de.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function C1(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[T_]?!1:Os(e),o=i?new ol({...n,parentSpanId:r,traceId:s,sampled:i}):new Go({traceId:s});b_(e,o);const a=hn();return a&&(a.emit("spanStart",o),n.endTimestamp&&a.emit("spanEnd",o)),o}function k_(e,t){if(t)return t;if(t===null)return;const n=eo(e);if(!n)return;const r=hn();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?ot(n):n}function A1(e){return e!==void 0?t=>al(e,t):t=>t()}function x1(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const jf=$e;function N1(){return"history"in jf&&!!jf.history}function M1(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function O1(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function $1(){return!O1()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function P1(){return typeof window<"u"&&(!$1()||L1())}function L1(){return $e.process?.type==="renderer"}const Dn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,j=$e,D1=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",$s=(e,t,n,r)=>{let s,i;return o=>{t.value>=0&&(o||r)&&(i=t.value-(s??0),(i||s===void 0)&&(s=t.value,t.delta=i,t.rating=D1(t.value,n),e(t)))}},Ps=(e=!0)=>{const t=j.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},$r=()=>Ps()?.activationStart??0;function tn(e,t,n){j.document&&j.addEventListener(e,t,n)}function ro(e,t,n){j.document&&j.removeEventListener(e,t,n)}let ur=-1;const R_=new Set,F1=()=>j.document?.visibilityState==="hidden"&&!j.document?.prerendering?0:1/0,Ci=e=>{if(U1(e)&&ur>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of R_)t();isFinite(ur)||(ur=e.type==="visibilitychange"?e.timeStamp:0,ro("prerenderingchange",Ci,!0))}},Ls=()=>{if(j.document&&ur<0){const e=$r();ur=(j.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??F1(),tn("visibilitychange",Ci,!0),tn("pagehide",Ci,!0),tn("prerenderingchange",Ci,!0)}return{get firstHiddenTime(){return ur},onHidden(e){R_.add(e)}}};function U1(e){return e.type==="pagehide"||j.document?.visibilityState==="hidden"}const B1=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Ds=(e,t=-1)=>{const n=Ps();let r="navigate";return n&&(j.document?.prerendering||$r()>0?r="prerender":j.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:B1(),navigationType:r}},Oa=new WeakMap;function ul(e,t){try{return Oa.get(e)||Oa.set(e,new t),Oa.get(e)}catch{return new t}}class so{constructor(){so.prototype.__init.call(this),so.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const Pr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},ll=e=>{let t=!1;return()=>{t||(e(),t=!0)}},qo=e=>{j.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},H1=[1800,3e3],W1=(e,t={})=>{qo(()=>{const n=Ls(),r=Ds("FCP");let s;const o=Pr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-$r(),0),r.entries.push(c),s(!0)))});o&&(s=$s(e,r,H1,t.reportAllChanges))})},j1=[.1,.25],z1=(e,t={})=>{W1(ll(()=>{const n=Ds("CLS",0);let r;const s=Ls(),i=ul(t,so),o=c=>{for(const u of c)i._processEntry(u);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,r())},a=Pr("layout-shift",o);a&&(r=$s(e,n,j1,t.reportAllChanges),s.onHidden(()=>{o(a.takeRecords()),r(!0)}),j?.setTimeout?.(r))}))};let C_=0,$a=1/0,ei=0;const G1=e=>{e.forEach(t=>{t.interactionId&&($a=Math.min($a,t.interactionId),ei=Math.max(ei,t.interactionId),C_=ei?(ei-$a)/7+1:0)})};let Cc;const A_=()=>Cc?C_:performance.interactionCount||0,q1=()=>{"interactionCount"in performance||Cc||(Cc=Pr("event",G1,{type:"event",buffered:!0,durationThreshold:0}))},Pa=10;let x_=0;const V1=()=>A_()-x_;class io{constructor(){io.prototype.__init.call(this),io.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){x_=A_(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(V1()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Pa||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((s,i)=>i._latency-s._latency),this._longestInteractionList.length>Pa){const s=this._longestInteractionList.splice(Pa);for(const i of s)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}}const N_=e=>{const t=j.requestIdleCallback||j.setTimeout;j.document?.visibilityState==="hidden"?e():(e=ll(e),tn("visibilitychange",e,{once:!0,capture:!0}),tn("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),ro("visibilitychange",e,{capture:!0}),ro("pagehide",e,{capture:!0})}))},Y1=[200,500],J1=40,K1=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Ls();qo(()=>{q1();const r=Ds("INP");let s;const i=ul(t,io),o=c=>{N_(()=>{for(const d of c)i._processEntry(d);const u=i._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,s())})},a=Pr("event",o,{durationThreshold:t.durationThreshold??J1});s=$s(e,r,Y1,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{o(a.takeRecords()),s(!0)}))})};class X1{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const Q1=[2500,4e3],Z1=(e,t={})=>{qo(()=>{const n=Ls(),r=Ds("LCP");let s;const i=ul(t,X1),o=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-$r(),0),r.entries=[u],s())},a=Pr("largest-contentful-paint",o);if(a){s=$s(e,r,Q1,t.reportAllChanges);const c=ll(()=>{o(a.takeRecords()),a.disconnect(),s(!0)}),u=d=>{d.isTrusted&&(N_(c),ro(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])tn(d,u,{capture:!0})}})},eR=[800,1800],Ac=e=>{j.document?.prerendering?qo(()=>Ac(e)):j.document?.readyState!=="complete"?addEventListener("load",()=>Ac(e),!0):setTimeout(e)},tR=(e,t={})=>{const n=Ds("TTFB"),r=$s(e,n,eR,t.reportAllChanges);Ac(()=>{const s=Ps();s&&(n.value=Math.max(s.responseStart-$r(),0),n.entries=[s],r(!0))})},Xr={},oo={};let M_,O_,$_,P_;function dl(e,t=!1){return Vo("cls",e,rR,M_,t)}function fl(e,t=!1){return Vo("lcp",e,sR,O_,t)}function nR(e){return Vo("ttfb",e,iR,$_)}function L_(e){return Vo("inp",e,oR,P_)}function Fn(e,t){return D_(e,t),oo[e]||(aR(e),oo[e]=!0),F_(e,t)}function Fs(e,t){const n=Xr[e];if(n?.length)for(const r of n)try{r(t)}catch(s){Dn&&de.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${i_(r)}
Error:`,s)}}function rR(){return z1(e=>{Fs("cls",{metric:e}),M_=e},{reportAllChanges:!0})}function sR(){return Z1(e=>{Fs("lcp",{metric:e}),O_=e},{reportAllChanges:!0})}function iR(){return tR(e=>{Fs("ttfb",{metric:e}),$_=e})}function oR(){return K1(e=>{Fs("inp",{metric:e}),P_=e})}function Vo(e,t,n,r,s=!1){D_(e,t);let i;return oo[e]||(i=n(),oo[e]=!0),r&&t({metric:r}),F_(e,t,s?i:void 0)}function aR(e){const t={};e==="event"&&(t.durationThreshold=0),Pr(e,n=>{Fs(e,{entries:n})},t)}function D_(e,t){Xr[e]=Xr[e]||[],Xr[e].push(t)}function F_(e,t,n){return()=>{n&&n();const r=Xr[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function cR(e){return"duration"in e}const uR=e=>{const t=n=>{(n.type==="pagehide"||j.document?.visibilityState==="hidden")&&e(n)};tn("visibilitychange",t,{capture:!0,once:!0}),tn("pagehide",t,{capture:!0,once:!0})};function La(e){return typeof e=="number"&&isFinite(e)}function ln(e,t,n,{...r}){const s=we(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),al(e,()=>{const i=I_({startTime:t,...r});return i&&i.end(n),i})}function pl(e){const t=hn();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:i}=e,{release:o,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=Tt(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:o,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":j.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...s};return I_({name:n,attributes:m,startTime:i,experimental:{standalone:!0}})}function Us(){return j.addEventListener&&j.performance}function _e(e){return e/1e3}function lR(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function U_(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function B_(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}uR(()=>{s("pagehide")});const i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(s("navigation"),i(),o())}),o=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,o()})}function dR(e){let t=0,n;if(!U_("layout-shift"))return;const r=dl(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(t=s.value,n=i)},!0);B_(e,(s,i)=>{fR(t,n,i,s),r()})}function fR(e,t,n,r){Dn&&de.log(`Sending CLS span (${e})`);const s=t?_e((Ze()||0)+t.startTime):Mt(),i=Tt().getScopeData().transactionName,o=t?yt(t.sources[0]?.node):"Layout shift",a={[Pe]:"auto.http.browser.cls",[Ln]:"ui.webvital.cls",[zo]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=yt(u.node)});const c=pl({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Ns]:"",[Ms]:e}),c.end(s))}function pR(e){let t=0,n;if(!U_("largest-contentful-paint"))return;const r=fl(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(t=s.value,n=i)},!0);B_(e,(s,i)=>{hR(t,n,i,s),r()})}function hR(e,t,n,r){Dn&&de.log(`Sending LCP span (${e})`);const s=_e((Ze()||0)+(t?.startTime||0)),i=Tt().getScopeData().transactionName,o=t?yt(t.element):"Largest contentful paint",a={[Pe]:"auto.http.browser.lcp",[Ln]:"ui.webvital.lcp",[zo]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=yt(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=pl({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Ns]:"millisecond",[Ms]:e}),c.end(s))}function Ve(e){return e&&((Ze()||performance.timeOrigin)+e)/1e3}function H_(e){const t={};if(e.nextHopProtocol!=null){const{name:n,version:r}=lR(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Ze()||Us()?.timeOrigin?mR({...t,"http.request.redirect_start":Ve(e.redirectStart),"http.request.redirect_end":Ve(e.redirectEnd),"http.request.worker_start":Ve(e.workerStart),"http.request.fetch_start":Ve(e.fetchStart),"http.request.domain_lookup_start":Ve(e.domainLookupStart),"http.request.domain_lookup_end":Ve(e.domainLookupEnd),"http.request.connect_start":Ve(e.connectStart),"http.request.secure_connection_start":Ve(e.secureConnectionStart),"http.request.connection_end":Ve(e.connectEnd),"http.request.request_start":Ve(e.requestStart),"http.request.response_start":Ve(e.responseStart),"http.request.response_end":Ve(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function mR(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const _R=2147483647;let zf=0,nt={},De,ao;function gR({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=Us();if(r&&Ze()){r.mark&&j.performance.mark("sentry-tracing-init");const s=t?pR(n):TR(),i=IR(),o=e?dR(n):ER();return()=>{s?.(),i(),o?.()}}return()=>{}}function yR(){Fn("longtask",({entries:e})=>{const t=zn();if(!t)return;const{op:n,start_timestamp:r}=we(t);for(const s of e){const i=_e(Ze()+s.startTime),o=_e(s.duration);n==="navigation"&&r&&i<r||ln(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Pe]:"auto.ui.browser.metrics"}})}})}function SR(){new PerformanceObserver(t=>{const n=zn();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=_e(Ze()+r.startTime),{start_timestamp:i,op:o}=we(n);if(o==="navigation"&&i&&s<i)continue;const a=_e(r.duration),c={[Pe]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),ln(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function bR(){Fn("event",({entries:e})=>{const t=zn();if(t){for(const n of e)if(n.name==="click"){const r=_e(Ze()+n.startTime),s=_e(n.duration),i={name:yt(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[Pe]:"auto.ui.browser.metrics"}},o=Ck(n.target);o&&(i.attributes["ui.component_name"]=o),ln(t,r,r+s,i)}}})}function ER(){return dl(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(nt.cls={value:e.value,unit:""},ao=t)},!0)}function TR(){return fl(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(nt.lcp={value:e.value,unit:"millisecond"},De=t)},!0)}function IR(){return nR(({metric:e})=>{e.entries[e.entries.length-1]&&(nt.ttfb={value:e.value,unit:"millisecond"})})}function vR(e,t){const n=Us(),r=Ze();if(!n?.getEntries||!r)return;const s=_e(r),i=n.getEntries(),{op:o,start_timestamp:a}=we(e);i.slice(zf).forEach(c=>{const u=_e(c.startTime),d=_e(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{CR(e,c,s);break}case"mark":case"paint":case"measure":{kR(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Ls(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(nt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(nt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{NR(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),zf=Math.max(i.length-1,0),MR(e),o==="pageload"&&(PR(nt),t.recordClsOnPageloadSpan||delete nt.cls,t.recordLcpOnPageloadSpan||delete nt.lcp,Object.entries(nt).forEach(([c,u])=>{E1(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",$r()),OR(e,t)),De=void 0,ao=void 0,nt={}}function wR(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function kR(e,t,n,r,s,i){if(wR(t)||["mark","measure"].includes(t.entryType)&&Nk(t.name,i))return;const o=Ps(!1),a=_e(o?o.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[Pe]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),RR(l,t),c<=d&&ln(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function RR(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&xf(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(xf(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function CR(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{ti(e,t,r,n)}),ti(e,t,"secureConnection",n,"TLS/SSL"),ti(e,t,"fetch",n,"cache"),ti(e,t,"domainLookup",n,"DNS"),xR(e,t,n)}function ti(e,t,n,r,s=n){const i=AR(n),o=t[i],a=t[`${n}Start`];!a||!o||ln(e,r+_e(a),r+_e(o),{op:`browser.${s}`,name:t.name,attributes:{[Pe]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function AR(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function xR(e,t,n){const r=n+_e(t.requestStart),s=n+_e(t.responseEnd),i=n+_e(t.responseStart);t.responseEnd&&(ln(e,r,s,{op:"browser.request",name:t.name,attributes:{[Pe]:"auto.ui.browser.metrics"}}),ln(e,i,s,{op:"browser.response",name:t.name,attributes:{[Pe]:"auto.ui.browser.metrics"}}))}function NR(e,t,n,r,s,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(o?.includes(a))return;const c={[Pe]:"auto.resource.browser.metrics"},u=x1(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(j.location.origin),$R(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...H_(t)},l=i+r,f=l+s;ln(e,l,f,{name:n.replace(j.location.origin,""),op:a,attributes:d})}function MR(e){const t=j.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),La(n.rtt)&&(nt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),La(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),La(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function OR(e,t){De&&t.recordLcpOnPageloadSpan&&(De.element&&e.setAttribute("lcp.element",yt(De.element)),De.id&&e.setAttribute("lcp.id",De.id),De.url&&e.setAttribute("lcp.url",De.url.trim().slice(0,200)),De.loadTime!=null&&e.setAttribute("lcp.loadTime",De.loadTime),De.renderTime!=null&&e.setAttribute("lcp.renderTime",De.renderTime),e.setAttribute("lcp.size",De.size)),ao?.sources&&t.recordClsOnPageloadSpan&&ao.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,yt(n.node)))}function $R(e,t,n){n.forEach(([r,s])=>{const i=e[r];i!=null&&(typeof i=="number"&&i<_R||typeof i=="string")&&(t[s]=i)})}function PR(e){const t=Ps(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function LR(){return Us()&&Ze()?Fn("element",DR):()=>{}}const DR=({entries:e})=>{const t=zn(),n=t?ot(t):void 0,r=n?we(n).description:Tt().getScopeData().transactionName;e.forEach(s=>{const i=s;if(!i.identifier)return;const o=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[_e(c),"load-time"]:a?[_e(a),"render-time"]:[Mt(),"entry-emission"],l=o==="image-paint"?_e(Math.max(0,(a??0)-(c??0))):0,f={[Pe]:"auto.ui.browser.elementtiming",[Ln]:"ui.elementtiming",[cs]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};R1({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})},FR=1e3;let Gf,xc,Nc;function W_(e){el("dom",e),tl("dom",UR)}function UR(){if(!j.document)return;const e=as.bind(null,"dom"),t=qf(e,!0);j.document.addEventListener("click",t,!1),j.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const s=j[n]?.prototype;s?.hasOwnProperty?.("addEventListener")&&(Xi(s,"addEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[o]=u[o]||{refCount:0};if(!d.handler){const l=qf(e);d.handler=l,i.call(this,o,l,c)}d.refCount++}catch{}return i.call(this,o,a,c)}}),Xi(s,"removeEventListener",function(i){return function(o,a,c){if(o==="click"||o=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[o];d&&(d.refCount--,d.refCount<=0&&(i.call(this,o,d.handler,c),d.handler=void 0,delete u[o]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,a,c)}}))})}function BR(e){if(e.type!==xc)return!1;try{if(!e.target||e.target._sentryId!==Nc)return!1}catch{}return!0}function HR(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function qf(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=WR(n);if(HR(n.type,r))return;Ut(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ut(r,"_sentryId",Rn());const s=n.type==="keypress"?"input":n.type;BR(n)||(e({event:n,name:s,global:t}),xc=n.type,Nc=r?r._sentryId:void 0),clearTimeout(Gf),Gf=j.setTimeout(()=>{Nc=void 0,xc=void 0},FR)}}function WR(e){try{return e.target}catch{return null}}let ni;function Yo(e){const t="history";el(t,e),tl(t,jR)}function jR(){if(j.addEventListener("popstate",()=>{const t=j.location.href,n=ni;if(ni=t,n===t)return;as("history",{from:n,to:t})}),!N1())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=ni,i=zR(String(r));if(ni=i,s===i)return t.apply(this,n);as("history",{from:s,to:i})}return t.apply(this,n)}}Xi(j.history,"pushState",e),Xi(j.history,"replaceState",e)}function zR(e){try{return new URL(e,j.location.origin).toString()}catch{return e}}const Ai={};function hl(e){const t=Ai[e];if(t)return t;let n=j[e];if(M1(n))return Ai[e]=n.bind(j);const r=j.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const i=s.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(s)}catch(s){Dn&&de.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&(Ai[e]=n.bind(j))}function GR(e){Ai[e]=void 0}function Bs(...e){return hl("setTimeout")(...e)}const kt="__sentry_xhr_v3__";function ml(e){el("xhr",e),tl("xhr",qR)}function qR(){if(!j.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,i=Mt()*1e3,o=en(r[0])?r[0].toUpperCase():void 0,a=VR(r[1]);if(!o||!a)return t.apply(n,r);n[kt]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[kt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:Mt()*1e3,startTimestamp:i,xhr:n,virtualError:s};as("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[kt];return h&&en(f)&&en(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[kt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const i={startTimestamp:Mt()*1e3,xhr:n};return as("xhr",i),t.apply(n,r)}})}function VR(e){if(en(e))return e;try{return e.toString()}catch{}}const YR=Symbol.for("sentry__originalRequestBody");function j_(e){return new URLSearchParams(e).toString()}function co(e,t=de){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[j_(e)];if(!e)return[void 0]}catch(n){return Dn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Dn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function _l(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][YR];return n!==void 0?n:void 0}}function z_(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Dn&&de.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return i&&(n[s.toLowerCase()]=i),n},{}):{}}const Da=[],xi=new Map,Jn=new Map,JR=60;function KR(){if(Us()&&Ze()){const t=XR();return()=>{t()}}return()=>{}}const Mc={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function XR(){return L_(QR)}const QR=({metric:e})=>{if(e.value==null)return;const t=_e(e.value);if(t>JR)return;const n=e.entries.find(h=>h.duration===e.value&&Mc[h.name]);if(!n)return;const{interactionId:r}=n,s=Mc[n.name],i=_e(Ze()+n.startTime),o=zn(),a=o?ot(o):void 0,c=r!=null?xi.get(r):void 0,u=c?.span||a,d=u?we(u).description:Tt().getScopeData().transactionName,l=c?.elementName||yt(n.target),f={[Pe]:"auto.http.browser.inp",[Ln]:`ui.interaction.${s}`,[zo]:n.duration},p=pl({name:l,transaction:d,attributes:f,startTime:i});p&&(p.addEvent("inp",{[Ns]:"millisecond",[Ms]:e.value}),p.end(i+t))};function ZR(){const e=Object.keys(Mc);P1()&&e.forEach(s=>{j.addEventListener(s,t,{capture:!0,passive:!0})});function t(s){const i=s.target;if(!i)return;const o=yt(i),a=Math.round(s.timeStamp);if(Jn.set(a,o),Jn.size>50){const c=Jn.keys().next().value;c!==void 0&&Jn.delete(c)}}function n(s){const i=Math.round(s.startTime);let o=Jn.get(i);if(!o)for(let a=-5;a<=5;a++){const c=Jn.get(i+a);if(c){o=c;break}}return o||"<unknown>"}const r=({entries:s})=>{const i=zn(),o=i&&ot(i);s.forEach(a=>{if(!cR(a))return;const c=a.interactionId;if(c==null||xi.has(c))return;const u=a.target?yt(a.target):n(a);if(Da.length>10){const d=Da.shift();xi.delete(d)}Da.push(c),xi.set(c,{span:o,elementName:u})})};Fn("event",r),Fn("first-input",r)}const eC=40;function G_(e,t=hl("fetch")){let n=0,r=0;async function s(i){const o=i.body.length;n+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw GR("fetch"),c}finally{n-=o,r--}}return ZT(e,s,Mu(e.bufferSize||eC))}const I=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function tC(){const e=O();if(!e){I&&_.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&_.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function nC(){const e=O();if(!e){I&&_.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&_.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const LD={startProfiler:tC,stopProfiler:nC},rC=10,sC=20,iC=30,oC=40,aC=50;function yr(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?ht:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const cC=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,uC=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,lC=/\((\S*)(?::(\d+))(?::(\d+))\)/,dC=/at (.+?) ?\(data:(.+?),/,fC=e=>{const t=e.match(dC);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=cC.exec(e);if(n){const[,s,i,o]=n;return yr(s,ht,+i,+o)}const r=uC.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=lC.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[i,o]=q_(r[1]||ht,r[2]);return yr(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},pC=[iC,fC],hC=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,mC=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_C=e=>{const t=hC.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=mC.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],s=t[1]||ht;return[s,r]=q_(s,r),yr(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},gC=[aC,_C],yC=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,SC=e=>{const t=yC.exec(e);return t?yr(t[2],t[1]||ht,+t[3],t[4]?+t[4]:void 0):void 0},DD=[oC,SC],bC=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,EC=e=>{const t=bC.exec(e);return t?yr(t[2],t[3]||ht,+t[1]):void 0},FD=[rC,EC],TC=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,IC=e=>{const t=TC.exec(e);return t?yr(t[5],t[3]||t[4]||ht,+t[1],+t[2]):void 0},UD=[sC,IC],vC=[pC,gC],wC=kh(...vC),q_=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ht,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function BD(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ht(r)}},i=kC(e);return bt(s,[i])}function kC(e){return[{type:"user_report"},e]}const ri=1024,RC="Breadcrumbs",CC=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:RC,setup(n){t.console&&Pu(MC(n)),t.dom&&W_(NC(n,t.dom)),t.xhr&&ml(OC(n)),t.fetch&&qu($C(n)),t.history&&Yo(PC(n)),t.sentry&&n.on("beforeSendEvent",xC(n))}}}),AC=CC;function xC(e){return function(n){O()===e&&cn({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Sn(n)},{event:n})}}function NC(e,t){return function(r){if(O()!==e)return;let s,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>ri&&(I&&_.warn(`\`dom.maxStringLength\` cannot exceed ${ri}, but a value of ${a} was configured. Sentry will use ${ri} instead.`),a=ri),typeof o=="string"&&(o=[o]);try{const u=r.event,d=LC(u)?u.target:u;s=Oh(d,{keyAttrs:o,maxStringLength:a}),i=Pb(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};i&&(c.data={"ui.component_name":i}),cn(c,{event:r.event,name:r.name,global:r.global})}}function MC(e){return function(n){if(O()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:_c(n.level),message:Di(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${Di(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;cn(r,{input:n.args,level:n.level})}}function OC(e){return function(n){if(O()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,i=n.xhr[kt];if(!r||!s||!i)return;const{method:o,url:a,status_code:c,body:u}=i,d={method:o,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:Qm(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),cn(f,l)}}function $C(e){return function(n){if(O()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),cn(a,o)}else{const i=n.response,o={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;const a={input:n.args,response:i,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Qm(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),cn(c,a)}}}function PC(e){return function(n){if(O()!==e)return;let r=n.from,s=n.to;const i=ar(P.location.href);let o=r?ar(r):void 0;const a=ar(s);o?.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),cn({category:"navigation",data:{from:r,to:s}})}}function LC(e){return!!e&&!!e.target}const DC=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],FC="BrowserApiErrors",UC=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:FC,setupOnce(){t.setTimeout&&Ye(P,"setTimeout",Vf),t.setInterval&&Ye(P,"setInterval",Vf),t.requestAnimationFrame&&Ye(P,"requestAnimationFrame",HC),t.XMLHttpRequest&&"XMLHttpRequest"in P&&Ye(XMLHttpRequest.prototype,"send",WC);const n=t.eventTarget;n&&(Array.isArray(n)?n:DC).forEach(s=>jC(s,t))}}}),BC=UC;function Vf(e){return function(...t){const n=t[0];return t[0]=_r(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${an(e)}`}}),e.apply(this,t)}}function HC(e){return function(t){return e.apply(this,[_r(t,{mechanism:{data:{handler:an(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function WC(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Ye(n,s,function(i){const o={mechanism:{data:{handler:an(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=du(i);return a&&(o.mechanism.data.handler=an(a)),_r(i,o)})}),e.apply(this,t)}}function jC(e,t){const r=P[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(Ye(r,"addEventListener",function(s){return function(i,o,a){try{zC(o)&&(o.handleEvent=_r(o.handleEvent,{mechanism:{data:{handler:an(o),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&GC(this,i,o),s.apply(this,[i,_r(o,{mechanism:{data:{handler:an(o),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),Ye(r,"removeEventListener",function(s){return function(i,o,a){try{const c=o.__sentry_wrapped__;c&&s.call(this,i,c,a)}catch{}return s.call(this,i,o,a)}}))}function zC(e){return typeof e.handleEvent=="function"}function GC(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const qC=()=>({name:"BrowserSession",setupOnce(){if(typeof P.document>"u"){I&&_.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ud({ignoreDuration:!0}),Bd(),Yo(({from:e,to:t})=>{e!==void 0&&e!==t&&(Ud({ignoreDuration:!0}),Bd())})}}),VC="GlobalHandlers",YC=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:VC,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(KC(n),Yf("onerror")),t.onunhandledrejection&&(XC(n),Yf("onunhandledrejection"))}}}),JC=YC;function KC(e){Ch(t=>{const{stackParser:n,attachStacktrace:r}=J_();if(O()!==e||t_())return;const{msg:s,url:i,line:o,column:a,error:c}=t,u=QC(jo(n,c||s,void 0,r,!1),i,o,a);u.level="error",Rs(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function XC(e){Ah(t=>{const{stackParser:n,attachStacktrace:r}=J_();if(O()!==e||t_())return;const s=V_(t),i=Rr(s)?Y_(s):jo(n,s,void 0,r,!0);i.level="error",Rs(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function V_(e){if(Rr(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Y_(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function QC(e,t,n,r){const s=e.exception=e.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=ZC(t)??Ts();return c.length===0&&c.push({colno:u,filename:l,function:ht,in_app:!0,lineno:d}),e}function Yf(e){I&&_.log(`Global Handler attached: ${e}`)}function J_(){return O()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function ZC(e){if(!(!Cn(e)||e.length===0))return e.startsWith("data:")?`<${Zt(e,!1)}>`:e}const eA=()=>({name:"HttpContext",preprocessEvent(e){if(!P.navigator&&!P.location&&!P.document)return;const t=Vu(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),tA="cause",nA=5,rA="LinkedErrors",sA=((e={})=>{const t=e.limit||nA,n=e.key||tA;return{name:rA,preprocessEvent(r,s,i){const o=i.getOptions();WI(Yu,o.stackParser,n,t,r,s)}}}),iA=sA,oA="SpotlightBrowser",aA=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:oA,setup:()=>{I&&_.log("Using Sidecar URL",t)},processEvent:n=>lA(n)?null:n,afterAllSetup:n=>{cA(n,t)}}});function cA(e,t){const n=hl("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){_.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Wi(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,_.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}const uA=aA;function lA(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function dA(){return fA()?(I&&Bn(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function fA(){if(typeof P.window>"u")return!1;const e=P;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=Ts(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(P===P.top&&r.some(i=>n.startsWith(`${i}://`)))}function pA(e){return[$I(),xI(),BC(),AC(),JC(),iA(),XI(),eA(),qC()]}function HD(e={}){const t=!e.skipBrowserExtensionCheck&&dA();let n=e.defaultIntegrations==null?pA():e.defaultIntegrations;if(e.spotlight){n||(n=[]);const s=typeof e.spotlight=="string"?{sidecarUrl:e.spotlight}:void 0;n.push(uA(s))}const r={...e,enabled:t?!1:e.enabled,stackParser:vb(e.stackParser||wC),integrations:MT({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||G_};return lI(hk,r)}function WD(){}function jD(e){e()}function zD(e={}){const t=P.document,n=t?.head||t?.body;if(!n){I&&_.error("[showReportDialog] Global document not defined");return}const r=ne(),i=O()?.getDsn();if(!i){I&&_.error("[showReportDialog] DSN not configured");return}const o={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||wT()},a=P.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=xT(i,o);const{onLoad:c,onClose:u}=o;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{P.removeEventListener("message",d)}};P.addEventListener("message",d)}n.appendChild(a)}const hA=U,mA="ReportingObserver",Jf=new WeakMap,_A=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(Jf.has(O()))for(const s of r)at(i=>{i.setExtra("url",s.url);const o=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(i.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}vT(`${o}: ${a}`)})}return{name:mA,setupOnce(){if(!qw())return;new hA.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){Jf.set(r,!0)}}}),GD=_A,gA="HttpClient",yA=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:gA,setup(n){kA(n,t),RA(n,t)}}}),qD=yA;function SA(e,t,n,r,s){if(X_(e,n.status,n.url)){const i=CA(t,r);let o,a,c,u;Z_()&&([o,c]=Kf("Cookie",i),[a,u]=Kf("Set-Cookie",n));const d=Q_({url:i.url,method:i.method,status:n.status,requestHeaders:o,responseHeaders:a,requestCookies:c,responseCookies:u,error:s,type:"fetch"});Rs(d)}}function Kf(e,t){const n=TA(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=K_(s))}catch{}return[n,r]}function bA(e,t,n,r,s){if(X_(e,t.status,t.responseURL)){let i,o,a;if(Z_()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(o=K_(u))}catch{}try{a=IA(t)}catch{}i=r}const c=Q_({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:o,error:s,type:"xhr"});Rs(c)}}function EA(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function K_(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function TA(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function IA(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return s&&i&&(n[s]=i),n},{}):{}}function vA(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function wA(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function kA(e,t){Zm()&&qu(n=>{if(O()!==e)return;const{response:r,args:s,error:i,virtualError:o}=n,[a,c]=s;r&&SA(t,a,r,c,i||o)},!1)}function RA(e,t){"XMLHttpRequest"in U&&ml(n=>{if(O()!==e)return;const{error:r,virtualError:s}=n,i=n.xhr,o=i[kt];if(!o)return;const{method:a,request_headers:c}=o;try{bA(t,i,a,c,r||s)}catch(u){I&&_.warn("Error while extracting response event form XHR response",u)}})}function X_(e,t,n){return wA(e.failedRequestStatusCodes,t)&&vA(e.failedRequestTargets,n)&&!yI(n,O())}function Q_(e){const t=O(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,i={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:EA(e.responseHeaders)}}};return Dt(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function CA(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Z_(){const e=O();return e?!!e.getOptions().sendDefaultPii:!1}const Fa=U,AA=7,xA="ContextLines",NA=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:AA;return{name:xA,processEvent(n){return MA(n,t)}}}),VD=NA;function MA(e,t){const n=Fa.document,r=Fa.location&&Rm(Fa.location.href);if(!n||!r)return e;const s=e.exception?.values;if(!s?.length)return e;const i=n.documentElement.innerHTML;if(!i)return e;const o=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return s.forEach(a=>{const c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>OA(u,o,r,t)))}),e}function OA(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Ub(t,e,r),e}const $A="GraphQLClient",PA=(e=>({name:$A,setup(t){LA(t,e),DA(t,e)}}));function LA(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const i=Z(n).data||{};if(!(i[Ue]==="http.client"))return;const c=i[eE]||i["http.url"],u=i[Zb]||i["http.method"];if(!Cn(c)||!Cn(u))return;const{endpoints:d}=t,l=xt(c,d),f=tg(r);if(l&&f){const p=ng(f);if(p){const h=eg(p);n.updateName(`${u} ${c} (${h})`),Jo(p)&&n.setAttribute("graphql.document",p.query),Ko(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function DA(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:i,data:o}=n;if(i==="http"&&(s==="fetch"||s==="xhr")){const d=o?.url,{endpoints:l}=t,f=xt(d,l),p=tg(r);if(f&&o&&p){const h=ng(p);if(!o.graphql&&h){const m=eg(h);o["graphql.operation"]=m,Jo(h)&&(o["graphql.document"]=h.query),Ko(h)&&(o["graphql.persisted_query.hash.sha256"]=h.extensions.persistedQuery.sha256Hash,o["graphql.persisted_query.version"]=h.extensions.persistedQuery.version)}}}})}function eg(e){if(Ko(e))return`persisted ${e.operationName}`;if(Jo(e)){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=FA(t);return r?`${s} ${r}`:`${s}`}return"unknown"}function tg(e){const t="xhr"in e;let n;if(t){const r=e.xhr[kt];n=r&&co(r.body)[0]}else{const r=_l(e.input);n=co(r)[0]}return n}function FA(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Ni(e){return typeof e=="object"&&e!==null}function Jo(e){return Ni(e)&&typeof e.query=="string"}function Ko(e){return Ni(e)&&typeof e.operationName=="string"&&Ni(e.extensions)&&Ni(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function ng(e){try{const t=JSON.parse(e);return Jo(t)||Ko(t)?t:void 0}catch{return}}const YD=PA,nn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ke=globalThis,Qr="10.36.0";function Xo(){return gl(ke),ke}function gl(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Qr,t[Qr]=t[Qr]||{}}function Qo(e,t,n=ke){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[Qr]=r[Qr]||{};return s[e]||(s[e]=t())}const UA="Sentry Logger ",Xf={};function yl(e){if(!("console"in ke))return e();const t=ke.console,n={},r=Object.keys(Xf);r.forEach(s=>{const i=Xf[s];n[s]=t[s],t[s]=i});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function BA(){bl().enabled=!0}function HA(){bl().enabled=!1}function rg(){return bl().enabled}function WA(...e){Sl("log",...e)}function jA(...e){Sl("warn",...e)}function zA(...e){Sl("error",...e)}function Sl(e,...t){nn&&rg()&&yl(()=>{ke.console[e](`${UA}[${e}]:`,...t)})}function bl(){return nn?Qo("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const Ot={enable:BA,disable:HA,isEnabled:rg,log:WA,warn:jA,error:zA},Ua="<anonymous>";function GA(e){try{return!e||typeof e!="function"?Ua:e.name||Ua}catch{return Ua}}function qA(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}const sg=Object.prototype.toString;function VA(e){switch(sg.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ea(e,Error)}}function El(e,t){return sg.call(e)===`[object ${t}]`}function uo(e){return El(e,"String")}function ig(e){return El(e,"Object")}function YA(e){return typeof Event<"u"&&ea(e,Event)}function JA(e){return typeof Element<"u"&&ea(e,Element)}function KA(e){return El(e,"RegExp")}function Zo(e){return!!(e?.then&&typeof e.then=="function")}function XA(e){return ig(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ea(e,t){try{return e instanceof t}catch{return!1}}function QA(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}const og=ke,ZA=80;function Tl(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||ZA;for(;n&&i++<r&&(u=ex(n,d),!(u==="html"||i>1&&o+s.length*c+u.length>=l));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function ex(e,t){const n=e,r=[];if(!n?.tagName)return"";if(og.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(s?.length)s.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&uo(o)){const a=o.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=n.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function tx(){try{return og.document.location.href}catch{return""}}function nx(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&rx(s,r);try{e[t]=s}catch{nn&&Ot.log(`Failed to replace method "${t}" in object`,e)}}function ag(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{nn&&Ot.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function rx(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ag(e,"__sentry_original__",t)}catch{}}function sx(e){if(VA(e))return{message:e.message,name:e.name,stack:e.stack,...Zf(e)};if(YA(e)){const t={type:e.type,target:Qf(e.target),currentTarget:Qf(e.currentTarget),...Zf(e)};return typeof CustomEvent<"u"&&ea(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Qf(e){try{return JA(e)?Tl(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Zf(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}let Kn;function Hs(e){if(Kn!==void 0)return Kn?Kn(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=ke;return t in n&&typeof n[t]=="function"?(Kn=n[t],Kn(e)):(Kn=null,e())}function Oc(){return Hs(()=>Math.random())}function Ws(){return Hs(()=>Date.now())}function $c(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function ix(e,t,n=!1){return uo(e)?KA(t)?t.test(e):uo(t)?n?e===t:e.includes(t):!1:!1}function ox(e,t=[],n=!1){return t.some(r=>ix(e,r,n))}function ax(){const e=ke;return e.crypto||e.msCrypto}let Ba;function cx(){return Oc()*16}function rn(e=ax()){try{if(e?.randomUUID)return Hs(()=>e.randomUUID()).replace(/-/g,"")}catch{}return Ba||(Ba="10000000100040008000"+1e11),Ba.replace(/[018]/g,t=>(t^(cx()&15)>>t/4).toString(16))}function ux(e){return e.exception?.values?.[0]}function lx(e,t){const n=ux(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s?.data,...t.data};n.mechanism.data=i}}const cg=1e3;function ta(){return Ws()/cg}function dx(){const{performance:e}=ke;if(!e?.now||!e.timeOrigin)return ta;const t=e.timeOrigin;return()=>(t+Hs(()=>e.now()))/cg}let ep;function ug(){return(ep??(ep=dx()))()}let Ha=null;function fx(){const{performance:e}=ke;if(!e?.now)return;const t=3e5,n=Hs(()=>e.now()),r=Ws(),s=e.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<t)return s;const i=e.timing?.navigationStart;return typeof i=="number"&&Math.abs(i+n-r)<t?i:r-n}function px(){return Ha===null&&(Ha=fx()),Ha}function hx(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||ug(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:rn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function na(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=na(r[s],t[s],n-1));return r}function tp(){return rn()}function mx(){return rn().substring(16)}const Pc="_sentrySpan";function np(e,t){t?ag(e,Pc,t):delete e[Pc]}function Lc(e){return e[Pc]}const _x=100;class St{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:tp(),sampleRand:Oc()}}clone(){const t=new St;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,np(t,Lc(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&hx(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof St?n.getScopeData():ig(n)?t:void 0,{tags:s,attributes:i,extra:o,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...i},this._extra={...this._extra,...o},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,np(this,void 0),this._attachments=[],this.setPropagationContext({traceId:tp(),sampleRand:Oc()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:_x;if(r<=0)return this;const s={timestamp:ta(),...t,message:t.message?$c(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Lc(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=na(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||rn();if(!this._client)return nn&&Ot.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){const s=r?.event_id||rn();if(!this._client)return nn&&Ot.warn("No client configured on scope - will not capture message!"),s;const i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},this),s}captureEvent(t,n){const r=n?.event_id||rn();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(nn&&Ot.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function gx(){return Qo("defaultCurrentScope",()=>new St)}function yx(){return Qo("defaultIsolationScope",()=>new St)}class Sx{constructor(t,n){let r;t?r=t:r=new St;let s;n?s=n:s=new St,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return Zo(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Sr(){const e=Xo(),t=gl(e);return t.stack=t.stack||new Sx(gx(),yx())}function bx(e){return Sr().withScope(e)}function Ex(e,t){const n=Sr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function rp(e){return Sr().withScope(()=>e(Sr().getIsolationScope()))}function Tx(){return{withIsolationScope:rp,withScope:bx,withSetScope:Ex,withSetIsolationScope:(e,t)=>rp(t),getCurrentScope:()=>Sr().getScope(),getIsolationScope:()=>Sr().getIsolationScope()}}function Il(e){const t=gl(e);return t.acs?t.acs:Tx()}function js(){const e=Xo();return Il(e).getCurrentScope()}function ra(){const e=Xo();return Il(e).getIsolationScope()}function Ix(){return Qo("globalScope",()=>new St)}function ct(){return js().getClient()}const lg="sentry.source",vx="sentry.sample_rate",wx="sentry.previous_trace_sample_rate",kx="sentry.op",Rx="sentry.origin",Cx=0,Ax=1,xx="_sentryScope",Nx="_sentryIsolationScope";function Mx(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function dg(e){const t=e;return{scope:t[xx],isolationScope:Mx(t[Nx])}}const Ox="sentry-",$x=/^sentry-/;function Px(e){const t=Lx(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,i])=>{if(s.match($x)){const o=s.slice(Ox.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Lx(e){if(!(!e||!uo(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=sp(n);return Object.entries(r).forEach(([s,i])=>{t[s]=i}),t},{}):sp(e)}function sp(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),s=t.slice(n+1);return[r,s].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}const Dx=/^o(\d+)\./;function Fx(e,t=!1){const{host:n,path:r,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Ux(e){return e.match(Dx)?.[1]}function Bx(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=Ux(n)),r}function ip(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const fg=1;function Hx(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:us(e).parent_span_id,i=dg(e).scope,o=r?i?.getPropagationContext().propagationSpanId||mx():t;return{parent_span_id:s,span_id:o,trace_id:n}}function Wx(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:i})=>({span_id:t,trace_id:n,sampled:r===fg,attributes:i,...s}))}function op(e){return typeof e=="number"?ap(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?ap(e.getTime()):ug()}function ap(e){return e>9999999999?e/1e3:e}function us(e){if(zx(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(jx(e)){const{attributes:r,startTime:s,name:i,endTime:o,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:op(s),timestamp:op(o)||void 0,status:qx(a),op:r[kx],origin:r[Rx],links:Wx(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function jx(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function zx(e){return typeof e.getSpanJSON=="function"}function Gx(e){const{traceFlags:t}=e.spanContext();return t===fg}function qx(e){if(!(!e||e.code===Cx))return e.code===Ax?"ok":e.message||"internal_error"}const Vx="_sentryRootSpan";function vl(e){return e[Vx]||e}function pg(){const e=Xo(),t=Il(e);return t.getActiveSpan?t.getActiveSpan():Lc(js())}function Yx(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=ct()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const hg="production",Jx="_frozenDsc";function Kx(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||hg,release:n.release,public_key:r,trace_id:e,org_id:Bx(t)};return t.emit("createDsc",s),s}function mg(e){const t=ct();if(!t)return{};const n=vl(e),r=us(n),s=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??s[vx]??s[wx];function a(h){return(typeof o=="number"||typeof o=="string")&&(h.sample_rate=`${o}`),h}const c=n[Jx];if(c)return a(c);const u=i?.get("sentry.dsc"),d=u&&Px(u);if(d)return a(d);const l=Kx(e.spanContext().traceId,t),f=s[lg],p=r.description;return f!=="url"&&p&&(l.transaction=p),Yx()&&(l.sampled=String(Gx(n)),l.sample_rand=i?.get("sentry.sample_rand")??dg(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function wt(e,t=100,n=1/0){try{return Dc("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Dc(e,t,n=1/0,r=1/0,s=Zx()){const[i,o]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Xx(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Dc("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=sx(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=Dc(p,h,c-1,r,s),l++}return o(t),d}function Xx(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(QA(t))return qA(t);if(XA(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${GA(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=Qx(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Qx(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function Zx(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function eN(e,t=[]){return[e,t]}function tN(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function nN(e,t,n,r){const s=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Fx(r)},...s&&{trace:s}}}const Wa=0,cp=1,up=2;function rN(e){return new ls(t=>{t(e)})}function sN(e){return new ls((t,n)=>{n(e)})}class ls{constructor(t){this._state=Wa,this._handlers=[],this._runExecutor(t)}then(t,n){return new ls((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new ls((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}_executeHandlers(){if(this._state===Wa)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===cp&&n[1](this._value),this._state===up&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===Wa){if(Zo(o)){o.then(r,s);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(cp,i)},s=i=>{n(up,i)};try{t(r,s)}catch(i){s(i)}}}function iN(e,t,n,r=0){try{const s=Fc(t,n,e,r);return Zo(s)?s:rN(s)}catch(s){return sN(s)}}function Fc(e,t,n,r){const s=n[r];if(!e||!s)return e;const i=s({...e},t);return nn&&i===null&&Ot.log(`Event processor "${s.id||"?"}" dropped event`),Zo(i)?i.then(o=>Fc(o,t,n,r+1)):Fc(i,t,n,r+1)}let _n,lp,dp,qt;function oN(e){const t=ke._sentryDebugIds,n=ke._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],s=n?Object.keys(n):[];if(qt&&r.length===lp&&s.length===dp)return qt;lp=r.length,dp=s.length,qt={},_n||(_n={});const i=(o,a)=>{for(const c of o){const u=a[c],d=_n?.[c];if(d&&qt&&u)qt[d[0]]=u,_n&&(_n[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const h=l[f]?.filename;if(h&&qt&&_n){qt[h]=u,_n[c]=[h,u];break}}}}};return t&&i(r,t),n&&i(s,n),qt}function aN(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:i}=t;uN(e,t),r&&fN(e,r),pN(e,n),lN(e,s),dN(e,i)}function fp(e,t){const{extra:n,tags:r,attributes:s,user:i,contexts:o,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:h,span:m}=t;Hr(e,"extra",n),Hr(e,"tags",r),Hr(e,"attributes",s),Hr(e,"user",i),Hr(e,"contexts",o),e.sdkProcessingMetadata=na(e.sdkProcessingMetadata,c,2),a&&(e.level=a),h&&(e.transactionName=h),m&&(e.span=m),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function Hr(e,t,n){e[t]=na(e[t],n,1)}function cN(e,t){const n=Ix().getScopeData();return e&&fp(n,e.getScopeData()),t&&fp(n,t.getScopeData()),n}function uN(e,t){const{extra:n,tags:r,user:s,contexts:i,level:o,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function lN(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function dN(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function fN(e,t){e.contexts={trace:Hx(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:mg(t),...e.sdkProcessingMetadata};const n=vl(t),r=us(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function pN(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function hN(e,t,n,r,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||rn(),timestamp:t.timestamp||ta()},u=n.integrations||e.integrations.map(g=>g.name);mN(c,e),yN(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&_N(c,e.stackParser);const d=bN(r,n.captureContext);n.mechanism&&lx(c,n.mechanism);const l=s?s.getEventProcessors():[],f=cN(i,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),aN(c,f);const h=[...l,...f.eventProcessors];return iN(h,c,n).then(g=>(g&&gN(g),typeof o=="number"&&o>0?SN(g,o,a):g))}function mN(e,t){const{environment:n,release:r,dist:s,maxValueLength:i}=t;e.environment=e.environment||n||hg,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const o=e.request;o?.url&&i&&(o.url=$c(o.url,i)),i&&e.exception?.values?.forEach(a=>{a.value&&(a.value=$c(a.value,i))})}function _N(e,t){const n=oN(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.filename&&(s.debug_id=n[s.filename])})})}function gN(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(s=>{s.debug_id&&(s.abs_path?t[s.abs_path]=s.debug_id:s.filename&&(t[s.filename]=s.debug_id),delete s.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,s])=>{n.push({type:"sourcemap",code_file:r,debug_id:s})})}function yN(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function SN(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(s=>({...s,...s.data&&{data:wt(s.data,t,n)}}))},...e.user&&{user:wt(e.user,t,n)},...e.contexts&&{contexts:wt(e.contexts,t,n)},...e.extra&&{extra:wt(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=wt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(s=>({...s,...s.data&&{data:wt(s.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=wt(e.contexts.flags,3,n)),r}function bN(e,t){if(!t)return e;const n=e?e.clone():new St;return n.update(t),n}function EN(e){if(e)return TN(e)?{captureContext:e}:vN(e)?{captureContext:e}:e}function TN(e){return e instanceof St||typeof e=="function"}const IN=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function vN(e){return Object.keys(e).some(t=>IN.includes(t))}function wN(e,t){return js().captureException(e,EN(t))}function kN(e,t){ra().setContext(e,t)}function RN(e){ra().addEventProcessor(e)}const CN=60*1e3;function AN(e,t=Ws()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?CN:r-t}function xN(e,t){return e[t]||e.all||0}function NN(e,t,n=Ws()){return xN(e,t)>n}function MN(e,{statusCode:t,headers:n},r=Ws()){const s={...e},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else o?s.all=r+AN(o,r):t===429&&(s.all=r+60*1e3);return s}const ON="thismessage:/";function $N(e){return"isRelative"in e}function PN(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?ON:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function LN(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return FN(e,n)||DN(e,r)}function DN(e,t){return t?pp(e)===pp(t):!1}function FN(e,t){const n=PN(e);return!n||$N(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function pp(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function UN(e,t,n){let r,s,i;const o=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function d(){return s!==void 0||i!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),o&&i===void 0&&(i=a(c,o)),r}return l.cancel=u,l.flush=d,l}const BN=100;function HN(e,t){const n=ct(),r=ra();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=BN}=n.getOptions();if(i<=0)return;const a={timestamp:ta(),...e},c=s?yl(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}function WN(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function jN(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function zN(){return!jN()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function hp(){return typeof window<"u"&&(!zN()||GN())}function GN(){return ke.process?.type==="renderer"}const le=ke,wl="sentryReplaySession",qN="replay_event",kl="Unable to send Replay",VN=3e5,YN=9e5,JN=5e3,KN=5500,XN=6e4,QN=5e3,ZN=3,mp=15e4,si=5e3,eM=3e3,tM=300,Rl=2e7,nM=4999,rM=5e4,_p=36e5;var sM=Object.defineProperty,iM=(e,t,n)=>t in e?sM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gp=(e,t,n)=>iM(e,typeof t!="symbol"?t+"":t,n),Se=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Se||{});function oM(e){return e.nodeType===e.ELEMENT_NODE}function Zr(e){return e?.host?.shadowRoot===e}function es(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function aM(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function cM(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function lo(e){try{const t=e.rules||e.cssRules;return t?aM(Array.from(t,_g).join("")):null}catch{return null}}function uM(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],i=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function _g(e){let t;if(dM(e))try{t=lo(e.styleSheet)||cM(e)}catch{}else if(fM(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=uM(e)),r&&(n=lM(n)),r||s)return n}return t||e.cssText}function lM(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function dM(e){return"styleSheet"in e}function fM(e){return"selectorText"in e}let gg=class{constructor(){gp(this,"idNodeMap",new Map),gp(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function pM(){return new gg}function sa({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function ds({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function br(e){return e.toLowerCase()}function Uc(e){return e.toUpperCase()}const yp="__rrweb_original__";function hM(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const i=t.getImageData,o=yp in i?i[yp]:i;if(new Uint32Array(o.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Cl(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?br(t):null}function fo(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function yg(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const Sp={};function Sg(e){const t=Sp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return Sp[e]=r.bind(window)}function Bc(...e){return Sg("setTimeout")(...e)}function bg(...e){return Sg("clearTimeout")(...e)}function Eg(e){try{return e.contentDocument}catch{}}let mM=1;const _M=new RegExp("[^a-z0-9-_:]"),fs=-2;function Al(){return mM++}function gM(e){if(e instanceof HTMLFormElement)return"form";const t=br(e.tagName);return _M.test(t)?"div":t}function yM(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Xn,bp;const SM=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,bM=/^(?:[a-z+]+:)?\/\//i,EM=/^www\..*/i,TM=/^(data:)([^,]*),(.*)/i;function IM(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),r=[];for(let s of n){if(s=s.trim(),!s)continue;const i=s.indexOf(":");if(i===-1){r.push(s);continue}const o=s.slice(0,i).trim();t.has(o)||r.push(s)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function po(e,t){return(e||"").replace(SM,(n,r,s,i,o,a)=>{const c=s||o||a,u=r||i||"";if(!c)return n;if(bM.test(c)||EM.test(c))return`url(${u}${c}${u})`;if(TM.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${yM(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const vM=/^[^ \t\n\r\u000c]+/,wM=/^[, \t\n\r\u000c]+/;function kM(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const a=i.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const s=[];for(;r(wM),!(n>=t.length);){let i=r(vM);if(i.slice(-1)===",")i=tr(e,i.substring(0,i.length-1)),s.push(i);else{let o="";i=tr(e,i);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((i+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((i+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return s.join(", ")}const Ep=new WeakMap;function tr(e,t){return!t||t.trim()===""?t:ia(e,t)}function RM(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function ia(e,t){let n=Ep.get(e);if(n||(n=e.createElement("a"),Ep.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Tg(e,t,n,r,s,i,o){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return tr(e,r);if(n==="xlink:href"&&r[0]!=="#")return tr(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return tr(e,r);if(n==="srcset")return kM(e,r);if(n==="style"){let a=po(r,ia(e));return o&&o.size>0&&(a=IM(a,o)),a}else if(t==="object"&&n==="data")return tr(e,r);return typeof i=="function"?i(n,r,s):r}function Ig(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function CM(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const i=e.classList[s];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function AM(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function En(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:En(e.parentNode,t,n,r+1)}function nr(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(AM(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Er(e,t,n,r,s,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const u=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=En(o,nr(r,s)),c<0)return!0;a=En(o,nr(t,n),c>=0?c:1/0)}else{if(a=En(o,nr(t,n)),a<0)return!1;c=En(o,nr(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function xM(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const a=Bc(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{bg(a),s=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return Bc(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function NM(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const i=Bc(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{bg(i),r=!0,t()})}function MM(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:b,recordCanvas:$,keepIframeSrcFn:C,newlyAddedElement:B=!1,ignoreCSSAttributes:N}=t,S=OM(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Se.Document,childNodes:[],compatMode:e.compatMode}:{type:Se.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Se.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return PM(e,{doc:n,blockClass:s,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:y,inlineImages:b,recordCanvas:$,keepIframeSrcFn:C,newlyAddedElement:B,rootId:S,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:N});case e.TEXT_NODE:return $M(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:Se.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Se.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function OM(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function $M(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=lo(e.parentNode.sheet))}catch(y){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${y}`,e)}f=po(f,ia(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=Er(e,r,i,s,o,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const y=sa({type:null,tagName:l,maskInputOptions:c});f=ds({isMasked:Er(e,r,i,s,o,y),element:e,value:f,maskInputFn:u})}return{type:Se.Text,textContent:f||"",isStyle:p,rootId:d}}function PM(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:$,ignoreCSSAttributes:C}=t,B=CM(e,r,s,i),N=gM(e);let S={};const R=e.attributes.length;for(let E=0;E<R;E++){const A=e.attributes[E];A.name&&!Ig(N,A.name,A.value)&&(S[A.name]=Tg(n,N,br(A.name),A.value,e,c,C))}if(N==="link"&&o){const E=Array.from(n.styleSheets).find(k=>k.href===e.href);let A=null;E&&(A=lo(E)),A&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=po(A,E.href))}if(N==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const E=lo(e.sheet);E&&(S._cssText=po(E,ia(n)))}if(N==="input"||N==="textarea"||N==="select"||N==="option"){const E=e,A=Cl(E),k=fo(E,Uc(N),A),x=E.checked;if(A!=="submit"&&A!=="button"&&k){const M=Er(E,g,b,y,$,sa({type:A,tagName:Uc(N),maskInputOptions:a}));S.value=ds({isMasked:M,element:E,value:k,maskInputFn:u})}x&&(S.checked=x)}if(N==="option"&&(e.selected&&!a.select?S.selected=!0:delete S.selected),N==="canvas"&&f){if(e.__context==="2d")hM(e)||(S.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const E=e.toDataURL(d.type,d.quality),A=n.createElement("canvas");A.width=e.width,A.height=e.height;const k=A.toDataURL(d.type,d.quality);E!==k&&(S.rr_dataURL=E)}}if(N==="img"&&l){Xn||(Xn=n.createElement("canvas"),bp=Xn.getContext("2d"));const E=e,A=E.currentSrc||E.getAttribute("src")||"<unknown-src>",k=E.crossOrigin,x=()=>{E.removeEventListener("load",x);try{Xn.width=E.naturalWidth,Xn.height=E.naturalHeight,bp.drawImage(E,0,0),S.rr_dataURL=Xn.toDataURL(d.type,d.quality)}catch(M){if(E.crossOrigin!=="anonymous"){E.crossOrigin="anonymous",E.complete&&E.naturalWidth!==0?x():E.addEventListener("load",x);return}else console.warn(`Cannot inline img src=${A}! Error: ${M}`)}E.crossOrigin==="anonymous"&&(k?S.crossOrigin=k:E.removeAttribute("crossorigin"))};E.complete&&E.naturalWidth!==0?x():E.addEventListener("load",x)}if((N==="audio"||N==="video")&&(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop)),B){const{width:E,height:A}=e.getBoundingClientRect();S={class:S.class,rr_width:`${E}px`,rr_height:`${A}px`}}N==="iframe"&&!p(S.src)&&(!B&&!Eg(e)&&(S.rr_src=S.src),delete S.src);let L;try{customElements.get(N)&&(L=!0)}catch{}return{type:Se.Element,tagName:N,attributes:S,childNodes:[],isSVG:RM(e)||void 0,needBlock:B,rootId:m,isCustom:L}}function ue(e){return e==null?"":e.toLowerCase()}function LM(e,t){if(t.comment&&e.type===Se.Comment)return!0;if(e.type===Se.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&yg(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(ue(e.attributes.name).match(/^msapplication-tile(image|color)$/)||ue(e.attributes.name)==="application-name"||ue(e.attributes.rel)==="icon"||ue(e.attributes.rel)==="apple-touch-icon"||ue(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&ue(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(ue(e.attributes.property).match(/^(og|twitter|fb):/)||ue(e.attributes.name).match(/^(og|twitter):/)||ue(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(ue(e.attributes.name)==="robots"||ue(e.attributes.name)==="googlebot"||ue(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(ue(e.attributes.name)==="author"||ue(e.attributes.name)==="generator"||ue(e.attributes.name)==="framework"||ue(e.attributes.name)==="publisher"||ue(e.attributes.name)==="progid"||ue(e.attributes.property).match(/^article:/)||ue(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(ue(e.attributes.name)==="google-site-verification"||ue(e.attributes.name)==="yandex-verification"||ue(e.attributes.name)==="csrf-token"||ue(e.attributes.name)==="p:domain_verify"||ue(e.attributes.name)==="verify-v1"||ue(e.attributes.name)==="verification"||ue(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function rr(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:$={},inlineImages:C=!1,recordCanvas:B=!1,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:R=5e3,onBlockedImageLoad:L,onStylesheetLoad:E,stylesheetLoadTimeout:A=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:x=!1,ignoreCSSAttributes:M}=t;let{preserveWhiteSpace:X=!0}=t;const V=MM(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:$,inlineImages:C,recordCanvas:B,keepIframeSrcFn:k,newlyAddedElement:x,ignoreCSSAttributes:M});if(!V)return console.warn(e,"not serialized"),null;let ee;r.hasNode(e)?ee=r.getId(e):LM(V,b)||!X&&V.type===Se.Text&&!V.isStyle&&!V.textContent.replace(/^\s+|\s+$/gm,"").length?ee=fs:ee=Al();const T=Object.assign(V,{id:ee});if(r.add(e,T),ee===fs)return null;N&&N(e);let W=!f;if(T.type===Se.Element){W=W&&!T.needBlock;const v=e.shadowRoot;v&&es(v)&&(T.isShadowHost=!0)}if((T.type===Se.Document||T.type===Se.Element)&&W){b.headWhitespace&&T.type===Se.Element&&T.tagName==="head"&&(X=!1);const v={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:$,inlineImages:C,recordCanvas:B,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:R,onBlockedImageLoad:L,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:M},z=e.childNodes?Array.from(e.childNodes):[];for(const se of z){const te=rr(se,v);te&&T.childNodes.push(te)}if(oM(e)&&e.shadowRoot)for(const se of Array.from(e.shadowRoot.childNodes)){const te=rr(se,v);te&&(es(e.shadowRoot)&&(te.isShadow=!0),T.childNodes.push(te))}}if(e.parentNode&&Zr(e.parentNode)&&es(e.parentNode)&&(T.isShadow=!0),T.type===Se.Element&&T.tagName==="iframe"&&!T.needBlock&&xM(e,()=>{const v=Eg(e);if(v&&S){const z=rr(v,{doc:v,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:$,inlineImages:C,recordCanvas:B,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:R,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:M});z&&S(e,z)}},R),T.type===Se.Element&&T.tagName==="img"&&!e.complete&&T.needBlock){const v=e,z=()=>{if(v.isConnected&&!v.complete&&L)try{const se=v.getBoundingClientRect();se.width>0&&se.height>0&&L(v,T,se)}catch{}v.removeEventListener("load",z)};v.isConnected&&v.addEventListener("load",z)}return T.type===Se.Element&&T.tagName==="link"&&typeof T.attributes.rel=="string"&&(T.attributes.rel==="stylesheet"||T.attributes.rel==="preload"&&typeof T.attributes.href=="string"&&yg(T.attributes.href)==="css")&&NM(e,()=>{if(E){const v=rr(e,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:$,inlineImages:C,recordCanvas:B,preserveWhiteSpace:X,onSerialize:N,onIframeLoad:S,iframeLoadTimeout:R,onStylesheetLoad:E,stylesheetLoadTimeout:A,keepIframeSrcFn:k,ignoreCSSAttributes:M});v&&E(e,v)}},A),T.type===Se.Element&&delete T.needBlock,T}function DM(e,t){const{mirror:n=new gg,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:b=!1,dataURLOptions:$,preserveWhiteSpace:C,onSerialize:B,onIframeLoad:N,iframeLoadTimeout:S,onBlockedImageLoad:R,onStylesheetLoad:L,stylesheetLoadTimeout:E,keepIframeSrcFn:A=()=>!1,ignoreCSSAttributes:k=new Set([])}=t||{};return rr(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:$,inlineImages:f,recordCanvas:p,preserveWhiteSpace:C,onSerialize:B,onIframeLoad:N,iframeLoadTimeout:S,onBlockedImageLoad:R,onStylesheetLoad:L,stylesheetLoadTimeout:E,keepIframeSrcFn:A,newlyAddedElement:!1,ignoreCSSAttributes:k})}function Oe(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Qn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Tp={map:{},getId(){return console.error(Qn),-1},getNode(){return console.error(Qn),null},removeNodeFromMap(){console.error(Qn)},has(){return console.error(Qn),!1},reset(){console.error(Qn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Tp=new Proxy(Tp,{get(e,t,n){return t==="map"&&console.error(Qn),Reflect.get(e,t,n)}}));function ps(e,t,n={}){let r=null,s=0;return function(...i){const o=Date.now();!s&&n.leading===!1&&(s=o);const a=t-(o-s),c=this;a<=0||a>t?(r&&(zM(r),r=null),s=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=oa(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function vg(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){oa(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>vg(e,t,i||{},!0)}function xl(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let ho=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ho=()=>new Date().getTime());function wg(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function kg(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Rg(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Cg(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function je(e,t,n,r,s){if(!e)return!1;const i=Cg(e);if(!i)return!1;const o=nr(t,n);if(!s){const u=r&&i.matches(r);return o(i)&&!u}const a=En(i,o);let c=-1;return a<0?!1:(r&&(c=En(i,nr(null,r))),a>-1&&c<0?!0:a<c)}function FM(e,t){return t.getId(e)!==-1}function ja(e,t){return t.getId(e)===fs}function Ag(e,t){if(Zr(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Ag(e.parentNode,t):!0:!0}function Hc(e){return!!e.changedTouches}function UM(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function xg(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Ng(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Wc(e){return!!e?.shadowRoot}class BM{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Mg(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function HM(e){let t=e,n;for(;n=Mg(t);)t=n;return t}function WM(e){const t=e.ownerDocument;if(!t)return!1;const n=HM(e);return t.contains(n)}function Og(e){const t=e.ownerDocument;return t?t.contains(e)||WM(e):!1}const Ip={};function Nl(e){const t=Ip[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return Ip[e]=r.bind(window)}function jM(...e){return Nl("requestAnimationFrame")(...e)}function oa(...e){return Nl("setTimeout")(...e)}function zM(...e){return Nl("clearTimeout")(...e)}var G=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(G||{}),H=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(H||{}),Me=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Me||{}),vt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(vt||{}),Zn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Zn||{});function Ml(e){try{return e.contentDocument}catch{}}function GM(e){try{return e.contentWindow}catch{}}function vp(e){return"__ln"in e}class qM{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&vp(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&vp(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const wp=(e,t)=>`${e}@${t}`;class VM{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new qM,s=c=>{let u=c,d=fs;for(;d===fs;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!Og(c))return;const u=Zr(c.parentNode)?this.mirror.getId(Mg(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=rr(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{xg(f,this.mirror)&&!je(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Ng(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Wc(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{je(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${m}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)kp(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Rp(this.droppedSet,c)&&!kp(this.removes,c,this.mirror)||Rp(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const u=this.mirror.getId(o.value.parentNode),d=s(o.value);u!==-1&&d!==-1&&(c=o)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!ja(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!je(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Er(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Cg(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const o=Cl(n),a=n.tagName;s=fo(n,a,o);const c=sa({maskInputOptions:this.maskInputOptions,tagName:a,type:o}),u=Er(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=ds({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(je(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!Ml(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Ig(n.tagName,r)&&(i.attributes[r]=Tg(this.doc,br(n.tagName),br(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==o.style.getPropertyValue(a)||u!==o.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(const a of Array.from(o.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(je(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=Zr(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);je(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ja(n,this.mirror)||!FM(n,this.mirror)||(this.addedSet.has(n)?(jc(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Ag(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[wp(r,s)]?jc(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:Zr(t.target)&&es(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(ja(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[wp(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);je(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),Wc(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function jc(e,t){e.delete(t),t.childNodes?.forEach(n=>jc(e,n))}function kp(e,t,n){return e.length===0?!1:YM(e,t,n)}function YM(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(i=>i.id===s))return!0;r=r.parentNode}return!1}function Rp(e,t){return e.size===0?!1:$g(e,t)}function $g(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:$g(e,n):!1}let ts;function JM(e){ts=e}function KM(){ts=void 0}const Q=e=>ts?(...n)=>{try{return e(...n)}catch(r){if(ts&&ts(r)===!0)return()=>{};throw r}}:e,sr=[];function zs(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Pg(e,t){const n=new VM;sr.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=window?.Zone?.__symbol__?.("MutationObserver");s&&window[s]&&(r=window[s]);const i=new r(Q(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function XM({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=ps(Q(l=>{const f=Date.now()-a;e(o.map(p=>(p.timeOffset-=f,p)),l),o=[],a=null}),i),u=Q(ps(Q(l=>{const f=zs(l),{clientX:p,clientY:h}=Hc(l)?l.changedTouches[0]:l;a||(a=ho()),o.push({x:p,y:h,id:r.getId(f),timeOffset:ho()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?H.Drag:l instanceof MouseEvent?H.MouseMove:H.TouchMove)}),s,{trailing:!1})),d=[Oe("mousemove",u,n),Oe("touchmove",u,n),Oe("drag",u,n)];return Q(()=>{d.forEach(l=>l())})}function QM({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=zs(f);if(je(p,r,s,i,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=vt.Mouse;break;case"touch":h=vt.Touch;break;case"pen":h=vt.Pen;break}h===vt.Touch?Me[l]===Me.MouseDown?m="TouchStart":Me[l]===Me.MouseUp&&(m="TouchEnd"):vt.Pen}else Hc(f)&&(h=vt.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===vt.Touch||m.startsWith("Mouse")&&h===vt.Mouse)&&(h=null)):Me[l]===Me.Click&&(h=u,u=null);const g=Hc(f)?f.changedTouches[0]:f;if(!g)return;const y=n.getId(p),{clientX:b,clientY:$}=g;Q(e)({type:Me[m],id:y,x:b,y:$,...h!==null&&{pointerType:h}})};return Object.keys(Me).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=br(l);const p=d(l);if(window.PointerEvent)switch(Me[l]){case Me.MouseDown:case Me.MouseUp:f=f.replace("mouse","pointer");break;case Me.TouchStart:case Me.TouchEnd:return}c.push(Oe(f,p,t))}),Q(()=>{c.forEach(l=>l())})}function Lg({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:o}){const a=Q(ps(Q(c=>{const u=zs(c);if(!u||je(u,r,s,i,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=wg(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),o.scroll||100));return Oe("scroll",a,t)}function ZM({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=Q(ps(Q(()=>{const i=kg(),o=Rg();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return Oe("resize",s,t)}const eO=["INPUT","TEXTAREA","SELECT"],Cp=new WeakMap;function tO({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(S){let R=zs(S);const L=S.isTrusted,E=R&&Uc(R.tagName);if(E==="OPTION"&&(R=R.parentElement),!R||!E||eO.indexOf(E)<0||je(R,r,s,i,!0))return;const A=R;if(A.classList.contains(o)||a&&A.matches(a))return;const k=Cl(R);let x=fo(A,E,k),M=!1;const X=sa({maskInputOptions:c,tagName:E,type:k}),V=Er(R,f,h,p,m,X);(k==="radio"||k==="checkbox")&&(M=R.checked),x=ds({isMasked:V,element:R,value:x,maskInputFn:u}),y(R,l?{text:x,isChecked:M,userTriggered:L}:{text:x,isChecked:M});const ee=R.name;k==="radio"&&ee&&M&&t.querySelectorAll(`input[type="radio"][name="${ee}"]`).forEach(T=>{if(T!==R){const W=ds({isMasked:V,element:T,value:fo(T,E,k),maskInputFn:u});y(T,l?{text:W,isChecked:!M,userTriggered:!1}:{text:W,isChecked:!M})}})}function y(S,R){const L=Cp.get(S);if(!L||L.text!==R.text||L.isChecked!==R.isChecked){Cp.set(S,R);const E=n.getId(S);Q(e)({...R,id:E})}}const $=(d.input==="last"?["change"]:["input","change"]).map(S=>Oe(S,Q(g),t)),C=t.defaultView;if(!C)return()=>{$.forEach(S=>S())};const B=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),N=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];return B&&B.set&&$.push(...N.map(S=>vg(S[0],S[1],{set(){Q(g)({target:this,isTrusted:!1})}},!1,C))),Q(()=>{$.forEach(S=>S())})}function mo(e){const t=[];function n(r,s){if(ii("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ii("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ii("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ii("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(o)}return s}return n(e,t)}function Yt(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function nO({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:Q((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=Yt(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Q((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Q((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Q((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Yt(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};oi("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(oi("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),oi("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),oi("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:Q((f,p,h)=>{const[m,g]=h,{id:y,styleId:b}=Yt(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:m,index:[...mo(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:Q((f,p,h)=>{const[m]=h,{id:g,styleId:y}=Yt(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,removes:[{index:[...mo(p),m]}]}),f.apply(p,h)})})}),Q(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Dg({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=s?.prototype?Object.getOwnPropertyDescriptor(s?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(o){const a=i.set?.call(this,o);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return a}}),Q(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function rO({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Q((a,c,u)=>{const[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);const{id:p,styleId:h}=Yt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:mo(c.parentRule)}),a.apply(c,u)})});const o=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Q((a,c,u)=>{const[d]=u;if(n.has(d))return o.apply(c,[d]);const{id:l,styleId:f}=Yt(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:mo(c.parentRule)}),a.apply(c,u)})}),Q(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=o})}function sO({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:o}){const a=Q(u=>ps(Q(d=>{const l=zs(d);if(!l||je(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),i.media||500)),c=[Oe("play",a(Zn.Play),o),Oe("pause",a(Zn.Pause),o),Oe("seeked",a(Zn.Seeked),o),Oe("volumechange",a(Zn.VolumeChange),o),Oe("ratechange",a(Zn.RateChange),o)];return Q(()=>{c.forEach(u=>u())})}function iO({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){const l=new i(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const o=xl(t.fonts,"add",function(a){return function(c){return oa(Q(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),Q(()=>{r.forEach(a=>a())})}function oO(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=Q(()=>{const u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:y}=p;je(h,r,s,i,!0)||je(g,r,s,i,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:y})}o({ranges:d})});return c(),Oe("selectionchange",c)}function aO({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:xl(n.customElements,"define",function(s){return function(i,o,a){try{t({define:{name:i}})}catch{}return s.apply(this,[i,o,a])}})}function cO(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Pg(e,e.doc));const s=XM(e),i=QM(e),o=Lg(e),a=ZM(e,{win:n}),c=tO(e),u=sO(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=nO(e,{win:n}),l=Dg(e,e.doc),f=rO(e,{win:n}),e.collectFonts&&(p=iO(e)));const h=oO(e),m=aO(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return Q(()=>{sr.forEach(y=>y.reset()),r?.disconnect(),s(),i(),o(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(y=>y())})}function ii(e){return typeof window[e]<"u"}function oi(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class zc{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const i=r||this.getIdToRemoteIdMap(t),o=s||this.getRemoteIdToIdMap(t);let a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class uO{constructor(){this.crossOriginIframeMirror=new zc(Al),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class lO{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new zc(Al),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new zc(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=Ml(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case G.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:G.IncrementalSnapshot,data:{source:H.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case G.Meta:case G.Load:case G.DomContentLoaded:return!1;case G.Plugin:return n;case G.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case G.IncrementalSnapshot:switch(n.data.source){case H.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(r.node,s)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.Drag:case H.TouchMove:case H.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case H.ViewportResize:return!1;case H.MediaInteraction:case H.MouseInteraction:case H.Scroll:case H.CanvasMutation:case H.Input:return this.replaceIds(n.data,t,["id"]),n;case H.StyleSheetRule:case H.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case H.Font:return n;case H.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case H.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Se.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class dO{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class fO{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!es(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Pg({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Lg({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),oa(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Dg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=Ml(t),r=GM(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(xl(t.prototype,"attachShadow",function(s){return function(i){const o=s.call(this,i);return this.shadowRoot&&Og(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Ap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pO=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ai=0;ai<Ap.length;ai++)pO[Ap.charCodeAt(ai)]=ai;class xp{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class hO{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new BM,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),s.push({styleId:o,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:_g(a),index:c}))})),r.styleIds.push(o)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class mO{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,jM(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let he,_o;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const et=pM();function $t(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:$,maskTextFn:C,maxCanvasSize:B=null,packFn:N,sampling:S={},dataURLOptions:R={},mousemoveWait:L,recordDOM:E=!0,recordCanvas:A=!1,recordCrossOriginIframes:k=!1,recordAfter:x=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:M=!1,collectFonts:X=!1,inlineImages:V=!1,plugins:ee,keepIframeSrcFn:T=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:v,onMutation:z,getCanvasManager:se}=e;JM(v);const te=k?window.parent===window:!0;let ge=!1;if(!te)try{window.parent.document&&(ge=!1)}catch{ge=!0}if(te&&!t)throw new Error("emit function is required");if(!te&&!ge)return()=>{};L!==void 0&&S.mousemove===void 0&&(S.mousemove=L),et.reset();const xe=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},jt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};UM();let Ne,Le=0;const ut=Y=>{for(const He of ee||[])He.eventProcessor&&(Y=He.eventProcessor(Y));return N&&!ge&&(Y=N(Y)),Y};he=(Y,He)=>{const J=Y;if(J.timestamp=ho(),sr[0]?.isFrozen()&&J.type!==G.FullSnapshot&&!(J.type===G.IncrementalSnapshot&&J.data.source===H.Mutation)&&sr.forEach(Ie=>Ie.unfreeze()),te)t?.(ut(J),He);else if(ge){const Ie={type:"rrweb",event:ut(J),origin:window.location.origin,isCheckout:He};window.parent.postMessage(Ie,"*")}if(J.type===G.FullSnapshot)Ne=J,Le=0;else if(J.type===G.IncrementalSnapshot){if(J.data.source===H.Mutation&&J.data.isAttachIframe)return;Le++;const Ie=r&&Le>=r,re=n&&Ne&&J.timestamp-Ne.timestamp>n;(Ie||re)&&lt(!0)}};const zt=Y=>{he({type:G.IncrementalSnapshot,data:{source:H.Mutation,...Y}})},Lr=Y=>he({type:G.IncrementalSnapshot,data:{source:H.Scroll,...Y}}),qs=Y=>he({type:G.IncrementalSnapshot,data:{source:H.CanvasMutation,...Y}}),Dr=Y=>he({type:G.IncrementalSnapshot,data:{source:H.AdoptedStyleSheet,...Y}}),ie=new hO({mutationCb:zt,adoptedStyleSheetCb:Dr}),fe=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new uO:new lO({mirror:et,mutationCb:zt,stylesheetManager:ie,recordCrossOriginIframes:k,wrappedEmit:he});for(const Y of ee||[])Y.getMirror&&Y.getMirror({nodeMirror:et,crossOriginIframeMirror:fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:fe.crossOriginIframeStyleMirror});const qe=new mO,Te=gO(se,{mirror:et,win:window,mutationCb:Y=>he({type:G.IncrementalSnapshot,data:{source:H.CanvasMutation,...Y}}),recordCanvas:A,blockClass:s,blockSelector:i,unblockSelector:o,maxCanvasSize:B,sampling:S.canvas,dataURLOptions:R,errorHandler:v}),Ce=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new dO:new fO({mutationCb:zt,scrollCb:Lr,bypassOptions:{onMutation:z,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:xe,dataURLOptions:R,maskAttributeFn:b,maskTextFn:C,maskInputFn:$,recordCanvas:A,inlineImages:V,sampling:S,slimDOMOptions:jt,iframeManager:fe,stylesheetManager:ie,canvasManager:Te,keepIframeSrcFn:T,processedNodeManager:qe,ignoreCSSAttributes:W},mirror:et}),lt=(Y=!1)=>{if(!E)return;he({type:G.Meta,data:{href:window.location.href,width:Rg(),height:kg()}},Y),ie.reset(),Ce.init(),sr.forEach(J=>J.lock());const He=DM(document,{mirror:et,blockClass:s,blockSelector:i,unblockSelector:o,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:xe,maskAttributeFn:b,maskInputFn:$,maskTextFn:C,slimDOM:jt,dataURLOptions:R,recordCanvas:A,inlineImages:V,onSerialize:J=>{xg(J,et)&&fe.addIframe(J),Ng(J,et)&&ie.trackLinkElement(J),Wc(J)&&Ce.addShadowRoot(J.shadowRoot,document)},onIframeLoad:(J,Ie)=>{fe.attachIframe(J,Ie),J.contentWindow&&Te.addWindow(J.contentWindow),Ce.observeAttachShadow(J)},onStylesheetLoad:(J,Ie)=>{ie.attachLinkElement(J,Ie)},onBlockedImageLoad:(J,Ie,{width:re,height:Fr})=>{zt({adds:[],removes:[],texts:[],attributes:[{id:Ie.id,attributes:{style:{width:`${re}px`,height:`${Fr}px`}}}]})},keepIframeSrcFn:T,ignoreCSSAttributes:W});if(!He)return console.warn("Failed to snapshot the document");he({type:G.FullSnapshot,data:{node:He,initialOffset:wg(window)}}),sr.forEach(J=>J.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ie.adoptStyleSheets(document.adoptedStyleSheets,et.getId(document))};_o=lt;try{const Y=[],He=Ie=>Q(cO)({onMutation:z,mutationCb:zt,mousemoveCb:(re,Fr)=>he({type:G.IncrementalSnapshot,data:{source:Fr,positions:re}}),mouseInteractionCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.MouseInteraction,...re}}),scrollCb:Lr,viewportResizeCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.ViewportResize,...re}}),inputCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.Input,...re}}),mediaInteractionCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.MediaInteraction,...re}}),styleSheetRuleCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.StyleSheetRule,...re}}),styleDeclarationCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.StyleDeclaration,...re}}),canvasMutationCb:qs,fontCb:re=>he({type:G.IncrementalSnapshot,data:{source:H.Font,...re}}),selectionCb:re=>{he({type:G.IncrementalSnapshot,data:{source:H.Selection,...re}})},customElementCb:re=>{he({type:G.IncrementalSnapshot,data:{source:H.CustomElement,...re}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:xe,inlineStylesheet:h,sampling:S,recordDOM:E,recordCanvas:A,inlineImages:V,userTriggeredOnInput:M,collectFonts:X,doc:Ie,maskAttributeFn:b,maskInputFn:$,maskTextFn:C,keepIframeSrcFn:T,blockSelector:i,unblockSelector:o,slimDOMOptions:jt,dataURLOptions:R,mirror:et,iframeManager:fe,stylesheetManager:ie,shadowDomManager:Ce,processedNodeManager:qe,canvasManager:Te,ignoreCSSAttributes:W,plugins:ee?.filter(re=>re.observer)?.map(re=>({observer:re.observer,options:re.options,callback:Fr=>he({type:G.Plugin,data:{plugin:re.name,payload:Fr}})}))||[]},{});fe.addLoadListener(Ie=>{try{Y.push(He(Ie.contentDocument))}catch(re){console.warn(re)}});const J=()=>{lt(),Y.push(He(document))};return document.readyState==="interactive"||document.readyState==="complete"?J():(Y.push(Oe("DOMContentLoaded",()=>{he({type:G.DomContentLoaded,data:{}}),x==="DOMContentLoaded"&&J()})),Y.push(Oe("load",()=>{he({type:G.Load,data:{}}),x==="load"&&J()},window))),()=>{Y.forEach(Ie=>Ie()),qe.destroy(),_o=void 0,KM()}}catch(Y){console.warn(Y)}}function _O(e){if(!_o)throw new Error("please take full snapshot after start recording");_o(e)}$t.mirror=et;$t.takeFullSnapshot=_O;function gO(e,t){try{return e?e(t):new xp}catch{return console.warn("Unable to initialize CanvasManager"),new xp}}var Np;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Np||(Np={}));const yO=3,SO=5;function Ol(e){return e>9999999999?e:e*1e3}function za(e){return e>9999999999?e/1e3:e}function Gs(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:G.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:wt(t,10,1e3)}}),t.category==="console")))}const bO="button,a";function Fg(e){return e.closest(bO)||e}function Ug(e){const t=Bg(e);return!t||!(t instanceof Element)?t:Fg(t)}function Bg(e){return EO(e)?e.target:e}function EO(e){return typeof e=="object"&&!!e&&"target"in e}let Jt;function TO(e){return Jt||(Jt=[],IO()),Jt.push(e),()=>{const t=Jt?Jt.indexOf(e):-1;t>-1&&Jt.splice(t,1)}}function IO(){nx(le,"open",function(e){return function(...t){if(Jt)try{Jt.forEach(n=>n())}catch{}return e.apply(le,t)}})}const vO=new Set([H.Mutation,H.StyleSheetRule,H.StyleDeclaration,H.AdoptedStyleSheet,H.CanvasMutation,H.Selection,H.MediaInteraction]);function wO(e,t,n){e.handleClick(t,n)}class kO{constructor(t,n,r=Gs){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=TO(()=>{this._lastMutation=Mp()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(CO(n,this._ignoreSelector)||!AO(t))return;const r={timestamp:za(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=za(t)}registerScroll(t=Date.now()){this._lastScroll=za(t)}registerClick(t){const n=Fg(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Mp();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:o,clickBreadcrumb:a}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:le.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:o||1}};this._addBreadcrumbEvent(n,d);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:le.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Bs(()=>this._checkClicks(),1e3)}}const RO=["A","BUTTON","INPUT"];function CO(e,t){return!!(!RO.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function AO(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Mp(){return Date.now()/1e3}function xO(e,t){try{if(!NO(t))return;const{source:n}=t.data;if(vO.has(n)&&e.registerMutation(t.timestamp),n===H.Scroll&&e.registerScroll(t.timestamp),MO(t)){const{type:r,id:s}=t.data,i=$t.mirror.getNode(s);i instanceof HTMLElement&&r===Me.Click&&e.registerClick(i)}}catch{}}function NO(e){return e.type===yO}function MO(e){return e.data.source===H.MouseInteraction}function pt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var $l=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))($l||{});const OO=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function $O(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(OO.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const PO=e=>t=>{if(!e.isEnabled())return;const n=LO(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&s?.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&wO(e.clickDetector,n,Ug(t.event)),Gs(e,n)};function Hg(e,t){const n=$t.mirror.getId(e),r=n&&$t.mirror.getNode(n),s=r&&$t.mirror.getMeta(r),i=s&&FO(s)?s:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===$l.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:$O(i.attributes)}}:{}}}function LO(e){const{target:t,message:n}=DO(e);return pt({category:`ui.${e.name}`,...Hg(t,n)})}function DO(e){const t=e.name==="click";let n,r=null;try{r=t?Ug(e.event):Bg(e.event),n=Tl(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function FO(e){return e.type===$l.Element}function UO(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=BO(t);n&&Gs(e,n)}function BO(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:o}=e;if(!o||HO(o)||!i)return null;const a=t||r||s,c=i.length===1;if(!a&&c)return null;const u=Tl(o,{maxStringLength:200})||"<unknown>",d=Hg(o,u);return pt({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function HO(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const WO={resource:VO,paint:GO,navigation:qO};function Ga(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function jO(e){return e.map(zO).filter(Boolean)}function zO(e){const t=WO[e.entryType];return t?t(e):null}function Tr(e){return((px()||le.performance.timeOrigin)+e)/1e3}function GO(e){const{duration:t,entryType:n,name:r,startTime:s}=e,i=Tr(s);return{type:n,name:r,start:i,end:i+t,data:void 0}}function qO(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:Tr(p),end:Tr(i),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:o,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function VO(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Tr(i),end:Tr(s),name:r,data:{size:u,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function YO(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return Pl(e,"largest-contentful-paint",n)}function JO(e){return e.sources!==void 0}function KO(e){const t=[],n=[];for(const r of e.entries)if(JO(r)){const s=[];for(const i of r.sources)if(i.node){n.push(i.node);const o=$t.mirror.getId(i.node);o&&s.push(o)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return Pl(e,"cumulative-layout-shift",n,t)}function XO(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return Pl(e,"interaction-to-next-paint",n)}function Pl(e,t,n,r){const s=e.value,i=e.rating,o=Tr(s);return{type:"web-vital",name:t,start:o,end:o,data:{value:s,size:s,rating:i,nodeIds:n?n.map(a=>$t.mirror.getId(a)):void 0,attributions:r}}}function QO(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Fn(s,n))}),r.push(fl(Ga(YO,e)),dl(Ga(KO,e)),L_(Ga(XO,e))),()=>{r.forEach(s=>s())}}const D=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ZO='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function e$(){const e=new Blob([ZO]);return URL.createObjectURL(e)}const Op=["log","warn","error"],Mi="[Replay] ";function qa(e,t="info"){HN({category:"console",data:{logger:"replay"},level:t,message:`${Mi}${e}`},{level:t})}function t$(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return D?(Op.forEach(r=>{n[r]=(...s)=>{Ot[r](Mi,...s),t&&qa(s.join(""),WN(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),Ot.error(Mi,r),e?wN(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&qa(r,"error")},n.infoTick=(...r)=>{Ot.log(Mi,...r),t&&setTimeout(()=>qa(r[0]),0)}):Op.forEach(r=>{n[r]=()=>{}}),n}const F=t$();class Ll extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Rl}.`)}}class Wg{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Rl)throw new Ll;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Ol(t):null}}class n${constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){D&&F.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){D&&F.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class r${constructor(t){this._worker=new n$(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Ol(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Rl?Promise.reject(new Ll):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{D&&F.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class s${constructor(t){this._fallback=new Wg,this._compression=new r$(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){D&&F.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const i of t)s.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(i){D&&F.exception(i,"Failed to add events when switching buffers.")}}}function i$({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=o$(t);if(n)return n}return D&&F.log("Using simple buffer"),new Wg}function o$(e){try{const t=e||a$();if(!t)return;D&&F.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new s$(n)}catch(t){D&&F.exception(t,"Failed to create compression worker")}}function a$(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?e$():""}function Dl(){try{return"sessionStorage"in le&&!!le.sessionStorage}catch{return!1}}function c$(e){u$(),e.session=void 0}function u$(){if(Dl())try{le.sessionStorage.removeItem(wl)}catch{}}function jg(e){return e===void 0?!1:Math.random()<e}function aa(e){if(Dl())try{le.sessionStorage.setItem(wl,JSON.stringify(e))}catch{}}function zg(e){const t=Date.now(),n=e.id||rn(),r=e.started||t,s=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:o,previousSessionId:a,dirty:c}}function l$(e,t){return jg(e)?"session":t?"buffer":!1}function $p({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=l$(e,t),i=zg({sampled:s,previousSessionId:r});return n&&aa(i),i}function d$(){if(!Dl())return null;try{const e=le.sessionStorage.getItem(wl);if(!e)return null;const t=JSON.parse(e);return D&&F.infoTick("Loading existing session"),zg(t)}catch{return null}}function Gc(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function Gg(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Gc(e.started,t,r)||Gc(e.lastActivity,n,r)}function qg(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!Gg(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Va({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&d$();return s?qg(s,{sessionIdleExpire:e,maxReplayDuration:t})?(D&&F.infoTick("Session in sessionStorage is expired, creating new one..."),$p(r,{previousSessionId:s.id})):s:(D&&F.infoTick("Creating new session"),$p(r,{previousSessionId:n}))}function f$(e){return e.type===G.Custom}function Fl(e,t,n){return Yg(e,t)?(Vg(e,t,n),!0):!1}function p$(e,t,n){return Yg(e,t)?Vg(e,t,n):Promise.resolve(null)}async function Vg(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=e.getOptions(),o=h$(t,i.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(i){const o=i&&i instanceof Ll,a=o?"addEventSizeExceeded":"addEvent",c=ct();if(c){const u=o?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(o&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function Yg(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ol(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(D&&F.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function h$(e,t){try{if(typeof t=="function"&&f$(e))return t(e)}catch(n){return D&&F.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function Ul(e){return!e.type}function qc(e){return e.type==="transaction"}function m$(e){return e.type==="replay_event"}function Pp(e){return e.type==="feedback"}function _$(e){return(t,n)=>{if(!e.isEnabled()||!Ul(t)&&!qc(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(qc(t)){g$(e,t);return}y$(e,t)}}}function g$(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function y$(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Bs(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function S$(e){return t=>{!e.isEnabled()||!Ul(t)||b$(e,t)}}function b$(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=pt({category:"replay.hydrate-error",data:{url:tx()}});Gs(e,r)}}function E$(e){const t=ct();t&&t.on("beforeAddBreadcrumb",n=>T$(e,n))}function T$(e,t){if(!e.isEnabled()||!Jg(t))return;const n=I$(t);n&&Gs(e,n)}function I$(e){return!Jg(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?v$(e):pt(e)}function v$(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return pt(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>si?(n=!0,`${s.slice(0,si)}`):s;if(typeof s=="object")try{const i=wt(s,7);return JSON.stringify(i).length>si?(n=!0,`${JSON.stringify(i,null,2).slice(0,si)}`):i}catch{}return s});return pt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Jg(e){return!!e.category}function w$(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function Kg(){const e=js().getPropagationContext().dsc;e&&delete e.replay_id;const t=pg();if(t){const n=mg(t);delete n.replay_id}}function k$(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:G.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function R$(e,t){return e.recordingMode!=="buffer"||t.message===kl||!t.exception||t.type?!1:jg(e.getOptions().errorSampleRate)}function C$(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(m$(t))return delete t.breadcrumbs,t;if(!Ul(t)&&!qc(t)&&!Pp(t))return t;if(!e.checkAndHandleExpiredSession())return Kg(),t;if(Pp(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),k$(e,t),t;if(w$(t,n)&&!e.getOptions()._experiments.captureExceptions)return D&&F.log("Ignoring error from rrweb internals",t),null;const s=R$(e,t);if((s||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),s&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){const o=e.session;o.dirty=!0,e.getOptions().stickySession&&aa(o)}return t},{id:"Replay"})}function ca(e,t){return t.map(({type:n,start:r,end:s,name:i,data:o})=>{const a=e.throttledAddEvent({type:G.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function A$(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function x$(e){return t=>{if(!e.isEnabled())return;const n=A$(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(ca(e,[n]),!1)))}}function N$(e,t){return D&&e.getOptions()._experiments.traceInternals?!1:LN(t,ct())}function Xg(e,t){e.isEnabled()&&t!==null&&(N$(e,t.name)||e.addUpdate(()=>(ca(e,[t]),!0)))}function ua(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=j_(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function Qg(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function go(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Zg(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:i,statusCode:o,request:a,response:c}}}function hs(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function sn(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:i}=M$(n);return r.body=s,i?.length&&(r._meta={warnings:i}),r}function Vc(e,t){return Object.entries(e).reduce((n,[r,s])=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=s),n},{})}function M$(e){if(!e||typeof e!="string")return{body:e};const t=e.length>mp,n=O$(e);if(t){const r=e.slice(0,mp);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function O$(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function yo(e,t){const n=$$(e);return ox(n,t)}function $$(e,t=le.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(le.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function P$(e,t,n){try{const r=await D$(e,t,n),s=Zg("resource.fetch",r);Xg(n.replay,s)}catch(r){D&&F.exception(r,"Failed to capture fetch breadcrumb")}}function L$(e,t){const{input:n,response:r}=t,s=n?_l(n):void 0,i=ua(s),o=r?Qg(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function D$(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r}=t,{url:o,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=yo(o,n.networkDetailAllowUrls)&&!yo(o,n.networkDetailDenyUrls),f=l?F$(n,t.input,u):hs(u),p=await U$(l,n,t.response,d);return{startTimestamp:s,endTimestamp:i,url:o,method:a,statusCode:c,request:f,response:p}}function F$({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?W$(n,t):{};if(!e)return sn(s,r,void 0);const i=_l(n),[o,a]=co(i,F),c=sn(s,r,o);return a?go(c,a):c}async function U$(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return hs(s);const i=r?ey(r.headers,n):{};if(!r||!t&&s!==void 0)return sn(i,s,void 0);const[o,a]=await H$(r),c=B$(o,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:i});return a?go(c,a):c}function B$(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const i=e?.length&&n===void 0?ua(e):n;return r?t?sn(s,i,e):sn(s,i,void 0):hs(i)}catch(i){return D&&F.exception(i,"Failed to serialize response body"),sn(s,n,void 0)}}async function H$(e){const t=j$(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await z$(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(D&&F.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(D&&F.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function ey(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function W$(e,t){return e.length===1&&typeof e[0]!="string"?Lp(e[0],t):e.length===2?Lp(e[1],t):{}}function Lp(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?ey(n,t):Array.isArray(n)?{}:Vc(n,t):{}}function j$(e){try{return e.clone()}catch(t){D&&F.exception(t,"Failed to clone response body")}}function z$(e){return new Promise((t,n)=>{const r=Bs(()=>n(new Error("Timeout while trying to read response body")),500);G$(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function G$(e){return await e.text()}async function q$(e,t,n){try{const r=Y$(e,t,n),s=Zg("resource.xhr",r);Xg(n.replay,s)}catch(r){D&&F.exception(r,"Failed to capture xhr breadcrumb")}}function V$(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=ua(r),i=n.getResponseHeader("content-length")?Qg(n.getResponseHeader("content-length")):X$(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),i!==void 0&&(e.data.response_body_size=i)}function Y$(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:i=r,input:o,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!yo(c,n.networkDetailAllowUrls)||yo(c,n.networkDetailDenyUrls)){const N=hs(l),S=hs(f);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:N,response:S}}const p=a[kt],h=p?Vc(p.request_headers,n.networkRequestHeaders):{},m=Vc(z_(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?co(o,F):[void 0],[b,$]=n.networkCaptureBodies?J$(a):[void 0],C=sn(h,l,g),B=sn(m,f,b);return{startTimestamp:s,endTimestamp:i,url:c,method:u,statusCode:d,request:y?go(C,y):C,response:$?go(B,$):B}}function J$(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return K$(e.response,e.responseType)}catch(n){t.push(n)}return D&&F.warn("Failed to get xhr response body",...t),[void 0]}function K$(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return D&&F.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return D&&F.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function X$(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return ua(n)}catch{return}}function Q$(e){const t=ct();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(c,u)=>Z$(a,c,u))}catch{}}function Z$(e,t,n){if(t.data)try{eP(t)&&nP(n)&&(V$(t,n),q$(t,n,e)),tP(t)&&rP(n)&&(L$(t,n),P$(t,n,e))}catch(r){D&&F.exception(r,"Error when enriching network breadcrumb")}}function eP(e){return e.category==="xhr"}function tP(e){return e.category==="fetch"}function nP(e){return e?.xhr}function rP(e){return e?.response}function sP(e){const t=ct();W_(PO(e)),Yo(x$(e)),E$(e),Q$(e);const n=C$(e);RN(n),t&&(t.on("beforeSendEvent",S$(e)),t.on("afterSendEvent",_$(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{const i=e.getSessionId();s?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function iP(e){try{return Promise.all(ca(e,[oP(le.performance.memory)]))}catch{return[]}}function oP(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function aP(e,t,n){return UN(e,t,{...n,setTimeoutImpl:Bs})}const ci=ke.navigator;function cP(){return/iPhone|iPad|iPod/i.test(ci?.userAgent??"")||/Macintosh/i.test(ci?.userAgent??"")&&ci?.maxTouchPoints&&ci?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function uP(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){D&&F.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&xO(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!Fl(e,n,s))return!0;if(!s)return!1;const i=e.session;if(dP(e,s),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){const o=e.eventBuffer.getEarliestTimestamp();o&&(D&&F.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&aa(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function lP(e){const t=e.getOptions();return{type:G.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function dP(e,t){!t||!e.session||e.session.segmentId!==0||Fl(e,lP(e),!1)}function fP(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function pP(e,t,n,r){return eN(nN(e,tN(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function hP({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function mP({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:s};e.emit("preprocessEvent",r,i);const o=await hN(e.getOptions(),r,i,t,e,ra());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},o}async function _P({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:i}){const o=hP({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=ct(),f=js(),p=l?.getTransport(),h=l?.getDsn();if(!l||!p||!h||!i.sampled)return Promise.resolve({});const m={type:qN,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await mP({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),D&&F.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;const y=pP(g,o,h,l.getOptions().tunnel);let b;try{b=await p.send(y)}catch(C){const B=new Error(kl);try{B.cause=C}catch{}throw B}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new ty(b.statusCode);const $=MN({},b);if(NN($,"replay"))throw new Bl($);return b}class ty extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Bl extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function ny(e,t={count:0,interval:QN}){const{recordingData:n,onError:r}=e;if(n.length)try{return await _P(e),!0}catch(s){if(s instanceof ty||s instanceof Bl)throw s;if(kN("Replays",{_retryCount:t.count}),r&&r(s),t.count>=ZN){const i=new Error(`${kl} - max retries exceeded`);try{i.cause=s}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{Bs(async()=>{try{await ny(e,t),i(!0)}catch(a){o(a)}},t.interval)})}}const ry="__THROTTLED",gP="__SKIPPED";function yP(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=t){const d=o;return o=!0,d?gP:ry}o=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class SP{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:VN,sessionIdleExpire:YN},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=aP(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=yP((o,a)=>p$(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(eM,r),timeout:r,scrollTimeout:tM,ignoreSelector:s?s.join(","):""}:void 0;if(i&&(this.clickDetector=new kO(this,i)),D){const o=t._experiments;F.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{le.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=pt({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=pt({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{UO(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){D&&F.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){D&&F.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",D&&F.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){D&&F.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){D&&F.log("Buffering is in progress, call `flush()` to save the replay");return}D&&F.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Va({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){D&&F.log("Buffering is in progress, call `flush()` to save the replay");return}D&&F.infoTick("Starting replay in buffer mode");const t=Va({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=$t({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:XN}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:uP(this),...cP(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{D&&F.log(`Stopping Replay${n?` triggered by ${n}`:""}`),Kg(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,c$(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),D&&F.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),D&&F.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();D&&F.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Gc(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${le.location.pathname}${le.location.hash}${le.location.search}`,n=`${le.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===ry){const s=pt({category:"replay.throttled"});this.addUpdate(()=>!Fl(this,{type:SO,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||pg(),n=t&&vl(t),s=(n&&us(n).data||{})[lg];if(!(!n||!s||!["route","custom"].includes(s)))return us(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=i$({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Va({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return qg(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{le.document.addEventListener("visibilitychange",this._handleVisibilityChange),le.addEventListener("blur",this._handleWindowBlur),le.addEventListener("focus",this._handleWindowFocus),le.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(sP(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=QO(this)}_removeListeners(){try{le.document.removeEventListener("visibilitychange",this._handleVisibilityChange),le.removeEventListener("blur",this._handleWindowBlur),le.removeEventListener("focus",this._handleWindowFocus),le.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||Gg(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){D&&F.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:G.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=jO(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(ca(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){D&&F.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await iP(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await ny({replayId:t,recordingData:i,segmentId:s,eventContext:r,session:this.session,timestamp:n,onError:o=>this.handleException(o)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=ct();if(r){const s=n instanceof Bl?"ratelimit_backoff":"send_error";r.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){D&&F.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,o=s>this._options.maxReplayDuration+5e3;if(i||o){D&&F.log(`Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&D&&F.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&aa(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{const c=fP(a.target),u=n.join(",");return c?.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=s&&r>s;if(r>i||o){const a=pt({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(a)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Wr(e,t){return[...e,...t].join(",")}function bP({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const i=["base","iframe[srcdoc]:not([src])"],o=Wr(e,[".sentry-mask","[data-sentry-mask]"]),a=Wr(t,[]);return{maskTextSelector:o,unmaskTextSelector:a,blockSelector:Wr(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Wr(r,[]),ignoreSelector:Wr(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function EP({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const Dp='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',TP=["content-length","content-type","accept"],IP=Symbol.for("sentry__originalRequestBody");let Fp=!1,Up=!1;function vP(){if(typeof Request>"u"||Up)return;const e=Request;try{const t=function(n,r){const s=new e(n,r);return r?.body!=null&&(s[IP]=r.body),s};t.prototype=e.prototype,ke.Request=t,Up=!0}catch{}}const KD=(e=>new wP(e));class wP{constructor({flushMinDelay:t=JN,flushMaxDelay:n=KN,minReplayDuration:r=nM,maxReplayDuration:s=_p,stickySession:i=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:$=[],networkResponseHeaders:C=[],mask:B=[],maskAttributes:N=["title","placeholder","aria-label"],unmask:S=[],block:R=[],unblock:L=[],ignore:E=[],maskFn:A,beforeAddRecordingEvent:k,beforeErrorSampling:x,onError:M,attachRawBodyFromRequest:X=!1}={}){this.name="Replay";const V=bP({mask:B,unmask:S,block:R,unblock:L,ignore:E});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:A,maskInputFn:A,maskAttributeFn:(ee,T,W)=>EP({maskAttributes:N,maskAllText:u,privacyOptions:V,key:ee,value:T,el:W}),...V,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,rM),maxReplayDuration:Math.min(s,_p),stickySession:i,useCompression:o,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:Bp($),networkResponseHeaders:Bp(C),beforeAddRecordingEvent:k,beforeErrorSampling:x,onError:M,attachRawBodyFromRequest:X,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Dp}`:Dp,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&hp())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Fp}set _isInitialized(t){Fp=t}afterAllSetup(t){!hp()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&vP(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=kP(this._initialOptions,t);this._replay=new SP({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function kP(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=ip(n.replaysSessionSampleRate),i=ip(n.replaysOnErrorSampleRate);return s==null&&i==null&&yl(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),i!=null&&(r.errorSampleRate=i),r}function Bp(e){return[...TP,...e.map(t=>t.toLowerCase())]}function XD(){return ct()?.getIntegrationByName("Replay")}var RP=Object.defineProperty,CP=(e,t,n)=>t in e?RP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hp=(e,t,n)=>CP(e,typeof t!="symbol"?t+"":t,n);class AP{constructor(){Hp(this,"idNodeMap",new Map),Hp(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function xP(){return new AP}function NP(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function Yc(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Yc(e.parentNode,t,n,r+1)}function Wp(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(NP(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const er=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let jp={map:{},getId(){return console.error(er),-1},getNode(){return console.error(er),null},removeNodeFromMap(){console.error(er)},has(){return console.error(er),!1},reset(){console.error(er)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(jp=new Proxy(jp,{get(e,t,n){return t==="map"&&console.error(er),Reflect.get(e,t,n)}}));function Hl(e,t,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(o){iy(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Hl(e,t,i||{},!0)}function Wl(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function MP(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function la(e,t,n,r,s){if(!e)return!1;const i=MP(e);if(!i)return!1;const o=Wp(t,n),a=Yc(i,o);let c=-1;return a<0?!1:(r&&(c=Yc(i,Wp(null,r))),a>-1&&c<0?!0:a<c)}const zp={};function sy(e){const t=zp[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(s)}catch{}return zp[e]=r.bind(window)}function gn(...e){return sy("requestAnimationFrame")(...e)}function iy(...e){return sy("setTimeout")(...e)}var Ir=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ir||{});let Oi;function OP(e){Oi=e}const Ya=e=>Oi?(...n)=>{try{return e(...n)}catch(r){if(Oi&&Oi(r)===!0)return()=>{};throw r}}:e;var ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$P=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ui=0;ui<ir.length;ui++)$P[ir.charCodeAt(ui)]=ui;var PP=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=ir[t[n]>>2],s+=ir[(t[n]&3)<<4|t[n+1]>>4],s+=ir[(t[n+1]&15)<<2|t[n+2]>>6],s+=ir[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Gp=new Map;function LP(e,t){let n=Gp.get(e);return n||(n=new Map,Gp.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const oy=(e,t,n)=>{if(!e||!(cy(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=LP(n,r);let i=s.indexOf(e);return i===-1&&(i=s.length,s.push(e)),i};function $i(e,t,n){if(e instanceof Array)return e.map(r=>$i(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=PP(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[$i(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[$i(e.data,t,n),e.width,e.height]};if(cy(e,t)||typeof e=="object"){const r=e.constructor.name,s=oy(e,t,n);return{rr_type:r,index:s}}}}return e}const ay=(e,t,n)=>e.map(r=>$i(r,t,n)),cy=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function DP(e,t,n,r,s){const i=[],o=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of o)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Wl(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return la(this.canvas,n,r,s,!0)||iy(()=>{const l=ay(d,t,this);e(this.canvas,{type:Ir["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{const c=Hl(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Ir["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function FP(e){return e==="experimental-webgl"?"webgl":e}function qp(e,t,n,r,s){const i=[];try{const o=Wl(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!la(this,t,n,r,!0)){const d=FP(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}function Vp(e,t,n,r,s,i,o,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=Wl(e,d,function(f){return function(...p){const h=f.apply(this,p);if(oy(h,a,this),"tagName"in this.canvas&&!la(this.canvas,r,s,i,!0)){const m=ay(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch{const l=Hl(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function UP(e,t,n,r,s,i){const o=[];return o.push(...Vp(t.WebGLRenderingContext.prototype,Ir.WebGL,e,n,r,s,i,t)),typeof t.WebGL2RenderingContext<"u"&&o.push(...Vp(t.WebGL2RenderingContext.prototype,Ir.WebGL2,e,n,r,s,i,t)),()=>{o.forEach(a=>a())}}const BP='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function HP(){const e=new Blob([BP]);return URL.createObjectURL(e)}class WP{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:s,recordCanvas:i,errorHandler:o}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,o&&OP(o),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(s),!n&&Ya(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:i,recordCanvas:o,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}Ya(()=>{if(o&&n==="all"&&this.initCanvasMutationObserver(t,r,s,i),o&&typeof n=="number"){const c=qp(t,r,s,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}gn(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(HP());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:i,type:o,width:a,height:c}=r;this.mutationCb({id:s,type:Ir["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:o}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=gn(n)};t=gn(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,s){const i=qp(t,n,r,s,!1),o=DP(this.processMutation.bind(this),t,n,r,s),a=UP(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{i(),o(),a()})}getCanvasElements(t,n,r){const s=[],i=o=>{o.querySelectorAll("canvas").forEach(a=>{la(a,t,n,r)||s.push(a)})};for(const o of this.windows){const a=o.deref();let c;try{c=a&&a.document}catch{}c&&i(c)}for(const o of this.shadowDoms){const a=o.deref();a&&i(a)}return s}takeSnapshot(t,n,r){const{sampling:s,blockClass:i,blockSelector:o,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(s==="all"?2:s||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,o,a)).forEach(h=>{const m=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(m))){if(this.snapshotInProgressMap.set(m,!0),!n&&["webgl","webgl2"].includes(h.__context)){const g=h.getContext(h.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(h).then(g=>{this.worker?.postMessage({id:m,bitmap:g,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[g])}).catch(g=>{Ya(()=>{throw this.snapshotInProgressMap.delete(m),g})()})}}),!0)}startPendingCanvasMutationFlusher(){gn(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,gn(t)};gn(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),gn(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(o=>{const{type:a,...c}=o;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(t)}}try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}xP();var Yp;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Yp||(Yp={}));const Jp={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},jP="ReplayCanvas",li=1280,zP=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,li):li,n?Math.min(n,li):li]};let s,i;const o=new Promise(a=>i=a);return{name:jP,getOptions(){const{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{const l=new WP({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return s=l,i(l),l},...Jp[a]||Jp.medium}},async snapshot(a,c){(s||await o).snapshot(a,c)}}}),QD=zP;function GP(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function uy(e){try{return new URL(e,P.location.origin).href}catch{return}}function qP(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function ly(e){try{return new Headers(e)}catch{return}}const Kp=new WeakMap,Ja=new Map,dy={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function VP(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...dy,...t},d=typeof i=="function"?i:h=>!0,l=h=>YP(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(m=>{if(m.op==="http.client"){const g=Ja.get(m.span_id);g&&(m.timestamp=g/1e3,Ja.delete(m.span_id))}}),h)),s&&Vw(h=>{if(h.response){const m=Kp.get(h.response);m&&h.endTimestamp&&Ja.set(m,h.endTimestamp)}}),qu(h=>{const m=Uv(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Kp.set(h.response,h.fetchData.__span),m){const g=uy(h.fetchData.url),y=g?ar(g).host:void 0;m.setAttributes({"http.url":g?Zt(g):void 0,"server.address":y}),o&&Xp(m),c?.(m,{headers:h.headers})}})),r&&ml(h=>{const m=JP(h,d,l,f,p,u);m&&(o&&Xp(m),c?.(m,{headers:ly(h.xhr.__sentry_xhr_v3__?.request_headers)}))})}function Xp(e){const{url:t}=Z(e).data;if(!t||typeof t!="string")return;const n=Fn("resource",({entries:r})=>{r.forEach(s=>{qP(s)&&s.name.endsWith(t)&&(e.setAttributes(H_(s)),setTimeout(n))})})}function YP(e,t){const n=Ts();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const i=r.origin===s;return t?xt(r.toString(),t)||i&&xt(r.pathname,t):i}else{const r=!!e.match(/^\/(?!\/)/);return t?xt(e,t):r}}function JP(e,t,n,r,s,i){const o=e.xhr,a=o?.[kt];if(!o||o.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=Je()&&t(c);if(e.endTimestamp&&d){const y=o.__sentry_xhr_span_id__;if(!y)return;const b=r[y];b&&a.status_code!==void 0&&(Fi(b,a.status_code),b.end(),i?.(b,{headers:ly(z_(o)),error:e.error}),delete r[y]);return}const l=uy(c),f=ar(l||c),p=Zt(Rm(c)),h=!!Qe(),m=d&&h?No({name:`${u} ${p}`,attributes:{url:Zt(c),type:"xhr","http.method":u,"http.url":l?Zt(l):void 0,"server.address":f?.host,[Ee]:"auto.http.browser",[Ue]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new Ft;o.__sentry_xhr_span_id__=m.spanContext().spanId,r[o.__sentry_xhr_span_id__]=m,n(c)&&KP(o,Je()&&h?m:void 0,s);const g=O();return g&&g.emit("beforeOutgoingRequestSpan",m,e),m}function KP(e,t,n){const{"sentry-trace":r,baggage:s,traceparent:i}=Cm({span:t,propagateTraceparent:n});r&&XP(e,r,s,i)}function XP(e,t,n,r){const s=e.__sentry_xhr_v3__?.request_headers;if(!(s?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!s?.traceparent&&e.setRequestHeader("traceparent",r),n){const i=s?.baggage;(!i||!GP(i))&&e.setRequestHeader("baggage",n)}}catch{}}function QP(){P.document?P.document.addEventListener("visibilitychange",()=>{const e=Qe();if(!e)return;const t=Ae(e);if(P.document.hidden&&t){const n="cancelled",{op:r,status:s}=Z(t);I&&_.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:K,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):I&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const ZP=3600,fy="sentry_previous_trace",eL="sentry.previous_trace";function tL(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?sL():void 0;e.on("spanStart",o=>{if(Ae(o)!==o)return;const a=ne().getPropagationContext();s=nL(s,o,a),r&&rL(s)});let i=!0;n&&e.on("beforeSampling",o=>{if(!s)return;const a=ne(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(Jc(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=Jc(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[Uh]:s.sampleRate}})}function nL(e,t,n){const r=Z(t);function s(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[pu])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=ZP&&(I&&_.log(`Adding previous_trace \`${JSON.stringify(o)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:o,attributes:{[tE]:"previous_trace"}}),t.setAttribute(eL,`${o.traceId}-${o.spanId}-${Jc(o)?1:0}`)),i)}function rL(e){try{P.sessionStorage.setItem(fy,JSON.stringify(e))}catch(t){I&&_.warn("Could not store previous trace in sessionStorage",t)}}function sL(){try{const e=P.sessionStorage?.getItem(fy);return JSON.parse(e)}catch{return}}function Jc(e){return e.traceFlags===1}const iL="BrowserTracing",oL={...Ti,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...dy},ZD=((e={})=>{const t={name:void 0,source:void 0},n=P.document,{enableInp:r,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:b,enableHTTPTimings:$,ignoreResourceSpans:C,ignorePerformanceApiSpans:B,instrumentPageLoad:N,instrumentNavigation:S,detectRedirects:R,linkPreviousTrace:L,consistentTraceSampling:E,enableReportPageLoaded:A,onRequestSpanStart:k,onRequestSpanEnd:x}={...oL,...e};let M,X,V;function ee(T,W,v=!0){const z=W.op==="pageload",se=W.name,te=d?d(W):W,ge=te.attributes||{};if(se!==te.name&&(ge[ft]="custom",te.attributes=ge),!v){const Ne=Hn();No({...te,startTime:Ne}).end(Ne);return}t.name=te.name,t.source=ge[ft];const xe=cm(te,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:z,beforeSpanEnd:Ne=>{M?.(),vR(Ne,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:C,ignorePerformanceApiSpans:B}),Zp(T,void 0);const Le=ne(),ut=Le.getPropagationContext();Le.setPropagationContext({...ut,traceId:xe.spanContext().traceId,sampled:fn(xe),dsc:gt(Ne)}),z&&(V=void 0)},trimIdleSpanEndTimestamp:!A});z&&A&&(V=xe),Zp(T,xe);function jt(){n&&["interactive","complete"].includes(n.readyState)&&T.emit("idleSpanEnableAutoFinish",xe)}z&&!A&&n&&(n.addEventListener("readystatechange",()=>{jt()}),jt())}return{name:iL,setup(T){if(wE(),M=gR({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:T}),r&&KR(),s&&LR(),o&&U.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?SR():i&&yR(),a&&bR(),R&&n){const v=()=>{X=be()};addEventListener("click",v,{capture:!0}),addEventListener("keydown",v,{capture:!0,passive:!0})}function W(){const v=ms(T);v&&!Z(v).timestamp&&(I&&_.log(`[Tracing] Finishing current active span with op: ${Z(v).op}`),v.setAttribute(is,"cancelled"),v.end())}T.on("startNavigationSpan",(v,z)=>{if(O()!==T)return;if(z?.isRedirect){I&&_.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ee(T,{op:"navigation.redirect",...v},!1);return}X=void 0,W(),Re().setPropagationContext({traceId:mt(),sampleRand:Math.random(),propagationSpanId:Je()?void 0:Nt()});const se=ne();se.setPropagationContext({traceId:mt(),sampleRand:Math.random(),propagationSpanId:Je()?void 0:Nt()}),se.setSDKProcessingMetadata({normalizedRequest:void 0}),ee(T,{op:"navigation",...v,parentSpan:null,forceTransaction:!0})}),T.on("startPageLoadSpan",(v,z={})=>{if(O()!==T)return;W();const se=z.sentryTrace||Qp("sentry-trace"),te=z.baggage||Qp("baggage"),ge=Kh(se,te),xe=ne();xe.setPropagationContext(ge),Je()||(xe.getPropagationContext().propagationSpanId=Nt()),xe.setSDKProcessingMetadata({normalizedRequest:Vu()}),ee(T,{op:"pageload",...v})}),T.on("endPageloadSpan",()=>{A&&V&&(V.setAttribute(is,"reportPageLoaded"),V.end())})},afterAllSetup(T){let W=Ts();if(L!=="off"&&tL(T,{linkPreviousTrace:L,consistentTraceSampling:E}),P.location){if(N){const v=fu();aL(T,{name:P.location.pathname,startTime:v?v/1e3:void 0,attributes:{[ft]:"url",[Ee]:"auto.pageload.browser"}})}S&&Yo(({to:v,from:z})=>{if(z===void 0&&W?.indexOf(v)!==-1){W=void 0;return}W=void 0;const se=$u(v),te=ms(T),ge=te&&R&&lL(te,X);cL(T,{name:se?.pathname||P.location.pathname,attributes:{[ft]:"url",[Ee]:"auto.navigation.browser"}},{url:v,isRedirect:ge})})}h&&QP(),a&&uL(T,l,f,p,t),r&&ZR(),VP(T,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,tracePropagationTargets:T.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:$,onRequestSpanStart:k,onRequestSpanEnd:x})}}});function aL(e,t,n){e.emit("startPageLoadSpan",t,n),ne().setTransactionName(t.name);const r=ms(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function cL(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const i=ne();return i.setTransactionName(t.name),r&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...Vu(),url:r}}),ms(e)}function Qp(e){return P.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function uL(e,t,n,r,s){const i=P.document;let o;const a=()=>{const c="ui.action.click",u=ms(e);if(u){const d=Z(u).op;if(["navigation","pageload"].includes(d)){I&&_.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(is,"interactionInterrupted"),o.end(),o=void 0),!s.name){I&&_.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=cm({name:s.name,op:c,attributes:{[ft]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}const py="_sentry_idleSpan";function ms(e){return e[py]}function Zp(e,t){Ge(e,py,t)}const eh=1.5;function lL(e,t){const n=Z(e),r=Hn(),s=n.start_timestamp;return!(r-s>eh||t&&r-t<=eh)}function eF(e=O()){e?.emit("endPageloadSpan")}function tF(e){const t=Qe();if(t===e)return;const n=ne();e.end=new Proxy(e.end,{apply(r,s,i){return _t(n,t),Reflect.apply(r,s,i)}}),_t(n,e)}function vr(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function dL(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=vr(n);return s=>r.then(i=>s(i.transaction(t,"readwrite").objectStore(t)))}function jl(e){return vr(e.getAllKeys())}function fL(e,t,n){return e(r=>jl(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),vr(r.transaction)}))}function pL(e,t,n){return e(r=>jl(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),vr(r.transaction)}))}function hL(e){return e(t=>jl(t).then(n=>{const r=n[0];if(r!=null)return vr(t.get(r)).then(s=>(t.delete(r),vr(t.transaction).then(()=>s)))}))}function mL(e){let t;function n(){return t==null&&(t=dL(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Wi(r);await fL(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Wi(r);await pL(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await hL(n());if(r)return LE(r)}catch{}}}}function _L(e){return t=>{const n=e({...t,createStore:mL});return P.addEventListener("online",async r=>{await n.flush()}),n}}function nF(e=G_){return _L(pI(e))}const th=1e6,gL="window"in U&&U.window===U&&typeof importScripts>"u",on=String(0),So=gL?"main":"worker",bo=P.navigator;let hy="",my="",_y="",Kc=bo?.userAgent||"",gy="";const yL=bo?.language||bo?.languages?.[0]||"";function SL(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const nh=bo?.userAgentData;SL(nh)&&nh.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(hy=e.platform||"",_y=e.architecture||"",gy=e.model||"",my=e.platformVersion||"",e.fullVersionList?.length){const t=e.fullVersionList[e.fullVersionList.length-1];Kc=`${t.brand} ${t.version}`}}).catch(e=>{});function bL(e){return!("thread_metadata"in e)}function EL(e){return bL(e)?RL(e):e}function TL(e){const t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&I&&_.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function IL(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=TL(r),i=EL(n),o=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:be()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:be()*1e3;return{event_id:e,timestamp:new Date(o).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Co,runtime:{name:"javascript",version:P.navigator.userAgent},os:{name:hy,version:my,build_number:Kc},device:{locale:yL,model:gy,manufacturer:Kc,architecture:_y,is_emulator:!1},debug_meta:{images:Sy(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||ve(),trace_id:s,active_thread_id:on,relative_start_ns:"0",relative_end_ns:((a-o)*1e6).toFixed(0)}]}}function vL(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=kL(e),s=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:ve(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||ve(),platform:"javascript",version:"2",release:s.release??"",environment:s.environment??"production",debug_meta:{images:Sy(e.resources)},profile:r}}function wL(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function kL(e){const t=[];for(let a=0;a<e.frames.length;a++){const c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}const n=[];for(let a=0;a<e.stacks.length;a++){const c=e.stacks[a];if(!c)continue;const u=[];let d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}const r=fu(),s=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=s-(r||s),o=[];for(let a=0;a<e.samples.length;a++){const c=e.samples[a];if(!c)continue;const u=(s+(c.timestamp-i))/1e3;o[a]={stack_id:c.stackId??0,thread_id:on,timestamp:u}}return{frames:t,stacks:n,samples:o,thread_metadata:{[on]:{name:So}}}}function yy(e){return Z(e).op==="pageload"}function RL(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[on]:{name:So}}},s=e.samples[0];if(!s)return r;const i=s.timestamp,o=fu(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:o||0,c=a-(o||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*th).toFixed(0),stack_id:t,thread_id:on};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-i)*th).toFixed(0),stack_id:n,thread_id:on};r.stacks[n]=f,r.samples[d]=p,n++}),r}function CL(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function AL(e){const t=[];return xn(e,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++)n[s]?.contexts?.profile?.profile_id&&t.push(n[s])}),t}function Sy(e){const r=O()?.getOptions()?.stackParser;return r?oT(r,e):[]}function by(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(I&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(I&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function xL(e){return e.samples.length<2?(I&&_.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(I&&_.log("[Profiling] Discarding profile because it contains no frames"),!1)}let zl=!1;const Ey=3e4;function NL(e){return typeof e=="function"}function Ty(){const e=P.Profiler;if(!NL(e)){I&&_.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Ey/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{I&&(_.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),_.log("[Profiling] Disabling profiling for current user session.")),zl=!0}}function rh(e){if(zl)return I&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return I&&_.log("[Profiling] Discarding profile because root span was not sampled."),!1;const n=O()?.getOptions();if(!n)return I&&_.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return by(r)?r?(r===!0?!0:Math.random()<r)?!0:(I&&_.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(I&&_.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(I&&_.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function ML(e){if(zl)return I&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return I&&_.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return by(t)?t?Math.random()<=t:(I&&_.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(I&&_.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function di(e){return typeof e.profilesSampleRate<"u"}function OL(e,t,n,r){return xL(n)?IL(e,t,n,r):null}const Tn=new Map;function $L(){return Tn.size}function PL(e){const t=Tn.get(e);return t&&Tn.delete(e),t}function LL(e,t){if(Tn.set(e,t),Tn.size>30){const n=Tn.keys().next().value;n!==void 0&&Tn.delete(n)}}function DL(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":on,"thread.name":So}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":on,"thread.name":So}})),e}function sh(e){let t;yy(e)&&(t=be()*1e3);const n=Ty();if(!n)return;I&&_.log(`[Profiling] started profiling span: ${Z(e).description}`);const r=ve();let s=null;ne().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(s){I&&_.log("[Profiling] profile for:",Z(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(o&&(P.clearTimeout(o),o=void 0),I&&_.log(`[Profiling] stopped profiling of span: ${Z(e).description}`),!u){I&&_.log(`[Profiling] profiler returned null profile for: ${Z(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}s=u,LL(r,u)}).catch(u=>{I&&_.log("[Profiling] error while stopping profiler:",u)})}}let o=P.setTimeout(()=>{I&&_.log("[Profiling] max profile duration elapsed, stopping profiling for:",Z(e).description),i()},Ey);const a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const FL=6e4,UL=3e5;class BL{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,r=ML(t.getOptions());I&&_.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||I&&_.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=ve(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){I&&_.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){I&&_.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){I&&_.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){I&&_.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){I&&_.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(I&&_.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,I&&_.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Si().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){I&&_.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{I&&_.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Si().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){I&&_.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Ae(n))return;if(!n.isRecording()){I&&_.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(I&&_.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${s}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const s=this._activeRootSpanIds.size;I&&_.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${s}).`),s===0&&(this._collectCurrentChunk().catch(i=>{I&&_.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Si().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),UL);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;const t=Ty();if(!t){I&&_.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{I&&_.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},FL))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(I&&_.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=vL(n,this._client,this._profilerId),s=wL(r);if("reason"in s){I&&_.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",s.reason);return}this._sendProfileChunk(r),I&&_.log("[Profiling] Collected browser profile chunk.")}catch(n){I&&_.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){const n=this._client,r=bu(n.getSdkMetadata?.()),s=n.getDsn(),i=n.getOptions().tunnel,o=bt({event_id:ve(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&s&&{dsn:Ht(s)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(o).then(null,a=>{I&&_.error("Error while sending profile chunk envelope:",a)})}}const HL="BrowserProfiling",WL=(()=>({name:HL,setup(e){const t=e.getOptions(),n=new BL;if(!di(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),di(t)&&!t.profilesSampleRate){I&&_.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=Qe(),s=r&&Ae(r);if(di(t)&&t.profileSessionSampleRate!==void 0&&I&&_.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),di(t))s&&yy(s)&&rh(s)&&sh(s),e.on("spanStart",i=>{i===Ae(i)&&rh(i)&&sh(i)}),e.on("beforeEnvelope",i=>{if(!$L())return;const o=AL(i);if(!o.length)return;const a=[];for(const c of o){const u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){I&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){I&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;const f=PL(d);if(!f){I&&_.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}const p=OL(d,l,f,c);p&&a.push(p)}CL(i,a)});else{const i=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),i==="manual")n.initialize(e);else if(i==="trace"){if(!Je(t)){I&&_.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),s&&n.notifyRootSpanActive(s),P.setTimeout(()=>{const o=Qe(),a=o&&Ae(o);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return DL(e)}})),rF=WL,sF=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Ar(e)}});function iF(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Nn(e,t.value),Mn(e,t.value)}}}const oF=()=>({name:"OpenFeature",processEvent(e,t,n){return Ar(e)}});class aF{after(t,n){Nn(n.flagKey,n.value),Mn(n.flagKey,n.value)}error(t,n,r){Nn(t.flagKey,t.defaultValue),Mn(t.flagKey,t.defaultValue)}}const cF=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Ye(t,"isEnabled",jL)},processEvent(t,n,r){return Ar(t)}});function jL(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(Nn(n,r),Mn(n,r)):I&&_.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const uF=(({growthbookClass:e})=>Fv({growthbookClass:e})),lF=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{Nn(n.gate.name,n.gate.value),Mn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Ar(t)}});async function dF(){const e=O();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";const r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await XE(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const zL="WebWorker",fF=({worker:e})=>({name:zL,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>ih(t))},addWorker:t=>ih(t)});function ih(e){e.addEventListener("message",t=>{qL(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(I&&_.log("Sentry debugId web worker message received",t.data),P._sentryDebugIds={...t.data._sentryDebugIds,...P._sentryDebugIds}),t.data._sentryModuleMetadata&&(I&&_.log("Sentry module metadata web worker message received",t.data),P._sentryModuleMetadata={...t.data._sentryModuleMetadata,...P._sentryModuleMetadata}),t.data._sentryWorkerError&&(I&&_.log("Sentry worker rejection message received",t.data._sentryWorkerError),GL(t.data._sentryWorkerError)))})}function GL(e){const t=O();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,s=e.reason,i=Rr(s)?Y_(s):jo(n,s,void 0,r,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),Rs(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),I&&_.log("Captured worker unhandled rejection",s)}function pF({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0,_sentryModuleMetadata:e._sentryModuleMetadata??void 0}),e.addEventListener("unhandledrejection",t=>{const r={reason:V_(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),I&&_.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),I&&_.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function qL(e){if(!it(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e;return!(!t&&!n&&!r||t&&!(it(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(it(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!it(e._sentryWorkerError))}export{hk as BrowserClient,Ra as MULTIPLEXED_TRANSPORT_EXTRA_KEY,aF as OpenFeatureIntegrationHook,Qt as SDK_VERSION,Ue as SEMANTIC_ATTRIBUTE_SENTRY_OP,Ee as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,pu as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,ft as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,An as Scope,P as WINDOW,cn as addBreadcrumb,fD as addEventProcessor,pD as addIntegration,AC as breadcrumbsIntegration,BC as browserApiErrorsIntegration,rF as browserProfilingIntegration,qC as browserSessionIntegration,ZD as browserTracingIntegration,iF as buildLaunchDarklyFlagUsedHandler,_D as captureConsoleIntegration,Rs as captureEvent,ye as captureException,ID as captureFeedback,vT as captureMessage,Bd as captureSession,pC as chromeStackLineParser,lD as close,wD as consoleLoggingIntegration,VD as contextLinesIntegration,nD as continueTrace,RD as createConsolaReporter,ND as createLangChainCallbackHandler,ZT as createTransport,BD as createUserFeedbackEnvelope,XI as dedupeIntegration,dy as defaultRequestInstrumentationOptions,vC as defaultStackLineParsers,wC as defaultStackParser,dF as diagnoseSdkConnectivity,dm as endSession,OI as eventFiltersIntegration,uk as eventFromException,lk as eventFromMessage,Yu as exceptionFromError,gD as extraErrorDataIntegration,TD as featureFlagsIntegration,OD as feedbackAsyncIntegration,$D as feedbackIntegration,$D as feedbackSyncIntegration,uD as flush,WD as forceLoad,xI as functionToStringIntegration,gC as geckoStackLineParser,Qe as getActiveSpan,O as getClient,ne as getCurrentScope,pA as getDefaultIntegrations,YL as getFeedback,Si as getGlobalScope,Re as getIsolationScope,XD as getReplay,Ae as getRootSpan,bi as getSpanDescendants,rE as getSpanStatusFromHttpCode,Cm as getTraceData,JC as globalHandlersIntegration,YD as graphqlClientIntegration,uF as growthbookIntegration,qD as httpClientIntegration,eA as httpContextIntegration,$I as inboundFiltersIntegration,HD as init,AD as instrumentAnthropicAiClient,xD as instrumentGoogleGenAIClient,MD as instrumentLangGraph,CD as instrumentOpenAiClient,VP as instrumentOutgoingRequests,bv as instrumentSupabaseClient,kT as isEnabled,dD as isInitialized,wT as lastEventId,sF as launchDarklyIntegration,tk as lazyLoadIntegration,iA as linkedErrorsIntegration,vD as logger,nF as makeBrowserOfflineTransport,G_ as makeFetchTransport,hD as makeMultiplexedTransport,kD as metrics,mD as moduleMetadataIntegration,jD as onLoad,oF as openFeatureIntegration,FD as opera10StackLineParser,UD as opera11StackLineParser,EI as parameterize,wE as registerSpanErrorInstrumentation,pF as registerWebWorker,QD as replayCanvasIntegration,KD as replayIntegration,eF as reportPageLoaded,GD as reportingObserverIntegration,yD as rewriteFramesIntegration,vS as sendFeedback,tF as setActiveSpanInBrowser,rD as setContext,dI as setCurrentClient,iD as setExtra,sD as setExtras,Fi as setHttpStatus,eD as setMeasurement,aD as setTag,oD as setTags,cD as setUser,zD as showReportDialog,QL as spanToBaggageHeader,Z as spanToJSON,bE as spanToTraceHeader,uA as spotlightBrowserIntegration,cL as startBrowserTracingNavigationSpan,aL as startBrowserTracingPageLoadSpan,No as startInactiveSpan,QE as startNewTrace,Ud as startSession,Wn as startSpan,Xt as startSpanManual,lF as statsigIntegration,SD as supabaseIntegration,XE as suppressTracing,ED as thirdPartyErrorFilterIntegration,LD as uiProfiler,cF as unleashIntegration,XL as updateSpanName,fF as webWorkerIntegration,DD as winjsStackLineParser,Eu as withActiveSpan,KL as withIsolationScope,at as withScope,bD as zodErrorsIntegration};
