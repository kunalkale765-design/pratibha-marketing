import{e as a,a as c,g as s}from"./ui-Bns_kLia.js";window.onerror=function(e,o,r,t,n){return console.error("Uncaught error:",e,"at",o,r,t),!0};window.addEventListener("unhandledrejection",function(e){console.error("Unhandled promise rejection:",e.reason),e.preventDefault()});function l(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("ServiceWorker registered:",e.scope)}).catch(e=>{console.log("ServiceWorker registration failed:",e)})})}async function u(){localStorage.removeItem("user");const e={"Content-Type":"application/json"},o=s();o&&(e["X-CSRF-Token"]=o);try{await fetch("/api/auth/logout",{method:"POST",headers:e,credentials:"include"})}catch(r){console.error("Logout error:",r)}window.location.href="/pages/auth/login.html"}function d(){document.querySelectorAll("[data-logout], .logout-btn, #logoutBtn").forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),u()})})}function g(e={}){const{serviceWorker:o=!0,logout:r=!0,modalEscape:t=!0,csrfPreFetch:n=!0}=e;n&&a().catch(i=>console.warn("CSRF pre-fetch failed:",i)),o&&l(),r&&d(),t&&c()}export{g as i,u as l,l as r};
